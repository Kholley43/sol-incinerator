var Jf=Object.defineProperty;var Xf=(r,t,e)=>t in r?Jf(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var be=(r,t,e)=>Xf(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=e(s);fetch(s.href,i)}})();var on=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Si(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function ka(r){if(r.__esModule)return r;var t=r.default;if(typeof t=="function"){var e=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var s=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:function(){return r[n]}})}),e}var lt={},ks={};ks.byteLength=eh;ks.toByteArray=rh;ks.fromByteArray=oh;var fn=[],Xe=[],Qf=typeof Uint8Array<"u"?Uint8Array:Array,uo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var br=0,th=uo.length;br<th;++br)fn[br]=uo[br],Xe[uo.charCodeAt(br)]=br;Xe[45]=62;Xe[95]=63;function vu(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");e===-1&&(e=t);var n=e===t?0:4-e%4;return[e,n]}function eh(r){var t=vu(r),e=t[0],n=t[1];return(e+n)*3/4-n}function nh(r,t,e){return(t+e)*3/4-e}function rh(r){var t,e=vu(r),n=e[0],s=e[1],i=new Qf(nh(r,n,s)),o=0,a=s>0?n-4:n,u;for(u=0;u<a;u+=4)t=Xe[r.charCodeAt(u)]<<18|Xe[r.charCodeAt(u+1)]<<12|Xe[r.charCodeAt(u+2)]<<6|Xe[r.charCodeAt(u+3)],i[o++]=t>>16&255,i[o++]=t>>8&255,i[o++]=t&255;return s===2&&(t=Xe[r.charCodeAt(u)]<<2|Xe[r.charCodeAt(u+1)]>>4,i[o++]=t&255),s===1&&(t=Xe[r.charCodeAt(u)]<<10|Xe[r.charCodeAt(u+1)]<<4|Xe[r.charCodeAt(u+2)]>>2,i[o++]=t>>8&255,i[o++]=t&255),i}function ih(r){return fn[r>>18&63]+fn[r>>12&63]+fn[r>>6&63]+fn[r&63]}function sh(r,t,e){for(var n,s=[],i=t;i<e;i+=3)n=(r[i]<<16&16711680)+(r[i+1]<<8&65280)+(r[i+2]&255),s.push(ih(n));return s.join("")}function oh(r){for(var t,e=r.length,n=e%3,s=[],i=16383,o=0,a=e-n;o<a;o+=i)s.push(sh(r,o,o+i>a?a:o+i));return n===1?(t=r[e-1],s.push(fn[t>>2]+fn[t<<4&63]+"==")):n===2&&(t=(r[e-2]<<8)+r[e-1],s.push(fn[t>>10]+fn[t>>4&63]+fn[t<<2&63]+"=")),s.join("")}var Ea={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ea.read=function(r,t,e,n,s){var i,o,a=s*8-n-1,u=(1<<a)-1,p=u>>1,m=-7,A=e?s-1:0,S=e?-1:1,g=r[t+A];for(A+=S,i=g&(1<<-m)-1,g>>=-m,m+=a;m>0;i=i*256+r[t+A],A+=S,m-=8);for(o=i&(1<<-m)-1,i>>=-m,m+=n;m>0;o=o*256+r[t+A],A+=S,m-=8);if(i===0)i=1-p;else{if(i===u)return o?NaN:(g?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-p}return(g?-1:1)*o*Math.pow(2,i-n)};Ea.write=function(r,t,e,n,s,i){var o,a,u,p=i*8-s-1,m=(1<<p)-1,A=m>>1,S=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:i-1,E=n?1:-1,R=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=m):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+A>=1?t+=S/u:t+=S*Math.pow(2,1-A),t*u>=2&&(o++,u/=2),o+A>=m?(a=0,o=m):o+A>=1?(a=(t*u-1)*Math.pow(2,s),o=o+A):(a=t*Math.pow(2,A-1)*Math.pow(2,s),o=0));s>=8;r[e+g]=a&255,g+=E,a/=256,s-=8);for(o=o<<s|a,p+=s;p>0;r[e+g]=o&255,g+=E,o/=256,p-=8);r[e+g-E]|=R*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(r){const t=ks,e=Ea,n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;r.Buffer=a,r.SlowBuffer=N,r.INSPECT_MAX_BYTES=50;const s=2147483647;r.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=i(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const w=new Uint8Array(1),l={foo:function(){return 42}};return Object.setPrototypeOf(l,Uint8Array.prototype),Object.setPrototypeOf(w,l),w.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(w){if(w>s)throw new RangeError('The value "'+w+'" is invalid for option "size"');const l=new Uint8Array(w);return Object.setPrototypeOf(l,a.prototype),l}function a(w,l,d){if(typeof w=="number"){if(typeof l=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return A(w)}return u(w,l,d)}a.poolSize=8192;function u(w,l,d){if(typeof w=="string")return S(w,l);if(ArrayBuffer.isView(w))return E(w);if(w==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w);if(Ve(w,ArrayBuffer)||w&&Ve(w.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ve(w,SharedArrayBuffer)||w&&Ve(w.buffer,SharedArrayBuffer)))return R(w,l,d);if(typeof w=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _=w.valueOf&&w.valueOf();if(_!=null&&_!==w)return a.from(_,l,d);const L=T(w);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof w[Symbol.toPrimitive]=="function")return a.from(w[Symbol.toPrimitive]("string"),l,d);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof w)}a.from=function(w,l,d){return u(w,l,d)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(w){if(typeof w!="number")throw new TypeError('"size" argument must be of type number');if(w<0)throw new RangeError('The value "'+w+'" is invalid for option "size"')}function m(w,l,d){return p(w),w<=0?o(w):l!==void 0?typeof d=="string"?o(w).fill(l,d):o(w).fill(l):o(w)}a.alloc=function(w,l,d){return m(w,l,d)};function A(w){return p(w),o(w<0?0:M(w)|0)}a.allocUnsafe=function(w){return A(w)},a.allocUnsafeSlow=function(w){return A(w)};function S(w,l){if((typeof l!="string"||l==="")&&(l="utf8"),!a.isEncoding(l))throw new TypeError("Unknown encoding: "+l);const d=P(w,l)|0;let _=o(d);const L=_.write(w,l);return L!==d&&(_=_.slice(0,L)),_}function g(w){const l=w.length<0?0:M(w.length)|0,d=o(l);for(let _=0;_<l;_+=1)d[_]=w[_]&255;return d}function E(w){if(Ve(w,Uint8Array)){const l=new Uint8Array(w);return R(l.buffer,l.byteOffset,l.byteLength)}return g(w)}function R(w,l,d){if(l<0||w.byteLength<l)throw new RangeError('"offset" is outside of buffer bounds');if(w.byteLength<l+(d||0))throw new RangeError('"length" is outside of buffer bounds');let _;return l===void 0&&d===void 0?_=new Uint8Array(w):d===void 0?_=new Uint8Array(w,l):_=new Uint8Array(w,l,d),Object.setPrototypeOf(_,a.prototype),_}function T(w){if(a.isBuffer(w)){const l=M(w.length)|0,d=o(l);return d.length===0||w.copy(d,0,0,l),d}if(w.length!==void 0)return typeof w.length!="number"||Dt(w.length)?o(0):g(w);if(w.type==="Buffer"&&Array.isArray(w.data))return g(w.data)}function M(w){if(w>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return w|0}function N(w){return+w!=w&&(w=0),a.alloc(+w)}a.isBuffer=function(l){return l!=null&&l._isBuffer===!0&&l!==a.prototype},a.compare=function(l,d){if(Ve(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),Ve(d,Uint8Array)&&(d=a.from(d,d.offset,d.byteLength)),!a.isBuffer(l)||!a.isBuffer(d))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(l===d)return 0;let _=l.length,L=d.length;for(let O=0,z=Math.min(_,L);O<z;++O)if(l[O]!==d[O]){_=l[O],L=d[O];break}return _<L?-1:L<_?1:0},a.isEncoding=function(l){switch(String(l).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(l,d){if(!Array.isArray(l))throw new TypeError('"list" argument must be an Array of Buffers');if(l.length===0)return a.alloc(0);let _;if(d===void 0)for(d=0,_=0;_<l.length;++_)d+=l[_].length;const L=a.allocUnsafe(d);let O=0;for(_=0;_<l.length;++_){let z=l[_];if(Ve(z,Uint8Array))O+z.length>L.length?(a.isBuffer(z)||(z=a.from(z)),z.copy(L,O)):Uint8Array.prototype.set.call(L,z,O);else if(a.isBuffer(z))z.copy(L,O);else throw new TypeError('"list" argument must be an Array of Buffers');O+=z.length}return L};function P(w,l){if(a.isBuffer(w))return w.length;if(ArrayBuffer.isView(w)||Ve(w,ArrayBuffer))return w.byteLength;if(typeof w!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof w);const d=w.length,_=arguments.length>2&&arguments[2]===!0;if(!_&&d===0)return 0;let L=!1;for(;;)switch(l){case"ascii":case"latin1":case"binary":return d;case"utf8":case"utf-8":return zt(w).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d*2;case"hex":return d>>>1;case"base64":return $t(w).length;default:if(L)return _?-1:zt(w).length;l=(""+l).toLowerCase(),L=!0}}a.byteLength=P;function W(w,l,d){let _=!1;if((l===void 0||l<0)&&(l=0),l>this.length||((d===void 0||d>this.length)&&(d=this.length),d<=0)||(d>>>=0,l>>>=0,d<=l))return"";for(w||(w="utf8");;)switch(w){case"hex":return B(this,l,d);case"utf8":case"utf-8":return c(this,l,d);case"ascii":return k(this,l,d);case"latin1":case"binary":return I(this,l,d);case"base64":return b(this,l,d);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,l,d);default:if(_)throw new TypeError("Unknown encoding: "+w);w=(w+"").toLowerCase(),_=!0}}a.prototype._isBuffer=!0;function K(w,l,d){const _=w[l];w[l]=w[d],w[d]=_}a.prototype.swap16=function(){const l=this.length;if(l%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let d=0;d<l;d+=2)K(this,d,d+1);return this},a.prototype.swap32=function(){const l=this.length;if(l%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let d=0;d<l;d+=4)K(this,d,d+3),K(this,d+1,d+2);return this},a.prototype.swap64=function(){const l=this.length;if(l%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let d=0;d<l;d+=8)K(this,d,d+7),K(this,d+1,d+6),K(this,d+2,d+5),K(this,d+3,d+4);return this},a.prototype.toString=function(){const l=this.length;return l===0?"":arguments.length===0?c(this,0,l):W.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(l){if(!a.isBuffer(l))throw new TypeError("Argument must be a Buffer");return this===l?!0:a.compare(this,l)===0},a.prototype.inspect=function(){let l="";const d=r.INSPECT_MAX_BYTES;return l=this.toString("hex",0,d).replace(/(.{2})/g,"$1 ").trim(),this.length>d&&(l+=" ... "),"<Buffer "+l+">"},n&&(a.prototype[n]=a.prototype.inspect),a.prototype.compare=function(l,d,_,L,O){if(Ve(l,Uint8Array)&&(l=a.from(l,l.offset,l.byteLength)),!a.isBuffer(l))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof l);if(d===void 0&&(d=0),_===void 0&&(_=l?l.length:0),L===void 0&&(L=0),O===void 0&&(O=this.length),d<0||_>l.length||L<0||O>this.length)throw new RangeError("out of range index");if(L>=O&&d>=_)return 0;if(L>=O)return-1;if(d>=_)return 1;if(d>>>=0,_>>>=0,L>>>=0,O>>>=0,this===l)return 0;let z=O-L,mt=_-d;const yt=Math.min(z,mt),gt=this.slice(L,O),Wt=l.slice(d,_);for(let dt=0;dt<yt;++dt)if(gt[dt]!==Wt[dt]){z=gt[dt],mt=Wt[dt];break}return z<mt?-1:mt<z?1:0};function $(w,l,d,_,L){if(w.length===0)return-1;if(typeof d=="string"?(_=d,d=0):d>2147483647?d=2147483647:d<-2147483648&&(d=-2147483648),d=+d,Dt(d)&&(d=L?0:w.length-1),d<0&&(d=w.length+d),d>=w.length){if(L)return-1;d=w.length-1}else if(d<0)if(L)d=0;else return-1;if(typeof l=="string"&&(l=a.from(l,_)),a.isBuffer(l))return l.length===0?-1:V(w,l,d,_,L);if(typeof l=="number")return l=l&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(w,l,d):Uint8Array.prototype.lastIndexOf.call(w,l,d):V(w,[l],d,_,L);throw new TypeError("val must be string, number or Buffer")}function V(w,l,d,_,L){let O=1,z=w.length,mt=l.length;if(_!==void 0&&(_=String(_).toLowerCase(),_==="ucs2"||_==="ucs-2"||_==="utf16le"||_==="utf-16le")){if(w.length<2||l.length<2)return-1;O=2,z/=2,mt/=2,d/=2}function yt(Wt,dt){return O===1?Wt[dt]:Wt.readUInt16BE(dt*O)}let gt;if(L){let Wt=-1;for(gt=d;gt<z;gt++)if(yt(w,gt)===yt(l,Wt===-1?0:gt-Wt)){if(Wt===-1&&(Wt=gt),gt-Wt+1===mt)return Wt*O}else Wt!==-1&&(gt-=gt-Wt),Wt=-1}else for(d+mt>z&&(d=z-mt),gt=d;gt>=0;gt--){let Wt=!0;for(let dt=0;dt<mt;dt++)if(yt(w,gt+dt)!==yt(l,dt)){Wt=!1;break}if(Wt)return gt}return-1}a.prototype.includes=function(l,d,_){return this.indexOf(l,d,_)!==-1},a.prototype.indexOf=function(l,d,_){return $(this,l,d,_,!0)},a.prototype.lastIndexOf=function(l,d,_){return $(this,l,d,_,!1)};function j(w,l,d,_){d=Number(d)||0;const L=w.length-d;_?(_=Number(_),_>L&&(_=L)):_=L;const O=l.length;_>O/2&&(_=O/2);let z;for(z=0;z<_;++z){const mt=parseInt(l.substr(z*2,2),16);if(Dt(mt))return z;w[d+z]=mt}return z}function D(w,l,d,_){return Ut(zt(l,w.length-d),w,d,_)}function Z(w,l,d,_){return Ut(Yt(l),w,d,_)}function X(w,l,d,_){return Ut($t(l),w,d,_)}function J(w,l,d,_){return Ut(Ti(l,w.length-d),w,d,_)}a.prototype.write=function(l,d,_,L){if(d===void 0)L="utf8",_=this.length,d=0;else if(_===void 0&&typeof d=="string")L=d,_=this.length,d=0;else if(isFinite(d))d=d>>>0,isFinite(_)?(_=_>>>0,L===void 0&&(L="utf8")):(L=_,_=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const O=this.length-d;if((_===void 0||_>O)&&(_=O),l.length>0&&(_<0||d<0)||d>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let z=!1;for(;;)switch(L){case"hex":return j(this,l,d,_);case"utf8":case"utf-8":return D(this,l,d,_);case"ascii":case"latin1":case"binary":return Z(this,l,d,_);case"base64":return X(this,l,d,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J(this,l,d,_);default:if(z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function b(w,l,d){return l===0&&d===w.length?t.fromByteArray(w):t.fromByteArray(w.slice(l,d))}function c(w,l,d){d=Math.min(w.length,d);const _=[];let L=l;for(;L<d;){const O=w[L];let z=null,mt=O>239?4:O>223?3:O>191?2:1;if(L+mt<=d){let yt,gt,Wt,dt;switch(mt){case 1:O<128&&(z=O);break;case 2:yt=w[L+1],(yt&192)===128&&(dt=(O&31)<<6|yt&63,dt>127&&(z=dt));break;case 3:yt=w[L+1],gt=w[L+2],(yt&192)===128&&(gt&192)===128&&(dt=(O&15)<<12|(yt&63)<<6|gt&63,dt>2047&&(dt<55296||dt>57343)&&(z=dt));break;case 4:yt=w[L+1],gt=w[L+2],Wt=w[L+3],(yt&192)===128&&(gt&192)===128&&(Wt&192)===128&&(dt=(O&15)<<18|(yt&63)<<12|(gt&63)<<6|Wt&63,dt>65535&&dt<1114112&&(z=dt))}}z===null?(z=65533,mt=1):z>65535&&(z-=65536,_.push(z>>>10&1023|55296),z=56320|z&1023),_.push(z),L+=mt}return y(_)}const h=4096;function y(w){const l=w.length;if(l<=h)return String.fromCharCode.apply(String,w);let d="",_=0;for(;_<l;)d+=String.fromCharCode.apply(String,w.slice(_,_+=h));return d}function k(w,l,d){let _="";d=Math.min(w.length,d);for(let L=l;L<d;++L)_+=String.fromCharCode(w[L]&127);return _}function I(w,l,d){let _="";d=Math.min(w.length,d);for(let L=l;L<d;++L)_+=String.fromCharCode(w[L]);return _}function B(w,l,d){const _=w.length;(!l||l<0)&&(l=0),(!d||d<0||d>_)&&(d=_);let L="";for(let O=l;O<d;++O)L+=Zt[w[O]];return L}function C(w,l,d){const _=w.slice(l,d);let L="";for(let O=0;O<_.length-1;O+=2)L+=String.fromCharCode(_[O]+_[O+1]*256);return L}a.prototype.slice=function(l,d){const _=this.length;l=~~l,d=d===void 0?_:~~d,l<0?(l+=_,l<0&&(l=0)):l>_&&(l=_),d<0?(d+=_,d<0&&(d=0)):d>_&&(d=_),d<l&&(d=l);const L=this.subarray(l,d);return Object.setPrototypeOf(L,a.prototype),L};function v(w,l,d){if(w%1!==0||w<0)throw new RangeError("offset is not uint");if(w+l>d)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(l,d,_){l=l>>>0,d=d>>>0,_||v(l,d,this.length);let L=this[l],O=1,z=0;for(;++z<d&&(O*=256);)L+=this[l+z]*O;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(l,d,_){l=l>>>0,d=d>>>0,_||v(l,d,this.length);let L=this[l+--d],O=1;for(;d>0&&(O*=256);)L+=this[l+--d]*O;return L},a.prototype.readUint8=a.prototype.readUInt8=function(l,d){return l=l>>>0,d||v(l,1,this.length),this[l]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(l,d){return l=l>>>0,d||v(l,2,this.length),this[l]|this[l+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(l,d){return l=l>>>0,d||v(l,2,this.length),this[l]<<8|this[l+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(l,d){return l=l>>>0,d||v(l,4,this.length),(this[l]|this[l+1]<<8|this[l+2]<<16)+this[l+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(l,d){return l=l>>>0,d||v(l,4,this.length),this[l]*16777216+(this[l+1]<<16|this[l+2]<<8|this[l+3])},a.prototype.readBigUInt64LE=nn(function(l){l=l>>>0,Je(l,"offset");const d=this[l],_=this[l+7];(d===void 0||_===void 0)&&Lt(l,this.length-8);const L=d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24,O=this[++l]+this[++l]*2**8+this[++l]*2**16+_*2**24;return BigInt(L)+(BigInt(O)<<BigInt(32))}),a.prototype.readBigUInt64BE=nn(function(l){l=l>>>0,Je(l,"offset");const d=this[l],_=this[l+7];(d===void 0||_===void 0)&&Lt(l,this.length-8);const L=d*2**24+this[++l]*2**16+this[++l]*2**8+this[++l],O=this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_;return(BigInt(L)<<BigInt(32))+BigInt(O)}),a.prototype.readIntLE=function(l,d,_){l=l>>>0,d=d>>>0,_||v(l,d,this.length);let L=this[l],O=1,z=0;for(;++z<d&&(O*=256);)L+=this[l+z]*O;return O*=128,L>=O&&(L-=Math.pow(2,8*d)),L},a.prototype.readIntBE=function(l,d,_){l=l>>>0,d=d>>>0,_||v(l,d,this.length);let L=d,O=1,z=this[l+--L];for(;L>0&&(O*=256);)z+=this[l+--L]*O;return O*=128,z>=O&&(z-=Math.pow(2,8*d)),z},a.prototype.readInt8=function(l,d){return l=l>>>0,d||v(l,1,this.length),this[l]&128?(255-this[l]+1)*-1:this[l]},a.prototype.readInt16LE=function(l,d){l=l>>>0,d||v(l,2,this.length);const _=this[l]|this[l+1]<<8;return _&32768?_|4294901760:_},a.prototype.readInt16BE=function(l,d){l=l>>>0,d||v(l,2,this.length);const _=this[l+1]|this[l]<<8;return _&32768?_|4294901760:_},a.prototype.readInt32LE=function(l,d){return l=l>>>0,d||v(l,4,this.length),this[l]|this[l+1]<<8|this[l+2]<<16|this[l+3]<<24},a.prototype.readInt32BE=function(l,d){return l=l>>>0,d||v(l,4,this.length),this[l]<<24|this[l+1]<<16|this[l+2]<<8|this[l+3]},a.prototype.readBigInt64LE=nn(function(l){l=l>>>0,Je(l,"offset");const d=this[l],_=this[l+7];(d===void 0||_===void 0)&&Lt(l,this.length-8);const L=this[l+4]+this[l+5]*2**8+this[l+6]*2**16+(_<<24);return(BigInt(L)<<BigInt(32))+BigInt(d+this[++l]*2**8+this[++l]*2**16+this[++l]*2**24)}),a.prototype.readBigInt64BE=nn(function(l){l=l>>>0,Je(l,"offset");const d=this[l],_=this[l+7];(d===void 0||_===void 0)&&Lt(l,this.length-8);const L=(d<<24)+this[++l]*2**16+this[++l]*2**8+this[++l];return(BigInt(L)<<BigInt(32))+BigInt(this[++l]*2**24+this[++l]*2**16+this[++l]*2**8+_)}),a.prototype.readFloatLE=function(l,d){return l=l>>>0,d||v(l,4,this.length),e.read(this,l,!0,23,4)},a.prototype.readFloatBE=function(l,d){return l=l>>>0,d||v(l,4,this.length),e.read(this,l,!1,23,4)},a.prototype.readDoubleLE=function(l,d){return l=l>>>0,d||v(l,8,this.length),e.read(this,l,!0,52,8)},a.prototype.readDoubleBE=function(l,d){return l=l>>>0,d||v(l,8,this.length),e.read(this,l,!1,52,8)};function f(w,l,d,_,L,O){if(!a.isBuffer(w))throw new TypeError('"buffer" argument must be a Buffer instance');if(l>L||l<O)throw new RangeError('"value" argument is out of bounds');if(d+_>w.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(l,d,_,L){if(l=+l,d=d>>>0,_=_>>>0,!L){const mt=Math.pow(2,8*_)-1;f(this,l,d,_,mt,0)}let O=1,z=0;for(this[d]=l&255;++z<_&&(O*=256);)this[d+z]=l/O&255;return d+_},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(l,d,_,L){if(l=+l,d=d>>>0,_=_>>>0,!L){const mt=Math.pow(2,8*_)-1;f(this,l,d,_,mt,0)}let O=_-1,z=1;for(this[d+O]=l&255;--O>=0&&(z*=256);)this[d+O]=l/z&255;return d+_},a.prototype.writeUint8=a.prototype.writeUInt8=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,1,255,0),this[d]=l&255,d+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,2,65535,0),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,2,65535,0),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,4,4294967295,0),this[d+3]=l>>>24,this[d+2]=l>>>16,this[d+1]=l>>>8,this[d]=l&255,d+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,4,4294967295,0),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4};function x(w,l,d,_,L){Pt(l,_,L,w,d,7);let O=Number(l&BigInt(4294967295));w[d++]=O,O=O>>8,w[d++]=O,O=O>>8,w[d++]=O,O=O>>8,w[d++]=O;let z=Number(l>>BigInt(32)&BigInt(4294967295));return w[d++]=z,z=z>>8,w[d++]=z,z=z>>8,w[d++]=z,z=z>>8,w[d++]=z,d}function et(w,l,d,_,L){Pt(l,_,L,w,d,7);let O=Number(l&BigInt(4294967295));w[d+7]=O,O=O>>8,w[d+6]=O,O=O>>8,w[d+5]=O,O=O>>8,w[d+4]=O;let z=Number(l>>BigInt(32)&BigInt(4294967295));return w[d+3]=z,z=z>>8,w[d+2]=z,z=z>>8,w[d+1]=z,z=z>>8,w[d]=z,d+8}a.prototype.writeBigUInt64LE=nn(function(l,d=0){return x(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=nn(function(l,d=0){return et(this,l,d,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(l,d,_,L){if(l=+l,d=d>>>0,!L){const yt=Math.pow(2,8*_-1);f(this,l,d,_,yt-1,-yt)}let O=0,z=1,mt=0;for(this[d]=l&255;++O<_&&(z*=256);)l<0&&mt===0&&this[d+O-1]!==0&&(mt=1),this[d+O]=(l/z>>0)-mt&255;return d+_},a.prototype.writeIntBE=function(l,d,_,L){if(l=+l,d=d>>>0,!L){const yt=Math.pow(2,8*_-1);f(this,l,d,_,yt-1,-yt)}let O=_-1,z=1,mt=0;for(this[d+O]=l&255;--O>=0&&(z*=256);)l<0&&mt===0&&this[d+O+1]!==0&&(mt=1),this[d+O]=(l/z>>0)-mt&255;return d+_},a.prototype.writeInt8=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,1,127,-128),l<0&&(l=255+l+1),this[d]=l&255,d+1},a.prototype.writeInt16LE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,2,32767,-32768),this[d]=l&255,this[d+1]=l>>>8,d+2},a.prototype.writeInt16BE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,2,32767,-32768),this[d]=l>>>8,this[d+1]=l&255,d+2},a.prototype.writeInt32LE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,4,2147483647,-2147483648),this[d]=l&255,this[d+1]=l>>>8,this[d+2]=l>>>16,this[d+3]=l>>>24,d+4},a.prototype.writeInt32BE=function(l,d,_){return l=+l,d=d>>>0,_||f(this,l,d,4,2147483647,-2147483648),l<0&&(l=4294967295+l+1),this[d]=l>>>24,this[d+1]=l>>>16,this[d+2]=l>>>8,this[d+3]=l&255,d+4},a.prototype.writeBigInt64LE=nn(function(l,d=0){return x(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=nn(function(l,d=0){return et(this,l,d,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function G(w,l,d,_,L,O){if(d+_>w.length)throw new RangeError("Index out of range");if(d<0)throw new RangeError("Index out of range")}function it(w,l,d,_,L){return l=+l,d=d>>>0,L||G(w,l,d,4),e.write(w,l,d,_,23,4),d+4}a.prototype.writeFloatLE=function(l,d,_){return it(this,l,d,!0,_)},a.prototype.writeFloatBE=function(l,d,_){return it(this,l,d,!1,_)};function vt(w,l,d,_,L){return l=+l,d=d>>>0,L||G(w,l,d,8),e.write(w,l,d,_,52,8),d+8}a.prototype.writeDoubleLE=function(l,d,_){return vt(this,l,d,!0,_)},a.prototype.writeDoubleBE=function(l,d,_){return vt(this,l,d,!1,_)},a.prototype.copy=function(l,d,_,L){if(!a.isBuffer(l))throw new TypeError("argument should be a Buffer");if(_||(_=0),!L&&L!==0&&(L=this.length),d>=l.length&&(d=l.length),d||(d=0),L>0&&L<_&&(L=_),L===_||l.length===0||this.length===0)return 0;if(d<0)throw new RangeError("targetStart out of bounds");if(_<0||_>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),l.length-d<L-_&&(L=l.length-d+_);const O=L-_;return this===l&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(d,_,L):Uint8Array.prototype.set.call(l,this.subarray(_,L),d),O},a.prototype.fill=function(l,d,_,L){if(typeof l=="string"){if(typeof d=="string"?(L=d,d=0,_=this.length):typeof _=="string"&&(L=_,_=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(l.length===1){const z=l.charCodeAt(0);(L==="utf8"&&z<128||L==="latin1")&&(l=z)}}else typeof l=="number"?l=l&255:typeof l=="boolean"&&(l=Number(l));if(d<0||this.length<d||this.length<_)throw new RangeError("Out of range index");if(_<=d)return this;d=d>>>0,_=_===void 0?this.length:_>>>0,l||(l=0);let O;if(typeof l=="number")for(O=d;O<_;++O)this[O]=l;else{const z=a.isBuffer(l)?l:a.from(l,L),mt=z.length;if(mt===0)throw new TypeError('The value "'+l+'" is invalid for argument "value"');for(O=0;O<_-d;++O)this[O+d]=z[O%mt]}return this};const pt={};function ht(w,l,d){pt[w]=class extends d{constructor(){super(),Object.defineProperty(this,"message",{value:l.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${w}]`,this.stack,delete this.name}get code(){return w}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${w}]: ${this.message}`}}}ht("ERR_BUFFER_OUT_OF_BOUNDS",function(w){return w?`${w} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ht("ERR_INVALID_ARG_TYPE",function(w,l){return`The "${w}" argument must be of type number. Received type ${typeof l}`},TypeError),ht("ERR_OUT_OF_RANGE",function(w,l,d){let _=`The value of "${w}" is out of range.`,L=d;return Number.isInteger(d)&&Math.abs(d)>2**32?L=Ht(String(d)):typeof d=="bigint"&&(L=String(d),(d>BigInt(2)**BigInt(32)||d<-(BigInt(2)**BigInt(32)))&&(L=Ht(L)),L+="n"),_+=` It must be ${l}. Received ${L}`,_},RangeError);function Ht(w){let l="",d=w.length;const _=w[0]==="-"?1:0;for(;d>=_+4;d-=3)l=`_${w.slice(d-3,d)}${l}`;return`${w.slice(0,d)}${l}`}function Tt(w,l,d){Je(l,"offset"),(w[l]===void 0||w[l+d]===void 0)&&Lt(l,w.length-(d+1))}function Pt(w,l,d,_,L,O){if(w>d||w<l){const z=typeof l=="bigint"?"n":"";let mt;throw l===0||l===BigInt(0)?mt=`>= 0${z} and < 2${z} ** ${(O+1)*8}${z}`:mt=`>= -(2${z} ** ${(O+1)*8-1}${z}) and < 2 ** ${(O+1)*8-1}${z}`,new pt.ERR_OUT_OF_RANGE("value",mt,w)}Tt(_,L,O)}function Je(w,l){if(typeof w!="number")throw new pt.ERR_INVALID_ARG_TYPE(l,"number",w)}function Lt(w,l,d){throw Math.floor(w)!==w?(Je(w,d),new pt.ERR_OUT_OF_RANGE("offset","an integer",w)):l<0?new pt.ERR_BUFFER_OUT_OF_BOUNDS:new pt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${l}`,w)}const Gt=/[^+/0-9A-Za-z-_]/g;function Mi(w){if(w=w.split("=")[0],w=w.trim().replace(Gt,""),w.length<2)return"";for(;w.length%4!==0;)w=w+"=";return w}function zt(w,l){l=l||1/0;let d;const _=w.length;let L=null;const O=[];for(let z=0;z<_;++z){if(d=w.charCodeAt(z),d>55295&&d<57344){if(!L){if(d>56319){(l-=3)>-1&&O.push(239,191,189);continue}else if(z+1===_){(l-=3)>-1&&O.push(239,191,189);continue}L=d;continue}if(d<56320){(l-=3)>-1&&O.push(239,191,189),L=d;continue}d=(L-55296<<10|d-56320)+65536}else L&&(l-=3)>-1&&O.push(239,191,189);if(L=null,d<128){if((l-=1)<0)break;O.push(d)}else if(d<2048){if((l-=2)<0)break;O.push(d>>6|192,d&63|128)}else if(d<65536){if((l-=3)<0)break;O.push(d>>12|224,d>>6&63|128,d&63|128)}else if(d<1114112){if((l-=4)<0)break;O.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw new Error("Invalid code point")}return O}function Yt(w){const l=[];for(let d=0;d<w.length;++d)l.push(w.charCodeAt(d)&255);return l}function Ti(w,l){let d,_,L;const O=[];for(let z=0;z<w.length&&!((l-=2)<0);++z)d=w.charCodeAt(z),_=d>>8,L=d%256,O.push(L),O.push(_);return O}function $t(w){return t.toByteArray(Mi(w))}function Ut(w,l,d,_){let L;for(L=0;L<_&&!(L+d>=l.length||L>=w.length);++L)l[L+d]=w[L];return L}function Ve(w,l){return w instanceof l||w!=null&&w.constructor!=null&&w.constructor.name!=null&&w.constructor.name===l.name}function Dt(w){return w!==w}const Zt=function(){const w="0123456789abcdef",l=new Array(256);for(let d=0;d<16;++d){const _=d*16;for(let L=0;L<16;++L)l[_+L]=w[d]+w[L]}return l}();function nn(w){return typeof BigInt>"u"?Jt:w}function Jt(){throw new Error("BigInt not supported")}})(lt);const vr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function ki(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function di(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Pn(r,...t){if(!ki(r))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(r.length))throw new Error("Uint8Array expected of length "+t+", got length="+r.length)}function Su(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");di(r.outputLen),di(r.blockLen)}function Fr(r,t=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(t&&r.finished)throw new Error("Hash#digest() has already been called")}function ku(r,t){Pn(r);const e=t.outputLen;if(r.length<e)throw new Error("digestInto() expects output buffer of length at least "+e)}function ah(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Zn(...r){for(let t=0;t<r.length;t++)r[t].fill(0)}function lo(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function un(r,t){return r<<32-t|r>>>t}const ch=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function uh(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function lh(r){for(let t=0;t<r.length;t++)r[t]=uh(r[t]);return r}const kc=ch?r=>r:lh,Eu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",fh=Array.from({length:256},(r,t)=>t.toString(16).padStart(2,"0"));function ur(r){if(Pn(r),Eu)return r.toHex();let t="";for(let e=0;e<r.length;e++)t+=fh[r[e]];return t}const En={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ec(r){if(r>=En._0&&r<=En._9)return r-En._0;if(r>=En.A&&r<=En.F)return r-(En.A-10);if(r>=En.a&&r<=En.f)return r-(En.a-10)}function is(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Eu)return Uint8Array.fromHex(r);const t=r.length,e=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(e);for(let s=0,i=0;s<e;s++,i+=2){const o=Ec(r.charCodeAt(i)),a=Ec(r.charCodeAt(i+1));if(o===void 0||a===void 0){const u=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+i)}n[s]=o*16+a}return n}function hh(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Es(r){return typeof r=="string"&&(r=hh(r)),Pn(r),r}function hn(...r){let t=0;for(let n=0;n<r.length;n++){const s=r[n];Pn(s),t+=s.length}const e=new Uint8Array(t);for(let n=0,s=0;n<r.length;n++){const i=r[n];e.set(i,s),s+=i.length}return e}class Aa{}function _a(r){const t=n=>r().update(Es(n)).digest(),e=r();return t.outputLen=e.outputLen,t.blockLen=e.blockLen,t.create=()=>r(),t}function Ia(r=32){if(vr&&typeof vr.getRandomValues=="function")return vr.getRandomValues(new Uint8Array(r));if(vr&&typeof vr.randomBytes=="function")return Uint8Array.from(vr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}function dh(r,t,e,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(t,e,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(e>>s&i),a=Number(e&i),u=n?4:0,p=n?0:4;r.setUint32(t+u,o,n),r.setUint32(t+p,a,n)}function ph(r,t,e){return r&t^~r&e}function gh(r,t,e){return r&t^r&e^t&e}class Au extends Aa{constructor(t,e,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=e,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(t),this.view=lo(this.buffer)}update(t){Fr(this),t=Es(t),Pn(t);const{view:e,buffer:n,blockLen:s}=this,i=t.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const u=lo(t);for(;s<=i-o;o+=s)this.process(u,o);continue}n.set(t.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(e,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Fr(this),ku(t,this),this.finished=!0;const{buffer:e,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;e[o++]=128,Zn(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let A=o;A<s;A++)e[A]=0;dh(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=lo(t),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const p=u/4,m=this.get();if(p>m.length)throw new Error("_sha2: outputLen bigger than state");for(let A=0;A<p;A++)a.setUint32(4*A,m[A],i)}digest(){const{buffer:t,outputLen:e}=this;this.digestInto(t);const n=t.slice(0,e);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:e,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return t.destroyed=o,t.finished=i,t.length=s,t.pos=a,s%e&&t.buffer.set(n),t}clone(){return this._cloneInto()}}const On=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ce=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ci=BigInt(2**32-1),Ac=BigInt(32);function yh(r,t=!1){return t?{h:Number(r&Ci),l:Number(r>>Ac&Ci)}:{h:Number(r>>Ac&Ci)|0,l:Number(r&Ci)|0}}function _u(r,t=!1){const e=r.length;let n=new Uint32Array(e),s=new Uint32Array(e);for(let i=0;i<e;i++){const{h:o,l:a}=yh(r[i],t);[n[i],s[i]]=[o,a]}return[n,s]}const _c=(r,t,e)=>r>>>e,Ic=(r,t,e)=>r<<32-e|t>>>e,Sr=(r,t,e)=>r>>>e|t<<32-e,kr=(r,t,e)=>r<<32-e|t>>>e,Pi=(r,t,e)=>r<<64-e|t>>>e-32,Li=(r,t,e)=>r>>>e-32|t<<64-e,mh=(r,t,e)=>r<<e|t>>>32-e,wh=(r,t,e)=>t<<e|r>>>32-e,bh=(r,t,e)=>t<<e-32|r>>>64-e,vh=(r,t,e)=>r<<e-32|t>>>64-e;function An(r,t,e,n){const s=(t>>>0)+(n>>>0);return{h:r+e+(s/2**32|0)|0,l:s|0}}const Sh=(r,t,e)=>(r>>>0)+(t>>>0)+(e>>>0),kh=(r,t,e,n)=>t+e+n+(r/2**32|0)|0,Eh=(r,t,e,n)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0),Ah=(r,t,e,n,s)=>t+e+n+s+(r/2**32|0)|0,_h=(r,t,e,n,s)=>(r>>>0)+(t>>>0)+(e>>>0)+(n>>>0)+(s>>>0),Ih=(r,t,e,n,s,i)=>t+e+n+s+i+(r/2**32|0)|0,xh=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Un=new Uint32Array(64);class Bh extends Au{constructor(t=32){super(64,t,8,!1),this.A=On[0]|0,this.B=On[1]|0,this.C=On[2]|0,this.D=On[3]|0,this.E=On[4]|0,this.F=On[5]|0,this.G=On[6]|0,this.H=On[7]|0}get(){const{A:t,B:e,C:n,D:s,E:i,F:o,G:a,H:u}=this;return[t,e,n,s,i,o,a,u]}set(t,e,n,s,i,o,a,u){this.A=t|0,this.B=e|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=u|0}process(t,e){for(let A=0;A<16;A++,e+=4)Un[A]=t.getUint32(e,!1);for(let A=16;A<64;A++){const S=Un[A-15],g=Un[A-2],E=un(S,7)^un(S,18)^S>>>3,R=un(g,17)^un(g,19)^g>>>10;Un[A]=R+Un[A-7]+E+Un[A-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:u,G:p,H:m}=this;for(let A=0;A<64;A++){const S=un(a,6)^un(a,11)^un(a,25),g=m+S+ph(a,u,p)+xh[A]+Un[A]|0,R=(un(n,2)^un(n,13)^un(n,22))+gh(n,s,i)|0;m=p,p=u,u=a,a=o+g|0,o=i,i=s,s=n,n=g+R|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,p=p+this.G|0,m=m+this.H|0,this.set(n,s,i,o,a,u,p,m)}roundClean(){Zn(Un)}destroy(){this.set(0,0,0,0,0,0,0,0),Zn(this.buffer)}}const Iu=_u(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))),Rh=Iu[0],Mh=Iu[1],Wn=new Uint32Array(80),Fn=new Uint32Array(80);class Th extends Au{constructor(t=64){super(128,t,16,!1),this.Ah=Ce[0]|0,this.Al=Ce[1]|0,this.Bh=Ce[2]|0,this.Bl=Ce[3]|0,this.Ch=Ce[4]|0,this.Cl=Ce[5]|0,this.Dh=Ce[6]|0,this.Dl=Ce[7]|0,this.Eh=Ce[8]|0,this.El=Ce[9]|0,this.Fh=Ce[10]|0,this.Fl=Ce[11]|0,this.Gh=Ce[12]|0,this.Gl=Ce[13]|0,this.Hh=Ce[14]|0,this.Hl=Ce[15]|0}get(){const{Ah:t,Al:e,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:u,Eh:p,El:m,Fh:A,Fl:S,Gh:g,Gl:E,Hh:R,Hl:T}=this;return[t,e,n,s,i,o,a,u,p,m,A,S,g,E,R,T]}set(t,e,n,s,i,o,a,u,p,m,A,S,g,E,R,T){this.Ah=t|0,this.Al=e|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=u|0,this.Eh=p|0,this.El=m|0,this.Fh=A|0,this.Fl=S|0,this.Gh=g|0,this.Gl=E|0,this.Hh=R|0,this.Hl=T|0}process(t,e){for(let P=0;P<16;P++,e+=4)Wn[P]=t.getUint32(e),Fn[P]=t.getUint32(e+=4);for(let P=16;P<80;P++){const W=Wn[P-15]|0,K=Fn[P-15]|0,$=Sr(W,K,1)^Sr(W,K,8)^_c(W,K,7),V=kr(W,K,1)^kr(W,K,8)^Ic(W,K,7),j=Wn[P-2]|0,D=Fn[P-2]|0,Z=Sr(j,D,19)^Pi(j,D,61)^_c(j,D,6),X=kr(j,D,19)^Li(j,D,61)^Ic(j,D,6),J=Eh(V,X,Fn[P-7],Fn[P-16]),b=Ah(J,$,Z,Wn[P-7],Wn[P-16]);Wn[P]=b|0,Fn[P]=J|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:u,Dh:p,Dl:m,Eh:A,El:S,Fh:g,Fl:E,Gh:R,Gl:T,Hh:M,Hl:N}=this;for(let P=0;P<80;P++){const W=Sr(A,S,14)^Sr(A,S,18)^Pi(A,S,41),K=kr(A,S,14)^kr(A,S,18)^Li(A,S,41),$=A&g^~A&R,V=S&E^~S&T,j=_h(N,K,V,Mh[P],Fn[P]),D=Ih(j,M,W,$,Rh[P],Wn[P]),Z=j|0,X=Sr(n,s,28)^Pi(n,s,34)^Pi(n,s,39),J=kr(n,s,28)^Li(n,s,34)^Li(n,s,39),b=n&i^n&a^i&a,c=s&o^s&u^o&u;M=R|0,N=T|0,R=g|0,T=E|0,g=A|0,E=S|0,{h:A,l:S}=An(p|0,m|0,D|0,Z|0),p=a|0,m=u|0,a=i|0,u=o|0,i=n|0,o=s|0;const h=Sh(Z,J,c);n=kh(h,D,X,b),s=h|0}({h:n,l:s}=An(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=An(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:u}=An(this.Ch|0,this.Cl|0,a|0,u|0),{h:p,l:m}=An(this.Dh|0,this.Dl|0,p|0,m|0),{h:A,l:S}=An(this.Eh|0,this.El|0,A|0,S|0),{h:g,l:E}=An(this.Fh|0,this.Fl|0,g|0,E|0),{h:R,l:T}=An(this.Gh|0,this.Gl|0,R|0,T|0),{h:M,l:N}=An(this.Hh|0,this.Hl|0,M|0,N|0),this.set(n,s,i,o,a,u,p,m,A,S,g,E,R,T,M,N)}roundClean(){Zn(Wn,Fn)}destroy(){Zn(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const xu=_a(()=>new Bh),Ch=_a(()=>new Th);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const xa=BigInt(0),Ko=BigInt(1);function lr(r,t=""){if(typeof r!="boolean"){const e=t&&`"${t}"`;throw new Error(e+"expected boolean, got type="+typeof r)}return r}function rn(r,t,e=""){const n=ki(r),s=r==null?void 0:r.length,i=t!==void 0;if(!n||i&&s!==t){const o=e&&`"${e}" `,a=i?` of length ${t}`:"",u=n?`length=${s}`:`type=${typeof r}`;throw new Error(o+"expected Uint8Array"+a+", got "+u)}return r}function Ni(r){const t=r.toString(16);return t.length&1?"0"+t:t}function Bu(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?xa:BigInt("0x"+r)}function As(r){return Bu(ur(r))}function pi(r){return Pn(r),Bu(ur(Uint8Array.from(r).reverse()))}function Ba(r,t){return is(r.toString(16).padStart(t*2,"0"))}function Ru(r,t){return Ba(r,t).reverse()}function te(r,t,e){let n;if(typeof t=="string")try{n=is(t)}catch(i){throw new Error(r+" must be hex string or Uint8Array, cause: "+i)}else if(ki(t))n=Uint8Array.from(t);else throw new Error(r+" must be hex string or Uint8Array");const s=n.length;if(typeof e=="number"&&s!==e)throw new Error(r+" of length "+e+" expected, got "+s);return n}function xc(r){return Uint8Array.from(r)}const fo=r=>typeof r=="bigint"&&xa<=r;function Ph(r,t,e){return fo(r)&&fo(t)&&fo(e)&&t<=r&&r<e}function $o(r,t,e,n){if(!Ph(t,e,n))throw new Error("expected valid "+r+": "+e+" <= n < "+n+", got "+t)}function Mu(r){let t;for(t=0;r>xa;r>>=Ko,t+=1);return t}const Ei=r=>(Ko<<BigInt(r))-Ko;function Lh(r,t,e){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");const n=g=>new Uint8Array(g),s=g=>Uint8Array.of(g);let i=n(r),o=n(r),a=0;const u=()=>{i.fill(1),o.fill(0),a=0},p=(...g)=>e(o,i,...g),m=(g=n(0))=>{o=p(s(0),g),i=p(),g.length!==0&&(o=p(s(1),g),i=p())},A=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0;const E=[];for(;g<t;){i=p();const R=i.slice();E.push(R),g+=i.length}return hn(...E)};return(g,E)=>{u(),m(g);let R;for(;!(R=E(A()));)m();return u(),R}}function Ai(r,t,e={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,i,o){const a=r[s];if(o&&a===void 0)return;const u=typeof a;if(u!==i||a===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${u}`)}Object.entries(t).forEach(([s,i])=>n(s,i,!1)),Object.entries(e).forEach(([s,i])=>n(s,i,!0))}function ss(r){const t=new WeakMap;return(e,...n)=>{const s=t.get(e);if(s!==void 0)return s;const i=r(e,...n);return t.set(e,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qe=BigInt(0),Te=BigInt(1),rr=BigInt(2),Tu=BigInt(3),Cu=BigInt(4),Pu=BigInt(5),Nh=BigInt(7),Lu=BigInt(8),Oh=BigInt(9),Nu=BigInt(16);function ve(r,t){const e=r%t;return e>=qe?e:t+e}function Qt(r,t,e){let n=r;for(;t-- >qe;)n*=n,n%=e;return n}function Bc(r,t){if(r===qe)throw new Error("invert: expected non-zero number");if(t<=qe)throw new Error("invert: expected positive modulus, got "+t);let e=ve(r,t),n=t,s=qe,i=Te;for(;e!==qe;){const a=n/e,u=n%e,p=s-i*a;n=e,e=u,s=i,i=p}if(n!==Te)throw new Error("invert: does not exist");return ve(s,t)}function Ra(r,t,e){if(!r.eql(r.sqr(t),e))throw new Error("Cannot find square root")}function Ou(r,t){const e=(r.ORDER+Te)/Cu,n=r.pow(t,e);return Ra(r,n,t),n}function Uh(r,t){const e=(r.ORDER-Pu)/Lu,n=r.mul(t,rr),s=r.pow(n,e),i=r.mul(t,s),o=r.mul(r.mul(i,rr),s),a=r.mul(i,r.sub(o,r.ONE));return Ra(r,a,t),a}function Wh(r){const t=dr(r),e=Uu(r),n=e(t,t.neg(t.ONE)),s=e(t,n),i=e(t,t.neg(n)),o=(r+Nh)/Nu;return(a,u)=>{let p=a.pow(u,o),m=a.mul(p,n);const A=a.mul(p,s),S=a.mul(p,i),g=a.eql(a.sqr(m),u),E=a.eql(a.sqr(A),u);p=a.cmov(p,m,g),m=a.cmov(S,A,E);const R=a.eql(a.sqr(m),u),T=a.cmov(p,m,R);return Ra(a,T,u),T}}function Uu(r){if(r<Tu)throw new Error("sqrt is not defined for small field");let t=r-Te,e=0;for(;t%rr===qe;)t/=rr,e++;let n=rr;const s=dr(r);for(;Rc(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(e===1)return Ou;let i=s.pow(n,t);const o=(t+Te)/rr;return function(u,p){if(u.is0(p))return p;if(Rc(u,p)!==1)throw new Error("Cannot find square root");let m=e,A=u.mul(u.ONE,i),S=u.pow(p,t),g=u.pow(p,o);for(;!u.eql(S,u.ONE);){if(u.is0(S))return u.ZERO;let E=1,R=u.sqr(S);for(;!u.eql(R,u.ONE);)if(E++,R=u.sqr(R),E===m)throw new Error("Cannot find square root");const T=Te<<BigInt(m-E-1),M=u.pow(A,T);m=E,A=u.sqr(M),S=u.mul(S,A),g=u.mul(g,M)}return g}}function Fh(r){return r%Cu===Tu?Ou:r%Lu===Pu?Uh:r%Nu===Oh?Wh(r):Uu(r)}const zh=(r,t)=>(ve(r,t)&Te)===Te,Dh=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Kh(r){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},e=Dh.reduce((n,s)=>(n[s]="function",n),t);return Ai(r,e),r}function $h(r,t,e){if(e<qe)throw new Error("invalid exponent, negatives unsupported");if(e===qe)return r.ONE;if(e===Te)return t;let n=r.ONE,s=t;for(;e>qe;)e&Te&&(n=r.mul(n,s)),s=r.sqr(s),e>>=Te;return n}function Wu(r,t,e=!1){const n=new Array(t.length).fill(e?r.ZERO:void 0),s=t.reduce((o,a,u)=>r.is0(a)?o:(n[u]=o,r.mul(o,a)),r.ONE),i=r.inv(s);return t.reduceRight((o,a,u)=>r.is0(a)?o:(n[u]=r.mul(o,n[u]),r.mul(o,a)),i),n}function Rc(r,t){const e=(r.ORDER-Te)/rr,n=r.pow(t,e),s=r.eql(n,r.ONE),i=r.eql(n,r.ZERO),o=r.eql(n,r.neg(r.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Fu(r,t){t!==void 0&&di(t);const e=t!==void 0?t:r.toString(2).length,n=Math.ceil(e/8);return{nBitLength:e,nByteLength:n}}function dr(r,t,e=!1,n={}){if(r<=qe)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,i,o=!1,a;if(typeof t=="object"&&t!=null){if(n.sqrt||e)throw new Error("cannot specify opts in two arguments");const S=t;S.BITS&&(s=S.BITS),S.sqrt&&(i=S.sqrt),typeof S.isLE=="boolean"&&(e=S.isLE),typeof S.modFromBytes=="boolean"&&(o=S.modFromBytes),a=S.allowedLengths}else typeof t=="number"&&(s=t),n.sqrt&&(i=n.sqrt);const{nBitLength:u,nByteLength:p}=Fu(r,s);if(p>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let m;const A=Object.freeze({ORDER:r,isLE:e,BITS:u,BYTES:p,MASK:Ei(u),ZERO:qe,ONE:Te,allowedLengths:a,create:S=>ve(S,r),isValid:S=>{if(typeof S!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof S);return qe<=S&&S<r},is0:S=>S===qe,isValidNot0:S=>!A.is0(S)&&A.isValid(S),isOdd:S=>(S&Te)===Te,neg:S=>ve(-S,r),eql:(S,g)=>S===g,sqr:S=>ve(S*S,r),add:(S,g)=>ve(S+g,r),sub:(S,g)=>ve(S-g,r),mul:(S,g)=>ve(S*g,r),pow:(S,g)=>$h(A,S,g),div:(S,g)=>ve(S*Bc(g,r),r),sqrN:S=>S*S,addN:(S,g)=>S+g,subN:(S,g)=>S-g,mulN:(S,g)=>S*g,inv:S=>Bc(S,r),sqrt:i||(S=>(m||(m=Fh(r)),m(A,S))),toBytes:S=>e?Ru(S,p):Ba(S,p),fromBytes:(S,g=!0)=>{if(a){if(!a.includes(S.length)||S.length>p)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+S.length);const R=new Uint8Array(p);R.set(S,e?0:R.length-S.length),S=R}if(S.length!==p)throw new Error("Field.fromBytes: expected "+p+" bytes, got "+S.length);let E=e?pi(S):As(S);if(o&&(E=ve(E,r)),!g&&!A.isValid(E))throw new Error("invalid field element: outside of range 0..ORDER");return E},invertBatch:S=>Wu(A,S),cmov:(S,g,E)=>E?g:S});return Object.freeze(A)}function zu(r){if(typeof r!="bigint")throw new Error("field order must be bigint");const t=r.toString(2).length;return Math.ceil(t/8)}function Du(r){const t=zu(r);return t+Math.ceil(t/2)}function qh(r,t,e=!1){const n=r.length,s=zu(t),i=Du(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=e?pi(r):As(r),a=ve(o,t-Te)+Te;return e?Ru(a,s):Ba(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zr=BigInt(0),ir=BigInt(1);function os(r,t){const e=t.negate();return r?e:t}function sr(r,t){const e=Wu(r.Fp,t.map(n=>n.Z));return t.map((n,s)=>r.fromAffine(n.toAffine(e[s])))}function Ku(r,t){if(!Number.isSafeInteger(r)||r<=0||r>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+r)}function ho(r,t){Ku(r,t);const e=Math.ceil(t/r)+1,n=2**(r-1),s=2**r,i=Ei(r),o=BigInt(r);return{windows:e,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Mc(r,t,e){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=e;let a=Number(r&s),u=r>>o;a>n&&(a-=i,u+=ir);const p=t*n,m=p+Math.abs(a)-1,A=a===0,S=a<0,g=t%2!==0;return{nextN:u,offset:m,isZero:A,isNeg:S,isNegF:g,offsetF:p}}function Vh(r,t){if(!Array.isArray(r))throw new Error("array expected");r.forEach((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)})}function jh(r,t){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)})}const po=new WeakMap,$u=new WeakMap;function go(r){return $u.get(r)||1}function Tc(r){if(r!==zr)throw new Error("invalid wNAF")}class qu{constructor(t,e){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=e}_unsafeLadder(t,e,n=this.ZERO){let s=t;for(;e>zr;)e&ir&&(n=n.add(s)),s=s.double(),e>>=ir;return n}precomputeWindow(t,e){const{windows:n,windowSize:s}=ho(e,this.bits),i=[];let o=t,a=o;for(let u=0;u<n;u++){a=o,i.push(a);for(let p=1;p<s;p++)a=a.add(o),i.push(a);o=a.double()}return i}wNAF(t,e,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=ho(t,this.bits);for(let a=0;a<o.windows;a++){const{nextN:u,offset:p,isZero:m,isNeg:A,isNegF:S,offsetF:g}=Mc(n,a,o);n=u,m?i=i.add(os(S,e[g])):s=s.add(os(A,e[p]))}return Tc(n),{p:s,f:i}}wNAFUnsafe(t,e,n,s=this.ZERO){const i=ho(t,this.bits);for(let o=0;o<i.windows&&n!==zr;o++){const{nextN:a,offset:u,isZero:p,isNeg:m}=Mc(n,o,i);if(n=a,!p){const A=e[u];s=s.add(m?A.negate():A)}}return Tc(n),s}getPrecomputes(t,e,n){let s=po.get(e);return s||(s=this.precomputeWindow(e,t),t!==1&&(typeof n=="function"&&(s=n(s)),po.set(e,s))),s}cached(t,e,n){const s=go(t);return this.wNAF(s,this.getPrecomputes(s,t,n),e)}unsafe(t,e,n,s){const i=go(t);return i===1?this._unsafeLadder(t,e,s):this.wNAFUnsafe(i,this.getPrecomputes(i,t,n),e,s)}createCache(t,e){Ku(e,this.bits),$u.set(t,e),po.delete(t)}hasCache(t){return go(t)!==1}}function Hh(r,t,e,n){let s=t,i=r.ZERO,o=r.ZERO;for(;e>zr||n>zr;)e&ir&&(i=i.add(s)),n&ir&&(o=o.add(s)),s=s.double(),e>>=ir,n>>=ir;return{p1:i,p2:o}}function Vu(r,t,e,n){Vh(e,r),jh(n,t);const s=e.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=r.ZERO,a=Mu(BigInt(s));let u=1;a>12?u=a-3:a>4?u=a-2:a>0&&(u=2);const p=Ei(u),m=new Array(Number(p)+1).fill(o),A=Math.floor((t.BITS-1)/u)*u;let S=o;for(let g=A;g>=0;g-=u){m.fill(o);for(let R=0;R<i;R++){const T=n[R],M=Number(T>>BigInt(g)&p);m[M]=m[M].add(e[R])}let E=o;for(let R=m.length-1,T=o;R>0;R--)T=T.add(m[R]),E=E.add(T);if(S=S.add(E),g!==0)for(let R=0;R<u;R++)S=S.double()}return S}function Cc(r,t,e){if(t){if(t.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Kh(t),t}else return dr(r,{isLE:e})}function ju(r,t,e={},n){if(n===void 0&&(n=r==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${r} CURVE object`);for(const u of["p","n","h"]){const p=t[u];if(!(typeof p=="bigint"&&p>zr))throw new Error(`CURVE.${u} must be positive bigint`)}const s=Cc(t.p,e.Fp,n),i=Cc(t.n,e.Fn,n),a=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(const u of a)if(!s.isValid(t[u]))throw new Error(`CURVE.${u} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zn=BigInt(0),Ee=BigInt(1),yo=BigInt(2),Gh=BigInt(8);function Yh(r,t,e,n){const s=r.sqr(e),i=r.sqr(n),o=r.add(r.mul(t.a,s),i),a=r.add(r.ONE,r.mul(t.d,r.mul(s,i)));return r.eql(o,a)}function Zh(r,t={}){const e=ju("edwards",r,t,t.FpFnLE),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o}=i;Ai(t,{},{uvRatio:"function"});const a=yo<<BigInt(s.BYTES*8)-Ee,u=T=>n.create(T),p=t.uvRatio||((T,M)=>{try{return{isValid:!0,value:n.sqrt(n.div(T,M))}}catch{return{isValid:!1,value:zn}}});if(!Yh(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function m(T,M,N=!1){const P=N?Ee:zn;return $o("coordinate "+T,M,P,a),M}function A(T){if(!(T instanceof E))throw new Error("ExtendedPoint expected")}const S=ss((T,M)=>{const{X:N,Y:P,Z:W}=T,K=T.is0();M==null&&(M=K?Gh:n.inv(W));const $=u(N*M),V=u(P*M),j=n.mul(W,M);if(K)return{x:zn,y:Ee};if(j!==Ee)throw new Error("invZ was invalid");return{x:$,y:V}}),g=ss(T=>{const{a:M,d:N}=i;if(T.is0())throw new Error("bad point: ZERO");const{X:P,Y:W,Z:K,T:$}=T,V=u(P*P),j=u(W*W),D=u(K*K),Z=u(D*D),X=u(V*M),J=u(D*u(X+j)),b=u(Z+u(N*u(V*j)));if(J!==b)throw new Error("bad point: equation left != right (1)");const c=u(P*W),h=u(K*$);if(c!==h)throw new Error("bad point: equation left != right (2)");return!0});class E{constructor(M,N,P,W){this.X=m("x",M),this.Y=m("y",N),this.Z=m("z",P,!0),this.T=m("t",W),Object.freeze(this)}static CURVE(){return i}static fromAffine(M){if(M instanceof E)throw new Error("extended point not allowed");const{x:N,y:P}=M||{};return m("x",N),m("y",P),new E(N,P,Ee,u(N*P))}static fromBytes(M,N=!1){const P=n.BYTES,{a:W,d:K}=i;M=xc(rn(M,P,"point")),lr(N,"zip215");const $=xc(M),V=M[P-1];$[P-1]=V&-129;const j=pi($),D=N?a:n.ORDER;$o("point.y",j,zn,D);const Z=u(j*j),X=u(Z-Ee),J=u(K*Z-W);let{isValid:b,value:c}=p(X,J);if(!b)throw new Error("bad point: invalid y coordinate");const h=(c&Ee)===Ee,y=(V&128)!==0;if(!N&&c===zn&&y)throw new Error("bad point: x=0 and x_0=1");return y!==h&&(c=u(-c)),E.fromAffine({x:c,y:j})}static fromHex(M,N=!1){return E.fromBytes(te("point",M),N)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(M=8,N=!0){return R.createCache(this,M),N||this.multiply(yo),this}assertValidity(){g(this)}equals(M){A(M);const{X:N,Y:P,Z:W}=this,{X:K,Y:$,Z:V}=M,j=u(N*V),D=u(K*W),Z=u(P*V),X=u($*W);return j===D&&Z===X}is0(){return this.equals(E.ZERO)}negate(){return new E(u(-this.X),this.Y,this.Z,u(-this.T))}double(){const{a:M}=i,{X:N,Y:P,Z:W}=this,K=u(N*N),$=u(P*P),V=u(yo*u(W*W)),j=u(M*K),D=N+P,Z=u(u(D*D)-K-$),X=j+$,J=X-V,b=j-$,c=u(Z*J),h=u(X*b),y=u(Z*b),k=u(J*X);return new E(c,h,k,y)}add(M){A(M);const{a:N,d:P}=i,{X:W,Y:K,Z:$,T:V}=this,{X:j,Y:D,Z,T:X}=M,J=u(W*j),b=u(K*D),c=u(V*P*X),h=u($*Z),y=u((W+K)*(j+D)-J-b),k=h-c,I=h+c,B=u(b-N*J),C=u(y*k),v=u(I*B),f=u(y*B),x=u(k*I);return new E(C,v,x,f)}subtract(M){return this.add(M.negate())}multiply(M){if(!s.isValidNot0(M))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:N,f:P}=R.cached(this,M,W=>sr(E,W));return sr(E,[N,P])[0]}multiplyUnsafe(M,N=E.ZERO){if(!s.isValid(M))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return M===zn?E.ZERO:this.is0()||M===Ee?this:R.unsafe(this,M,P=>sr(E,P),N)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return R.unsafe(this,i.n).is0()}toAffine(M){return S(this,M)}clearCofactor(){return o===Ee?this:this.multiplyUnsafe(o)}toBytes(){const{x:M,y:N}=this.toAffine(),P=n.toBytes(N);return P[P.length-1]|=M&Ee?128:0,P}toHex(){return ur(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(M){return sr(E,M)}static msm(M,N){return Vu(E,s,M,N)}_setWindowSize(M){this.precompute(M)}toRawBytes(){return this.toBytes()}}E.BASE=new E(i.Gx,i.Gy,Ee,u(i.Gx*i.Gy)),E.ZERO=new E(zn,Ee,Ee,zn),E.Fp=n,E.Fn=s;const R=new qu(E,s.BITS);return E.BASE.precompute(8),E}function Jh(r,t,e={}){if(typeof t!="function")throw new Error('"hash" function param is required');Ai(e,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=e,{BASE:s,Fp:i,Fn:o}=r,a=e.randomBytes||Ia,u=e.adjustScalarBytes||(D=>D),p=e.domain||((D,Z,X)=>{if(lr(X,"phflag"),Z.length||X)throw new Error("Contexts/pre-hash are not supported");return D});function m(D){return o.create(pi(D))}function A(D){const Z=P.secretKey;D=te("private key",D,Z);const X=te("hashed private key",t(D),2*Z),J=u(X.slice(0,Z)),b=X.slice(Z,2*Z),c=m(J);return{head:J,prefix:b,scalar:c}}function S(D){const{head:Z,prefix:X,scalar:J}=A(D),b=s.multiply(J),c=b.toBytes();return{head:Z,prefix:X,scalar:J,point:b,pointBytes:c}}function g(D){return S(D).pointBytes}function E(D=Uint8Array.of(),...Z){const X=hn(...Z);return m(t(p(X,te("context",D),!!n)))}function R(D,Z,X={}){D=te("message",D),n&&(D=n(D));const{prefix:J,scalar:b,pointBytes:c}=S(Z),h=E(X.context,J,D),y=s.multiply(h).toBytes(),k=E(X.context,y,c,D),I=o.create(h+k*b);if(!o.isValid(I))throw new Error("sign failed: invalid s");const B=hn(y,o.toBytes(I));return rn(B,P.signature,"result")}const T={zip215:!0};function M(D,Z,X,J=T){const{context:b,zip215:c}=J,h=P.signature;D=te("signature",D,h),Z=te("message",Z),X=te("publicKey",X,P.publicKey),c!==void 0&&lr(c,"zip215"),n&&(Z=n(Z));const y=h/2,k=D.subarray(0,y),I=pi(D.subarray(y,h));let B,C,v;try{B=r.fromBytes(X,c),C=r.fromBytes(k,c),v=s.multiplyUnsafe(I)}catch{return!1}if(!c&&B.isSmallOrder())return!1;const f=E(b,C.toBytes(),B.toBytes(),Z);return C.add(B.multiplyUnsafe(f)).subtract(v).clearCofactor().is0()}const N=i.BYTES,P={secretKey:N,publicKey:N,signature:2*N,seed:N};function W(D=a(P.seed)){return rn(D,P.seed,"seed")}function K(D){const Z=j.randomSecretKey(D);return{secretKey:Z,publicKey:g(Z)}}function $(D){return ki(D)&&D.length===o.BYTES}function V(D,Z){try{return!!r.fromBytes(D,Z)}catch{return!1}}const j={getExtendedPublicKey:S,randomSecretKey:W,isValidSecretKey:$,isValidPublicKey:V,toMontgomery(D){const{y:Z}=r.fromBytes(D),X=P.publicKey,J=X===32;if(!J&&X!==57)throw new Error("only defined for 25519 and 448");const b=J?i.div(Ee+Z,Ee-Z):i.div(Z-Ee,Z+Ee);return i.toBytes(b)},toMontgomerySecret(D){const Z=P.secretKey;rn(D,Z);const X=t(D.subarray(0,Z));return u(X).subarray(0,Z)},randomPrivateKey:W,precompute(D=8,Z=r.BASE){return Z.precompute(D,!1)}};return Object.freeze({keygen:K,getPublicKey:g,sign:R,verify:M,utils:j,Point:r,lengths:P})}function Xh(r){const t={a:r.a,d:r.d,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp,n=dr(t.n,r.nBitLength,!0),s={Fp:e,Fn:n,uvRatio:r.uvRatio},i={randomBytes:r.randomBytes,adjustScalarBytes:r.adjustScalarBytes,domain:r.domain,prehash:r.prehash,mapToCurve:r.mapToCurve};return{CURVE:t,curveOpts:s,hash:r.hash,eddsaOpts:i}}function Qh(r,t){const e=t.Point;return Object.assign({},t,{ExtendedPoint:e,CURVE:r,nBitLength:e.Fn.BITS,nByteLength:e.Fn.BYTES})}function td(r){const{CURVE:t,curveOpts:e,hash:n,eddsaOpts:s}=Xh(r),i=Zh(t,e),o=Jh(i,n,s);return Qh(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ed=BigInt(1),Pc=BigInt(2);BigInt(3);const nd=BigInt(5),rd=BigInt(8),Ma=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),Hu={p:Ma,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:rd,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function id(r){const t=BigInt(10),e=BigInt(20),n=BigInt(40),s=BigInt(80),i=Ma,a=r*r%i*r%i,u=Qt(a,Pc,i)*a%i,p=Qt(u,ed,i)*r%i,m=Qt(p,nd,i)*p%i,A=Qt(m,t,i)*m%i,S=Qt(A,e,i)*A%i,g=Qt(S,n,i)*S%i,E=Qt(g,s,i)*g%i,R=Qt(E,s,i)*g%i,T=Qt(R,t,i)*m%i;return{pow_p_5_8:Qt(T,Pc,i)*r%i,b2:a}}function sd(r){return r[0]&=248,r[31]&=127,r[31]|=64,r}const Lc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function od(r,t){const e=Ma,n=ve(t*t*t,e),s=ve(n*n*t,e),i=id(r*s).pow_p_5_8;let o=ve(r*n*i,e);const a=ve(t*o*o,e),u=o,p=ve(o*Lc,e),m=a===r,A=a===ve(-r,e),S=a===ve(-r*Lc,e);return m&&(o=u),(A||S)&&(o=p),zh(o,e)&&(o=ve(-o,e)),{isValid:m||A,value:o}}const ad=dr(Hu.p,{isLE:!0}),cd={...Hu,Fp:ad,hash:Ch,adjustScalarBytes:sd,uvRatio:od},Gr=td(cd);var Ta={exports:{}};const ud={},ld=Object.freeze(Object.defineProperty({__proto__:null,default:ud},Symbol.toStringTag,{value:"Module"})),fd=ka(ld);Ta.exports;(function(r){(function(t,e){function n(b,c){if(!b)throw new Error(c||"Assertion failed")}function s(b,c){b.super_=c;var h=function(){};h.prototype=c.prototype,b.prototype=new h,b.prototype.constructor=b}function i(b,c,h){if(i.isBN(b))return b;this.negative=0,this.words=null,this.length=0,this.red=null,b!==null&&((c==="le"||c==="be")&&(h=c,c=10),this._init(b||0,c||10,h||"be"))}typeof t=="object"?t.exports=i:e.BN=i,i.BN=i,i.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=fd.Buffer}catch{}i.isBN=function(c){return c instanceof i?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===i.wordSize&&Array.isArray(c.words)},i.max=function(c,h){return c.cmp(h)>0?c:h},i.min=function(c,h){return c.cmp(h)<0?c:h},i.prototype._init=function(c,h,y){if(typeof c=="number")return this._initNumber(c,h,y);if(typeof c=="object")return this._initArray(c,h,y);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var k=0;c[0]==="-"&&(k++,this.negative=1),k<c.length&&(h===16?this._parseHex(c,k,y):(this._parseBase(c,h,k),y==="le"&&this._initArray(this.toArray(),h,y)))},i.prototype._initNumber=function(c,h,y){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),h,y)},i.prototype._initArray=function(c,h,y){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var I,B,C=0;if(y==="be")for(k=c.length-1,I=0;k>=0;k-=3)B=c[k]|c[k-1]<<8|c[k-2]<<16,this.words[I]|=B<<C&67108863,this.words[I+1]=B>>>26-C&67108863,C+=24,C>=26&&(C-=26,I++);else if(y==="le")for(k=0,I=0;k<c.length;k+=3)B=c[k]|c[k+1]<<8|c[k+2]<<16,this.words[I]|=B<<C&67108863,this.words[I+1]=B>>>26-C&67108863,C+=24,C>=26&&(C-=26,I++);return this._strip()};function a(b,c){var h=b.charCodeAt(c);if(h>=48&&h<=57)return h-48;if(h>=65&&h<=70)return h-55;if(h>=97&&h<=102)return h-87;n(!1,"Invalid character in "+b)}function u(b,c,h){var y=a(b,h);return h-1>=c&&(y|=a(b,h-1)<<4),y}i.prototype._parseHex=function(c,h,y){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var k=0;k<this.length;k++)this.words[k]=0;var I=0,B=0,C;if(y==="be")for(k=c.length-1;k>=h;k-=2)C=u(c,h,k)<<I,this.words[B]|=C&67108863,I>=18?(I-=18,B+=1,this.words[B]|=C>>>26):I+=8;else{var v=c.length-h;for(k=v%2===0?h+1:h;k<c.length;k+=2)C=u(c,h,k)<<I,this.words[B]|=C&67108863,I>=18?(I-=18,B+=1,this.words[B]|=C>>>26):I+=8}this._strip()};function p(b,c,h,y){for(var k=0,I=0,B=Math.min(b.length,h),C=c;C<B;C++){var v=b.charCodeAt(C)-48;k*=y,v>=49?I=v-49+10:v>=17?I=v-17+10:I=v,n(v>=0&&I<y,"Invalid character"),k+=I}return k}i.prototype._parseBase=function(c,h,y){this.words=[0],this.length=1;for(var k=0,I=1;I<=67108863;I*=h)k++;k--,I=I/h|0;for(var B=c.length-y,C=B%k,v=Math.min(B,B-C)+y,f=0,x=y;x<v;x+=k)f=p(c,x,x+k,h),this.imuln(I),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(C!==0){var et=1;for(f=p(c,x,c.length,h),x=0;x<C;x++)et*=h;this.imuln(et),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},i.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function m(b,c){b.words=c.words,b.length=c.length,b.negative=c.negative,b.red=c.red}if(i.prototype._move=function(c){m(c,this)},i.prototype.clone=function(){var c=new i(null);return this.copy(c),c},i.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},i.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},i.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{i.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{i.prototype.inspect=A}else i.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],g=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],E=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(c,h){c=c||10,h=h|0||1;var y;if(c===16||c==="hex"){y="";for(var k=0,I=0,B=0;B<this.length;B++){var C=this.words[B],v=((C<<k|I)&16777215).toString(16);I=C>>>24-k&16777215,k+=2,k>=26&&(k-=26,B--),I!==0||B!==this.length-1?y=S[6-v.length]+v+y:y=v+y}for(I!==0&&(y=I.toString(16)+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(c===(c|0)&&c>=2&&c<=36){var f=g[c],x=E[c];y="";var et=this.clone();for(et.negative=0;!et.isZero();){var G=et.modrn(x).toString(c);et=et.idivn(x),et.isZero()?y=G+y:y=S[f-G.length]+G+y}for(this.isZero()&&(y="0"+y);y.length%h!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},i.prototype.toJSON=function(){return this.toString(16,2)},o&&(i.prototype.toBuffer=function(c,h){return this.toArrayLike(o,c,h)}),i.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var R=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};i.prototype.toArrayLike=function(c,h,y){this._strip();var k=this.byteLength(),I=y||Math.max(1,k);n(k<=I,"byte array longer than desired length"),n(I>0,"Requested array length <= 0");var B=R(c,I),C=h==="le"?"LE":"BE";return this["_toArrayLike"+C](B,k),B},i.prototype._toArrayLikeLE=function(c,h){for(var y=0,k=0,I=0,B=0;I<this.length;I++){var C=this.words[I]<<B|k;c[y++]=C&255,y<c.length&&(c[y++]=C>>8&255),y<c.length&&(c[y++]=C>>16&255),B===6?(y<c.length&&(c[y++]=C>>24&255),k=0,B=0):(k=C>>>24,B+=2)}if(y<c.length)for(c[y++]=k;y<c.length;)c[y++]=0},i.prototype._toArrayLikeBE=function(c,h){for(var y=c.length-1,k=0,I=0,B=0;I<this.length;I++){var C=this.words[I]<<B|k;c[y--]=C&255,y>=0&&(c[y--]=C>>8&255),y>=0&&(c[y--]=C>>16&255),B===6?(y>=0&&(c[y--]=C>>24&255),k=0,B=0):(k=C>>>24,B+=2)}if(y>=0)for(c[y--]=k;y>=0;)c[y--]=0},Math.clz32?i.prototype._countBits=function(c){return 32-Math.clz32(c)}:i.prototype._countBits=function(c){var h=c,y=0;return h>=4096&&(y+=13,h>>>=13),h>=64&&(y+=7,h>>>=7),h>=8&&(y+=4,h>>>=4),h>=2&&(y+=2,h>>>=2),y+h},i.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,y=0;return h&8191||(y+=13,h>>>=13),h&127||(y+=7,h>>>=7),h&15||(y+=4,h>>>=4),h&3||(y+=2,h>>>=2),h&1||y++,y},i.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function T(b){for(var c=new Array(b.bitLength()),h=0;h<c.length;h++){var y=h/26|0,k=h%26;c[h]=b.words[y]>>>k&1}return c}i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var y=this._zeroBits(this.words[h]);if(c+=y,y!==26)break}return c},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},i.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return this.negative!==0},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},i.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},i.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},i.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},i.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var y=0;y<h.length;y++)this.words[y]=this.words[y]&c.words[y];return this.length=h.length,this._strip()},i.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},i.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},i.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},i.prototype.iuxor=function(c){var h,y;this.length>c.length?(h=this,y=c):(h=c,y=this);for(var k=0;k<y.length;k++)this.words[k]=h.words[k]^y.words[k];if(this!==h)for(;k<h.length;k++)this.words[k]=h.words[k];return this.length=h.length,this._strip()},i.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},i.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},i.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},i.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,y=c%26;this._expand(h),y>0&&h--;for(var k=0;k<h;k++)this.words[k]=~this.words[k]&67108863;return y>0&&(this.words[k]=~this.words[k]&67108863>>26-y),this._strip()},i.prototype.notn=function(c){return this.clone().inotn(c)},i.prototype.setn=function(c,h){n(typeof c=="number"&&c>=0);var y=c/26|0,k=c%26;return this._expand(y+1),h?this.words[y]=this.words[y]|1<<k:this.words[y]=this.words[y]&~(1<<k),this._strip()},i.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var y,k;this.length>c.length?(y=this,k=c):(y=c,k=this);for(var I=0,B=0;B<k.length;B++)h=(y.words[B]|0)+(k.words[B]|0)+I,this.words[B]=h&67108863,I=h>>>26;for(;I!==0&&B<y.length;B++)h=(y.words[B]|0)+I,this.words[B]=h&67108863,I=h>>>26;if(this.length=y.length,I!==0)this.words[this.length]=I,this.length++;else if(y!==this)for(;B<y.length;B++)this.words[B]=y.words[B];return this},i.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},i.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var y=this.cmp(c);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var k,I;y>0?(k=this,I=c):(k=c,I=this);for(var B=0,C=0;C<I.length;C++)h=(k.words[C]|0)-(I.words[C]|0)+B,B=h>>26,this.words[C]=h&67108863;for(;B!==0&&C<k.length;C++)h=(k.words[C]|0)+B,B=h>>26,this.words[C]=h&67108863;if(B===0&&C<k.length&&k!==this)for(;C<k.length;C++)this.words[C]=k.words[C];return this.length=Math.max(this.length,C),k!==this&&(this.negative=1),this._strip()},i.prototype.sub=function(c){return this.clone().isub(c)};function M(b,c,h){h.negative=c.negative^b.negative;var y=b.length+c.length|0;h.length=y,y=y-1|0;var k=b.words[0]|0,I=c.words[0]|0,B=k*I,C=B&67108863,v=B/67108864|0;h.words[0]=C;for(var f=1;f<y;f++){for(var x=v>>>26,et=v&67108863,G=Math.min(f,c.length-1),it=Math.max(0,f-b.length+1);it<=G;it++){var vt=f-it|0;k=b.words[vt]|0,I=c.words[it]|0,B=k*I+et,x+=B/67108864|0,et=B&67108863}h.words[f]=et|0,v=x|0}return v!==0?h.words[f]=v|0:h.length--,h._strip()}var N=function(c,h,y){var k=c.words,I=h.words,B=y.words,C=0,v,f,x,et=k[0]|0,G=et&8191,it=et>>>13,vt=k[1]|0,pt=vt&8191,ht=vt>>>13,Ht=k[2]|0,Tt=Ht&8191,Pt=Ht>>>13,Je=k[3]|0,Lt=Je&8191,Gt=Je>>>13,Mi=k[4]|0,zt=Mi&8191,Yt=Mi>>>13,Ti=k[5]|0,$t=Ti&8191,Ut=Ti>>>13,Ve=k[6]|0,Dt=Ve&8191,Zt=Ve>>>13,nn=k[7]|0,Jt=nn&8191,w=nn>>>13,l=k[8]|0,d=l&8191,_=l>>>13,L=k[9]|0,O=L&8191,z=L>>>13,mt=I[0]|0,yt=mt&8191,gt=mt>>>13,Wt=I[1]|0,dt=Wt&8191,ne=Wt>>>13,pc=I[2]|0,re=pc&8191,ie=pc>>>13,gc=I[3]|0,se=gc&8191,oe=gc>>>13,yc=I[4]|0,ae=yc&8191,ce=yc>>>13,mc=I[5]|0,ue=mc&8191,le=mc>>>13,wc=I[6]|0,fe=wc&8191,he=wc>>>13,bc=I[7]|0,de=bc&8191,pe=bc>>>13,vc=I[8]|0,ge=vc&8191,ye=vc>>>13,Sc=I[9]|0,me=Sc&8191,we=Sc>>>13;y.negative=c.negative^h.negative,y.length=19,v=Math.imul(G,yt),f=Math.imul(G,gt),f=f+Math.imul(it,yt)|0,x=Math.imul(it,gt);var qs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(qs>>>26)|0,qs&=67108863,v=Math.imul(pt,yt),f=Math.imul(pt,gt),f=f+Math.imul(ht,yt)|0,x=Math.imul(ht,gt),v=v+Math.imul(G,dt)|0,f=f+Math.imul(G,ne)|0,f=f+Math.imul(it,dt)|0,x=x+Math.imul(it,ne)|0;var Vs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Vs>>>26)|0,Vs&=67108863,v=Math.imul(Tt,yt),f=Math.imul(Tt,gt),f=f+Math.imul(Pt,yt)|0,x=Math.imul(Pt,gt),v=v+Math.imul(pt,dt)|0,f=f+Math.imul(pt,ne)|0,f=f+Math.imul(ht,dt)|0,x=x+Math.imul(ht,ne)|0,v=v+Math.imul(G,re)|0,f=f+Math.imul(G,ie)|0,f=f+Math.imul(it,re)|0,x=x+Math.imul(it,ie)|0;var js=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(js>>>26)|0,js&=67108863,v=Math.imul(Lt,yt),f=Math.imul(Lt,gt),f=f+Math.imul(Gt,yt)|0,x=Math.imul(Gt,gt),v=v+Math.imul(Tt,dt)|0,f=f+Math.imul(Tt,ne)|0,f=f+Math.imul(Pt,dt)|0,x=x+Math.imul(Pt,ne)|0,v=v+Math.imul(pt,re)|0,f=f+Math.imul(pt,ie)|0,f=f+Math.imul(ht,re)|0,x=x+Math.imul(ht,ie)|0,v=v+Math.imul(G,se)|0,f=f+Math.imul(G,oe)|0,f=f+Math.imul(it,se)|0,x=x+Math.imul(it,oe)|0;var Hs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Hs>>>26)|0,Hs&=67108863,v=Math.imul(zt,yt),f=Math.imul(zt,gt),f=f+Math.imul(Yt,yt)|0,x=Math.imul(Yt,gt),v=v+Math.imul(Lt,dt)|0,f=f+Math.imul(Lt,ne)|0,f=f+Math.imul(Gt,dt)|0,x=x+Math.imul(Gt,ne)|0,v=v+Math.imul(Tt,re)|0,f=f+Math.imul(Tt,ie)|0,f=f+Math.imul(Pt,re)|0,x=x+Math.imul(Pt,ie)|0,v=v+Math.imul(pt,se)|0,f=f+Math.imul(pt,oe)|0,f=f+Math.imul(ht,se)|0,x=x+Math.imul(ht,oe)|0,v=v+Math.imul(G,ae)|0,f=f+Math.imul(G,ce)|0,f=f+Math.imul(it,ae)|0,x=x+Math.imul(it,ce)|0;var Gs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Gs>>>26)|0,Gs&=67108863,v=Math.imul($t,yt),f=Math.imul($t,gt),f=f+Math.imul(Ut,yt)|0,x=Math.imul(Ut,gt),v=v+Math.imul(zt,dt)|0,f=f+Math.imul(zt,ne)|0,f=f+Math.imul(Yt,dt)|0,x=x+Math.imul(Yt,ne)|0,v=v+Math.imul(Lt,re)|0,f=f+Math.imul(Lt,ie)|0,f=f+Math.imul(Gt,re)|0,x=x+Math.imul(Gt,ie)|0,v=v+Math.imul(Tt,se)|0,f=f+Math.imul(Tt,oe)|0,f=f+Math.imul(Pt,se)|0,x=x+Math.imul(Pt,oe)|0,v=v+Math.imul(pt,ae)|0,f=f+Math.imul(pt,ce)|0,f=f+Math.imul(ht,ae)|0,x=x+Math.imul(ht,ce)|0,v=v+Math.imul(G,ue)|0,f=f+Math.imul(G,le)|0,f=f+Math.imul(it,ue)|0,x=x+Math.imul(it,le)|0;var Ys=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Ys>>>26)|0,Ys&=67108863,v=Math.imul(Dt,yt),f=Math.imul(Dt,gt),f=f+Math.imul(Zt,yt)|0,x=Math.imul(Zt,gt),v=v+Math.imul($t,dt)|0,f=f+Math.imul($t,ne)|0,f=f+Math.imul(Ut,dt)|0,x=x+Math.imul(Ut,ne)|0,v=v+Math.imul(zt,re)|0,f=f+Math.imul(zt,ie)|0,f=f+Math.imul(Yt,re)|0,x=x+Math.imul(Yt,ie)|0,v=v+Math.imul(Lt,se)|0,f=f+Math.imul(Lt,oe)|0,f=f+Math.imul(Gt,se)|0,x=x+Math.imul(Gt,oe)|0,v=v+Math.imul(Tt,ae)|0,f=f+Math.imul(Tt,ce)|0,f=f+Math.imul(Pt,ae)|0,x=x+Math.imul(Pt,ce)|0,v=v+Math.imul(pt,ue)|0,f=f+Math.imul(pt,le)|0,f=f+Math.imul(ht,ue)|0,x=x+Math.imul(ht,le)|0,v=v+Math.imul(G,fe)|0,f=f+Math.imul(G,he)|0,f=f+Math.imul(it,fe)|0,x=x+Math.imul(it,he)|0;var Zs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Zs>>>26)|0,Zs&=67108863,v=Math.imul(Jt,yt),f=Math.imul(Jt,gt),f=f+Math.imul(w,yt)|0,x=Math.imul(w,gt),v=v+Math.imul(Dt,dt)|0,f=f+Math.imul(Dt,ne)|0,f=f+Math.imul(Zt,dt)|0,x=x+Math.imul(Zt,ne)|0,v=v+Math.imul($t,re)|0,f=f+Math.imul($t,ie)|0,f=f+Math.imul(Ut,re)|0,x=x+Math.imul(Ut,ie)|0,v=v+Math.imul(zt,se)|0,f=f+Math.imul(zt,oe)|0,f=f+Math.imul(Yt,se)|0,x=x+Math.imul(Yt,oe)|0,v=v+Math.imul(Lt,ae)|0,f=f+Math.imul(Lt,ce)|0,f=f+Math.imul(Gt,ae)|0,x=x+Math.imul(Gt,ce)|0,v=v+Math.imul(Tt,ue)|0,f=f+Math.imul(Tt,le)|0,f=f+Math.imul(Pt,ue)|0,x=x+Math.imul(Pt,le)|0,v=v+Math.imul(pt,fe)|0,f=f+Math.imul(pt,he)|0,f=f+Math.imul(ht,fe)|0,x=x+Math.imul(ht,he)|0,v=v+Math.imul(G,de)|0,f=f+Math.imul(G,pe)|0,f=f+Math.imul(it,de)|0,x=x+Math.imul(it,pe)|0;var Js=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Js>>>26)|0,Js&=67108863,v=Math.imul(d,yt),f=Math.imul(d,gt),f=f+Math.imul(_,yt)|0,x=Math.imul(_,gt),v=v+Math.imul(Jt,dt)|0,f=f+Math.imul(Jt,ne)|0,f=f+Math.imul(w,dt)|0,x=x+Math.imul(w,ne)|0,v=v+Math.imul(Dt,re)|0,f=f+Math.imul(Dt,ie)|0,f=f+Math.imul(Zt,re)|0,x=x+Math.imul(Zt,ie)|0,v=v+Math.imul($t,se)|0,f=f+Math.imul($t,oe)|0,f=f+Math.imul(Ut,se)|0,x=x+Math.imul(Ut,oe)|0,v=v+Math.imul(zt,ae)|0,f=f+Math.imul(zt,ce)|0,f=f+Math.imul(Yt,ae)|0,x=x+Math.imul(Yt,ce)|0,v=v+Math.imul(Lt,ue)|0,f=f+Math.imul(Lt,le)|0,f=f+Math.imul(Gt,ue)|0,x=x+Math.imul(Gt,le)|0,v=v+Math.imul(Tt,fe)|0,f=f+Math.imul(Tt,he)|0,f=f+Math.imul(Pt,fe)|0,x=x+Math.imul(Pt,he)|0,v=v+Math.imul(pt,de)|0,f=f+Math.imul(pt,pe)|0,f=f+Math.imul(ht,de)|0,x=x+Math.imul(ht,pe)|0,v=v+Math.imul(G,ge)|0,f=f+Math.imul(G,ye)|0,f=f+Math.imul(it,ge)|0,x=x+Math.imul(it,ye)|0;var Xs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Xs>>>26)|0,Xs&=67108863,v=Math.imul(O,yt),f=Math.imul(O,gt),f=f+Math.imul(z,yt)|0,x=Math.imul(z,gt),v=v+Math.imul(d,dt)|0,f=f+Math.imul(d,ne)|0,f=f+Math.imul(_,dt)|0,x=x+Math.imul(_,ne)|0,v=v+Math.imul(Jt,re)|0,f=f+Math.imul(Jt,ie)|0,f=f+Math.imul(w,re)|0,x=x+Math.imul(w,ie)|0,v=v+Math.imul(Dt,se)|0,f=f+Math.imul(Dt,oe)|0,f=f+Math.imul(Zt,se)|0,x=x+Math.imul(Zt,oe)|0,v=v+Math.imul($t,ae)|0,f=f+Math.imul($t,ce)|0,f=f+Math.imul(Ut,ae)|0,x=x+Math.imul(Ut,ce)|0,v=v+Math.imul(zt,ue)|0,f=f+Math.imul(zt,le)|0,f=f+Math.imul(Yt,ue)|0,x=x+Math.imul(Yt,le)|0,v=v+Math.imul(Lt,fe)|0,f=f+Math.imul(Lt,he)|0,f=f+Math.imul(Gt,fe)|0,x=x+Math.imul(Gt,he)|0,v=v+Math.imul(Tt,de)|0,f=f+Math.imul(Tt,pe)|0,f=f+Math.imul(Pt,de)|0,x=x+Math.imul(Pt,pe)|0,v=v+Math.imul(pt,ge)|0,f=f+Math.imul(pt,ye)|0,f=f+Math.imul(ht,ge)|0,x=x+Math.imul(ht,ye)|0,v=v+Math.imul(G,me)|0,f=f+Math.imul(G,we)|0,f=f+Math.imul(it,me)|0,x=x+Math.imul(it,we)|0;var Qs=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(Qs>>>26)|0,Qs&=67108863,v=Math.imul(O,dt),f=Math.imul(O,ne),f=f+Math.imul(z,dt)|0,x=Math.imul(z,ne),v=v+Math.imul(d,re)|0,f=f+Math.imul(d,ie)|0,f=f+Math.imul(_,re)|0,x=x+Math.imul(_,ie)|0,v=v+Math.imul(Jt,se)|0,f=f+Math.imul(Jt,oe)|0,f=f+Math.imul(w,se)|0,x=x+Math.imul(w,oe)|0,v=v+Math.imul(Dt,ae)|0,f=f+Math.imul(Dt,ce)|0,f=f+Math.imul(Zt,ae)|0,x=x+Math.imul(Zt,ce)|0,v=v+Math.imul($t,ue)|0,f=f+Math.imul($t,le)|0,f=f+Math.imul(Ut,ue)|0,x=x+Math.imul(Ut,le)|0,v=v+Math.imul(zt,fe)|0,f=f+Math.imul(zt,he)|0,f=f+Math.imul(Yt,fe)|0,x=x+Math.imul(Yt,he)|0,v=v+Math.imul(Lt,de)|0,f=f+Math.imul(Lt,pe)|0,f=f+Math.imul(Gt,de)|0,x=x+Math.imul(Gt,pe)|0,v=v+Math.imul(Tt,ge)|0,f=f+Math.imul(Tt,ye)|0,f=f+Math.imul(Pt,ge)|0,x=x+Math.imul(Pt,ye)|0,v=v+Math.imul(pt,me)|0,f=f+Math.imul(pt,we)|0,f=f+Math.imul(ht,me)|0,x=x+Math.imul(ht,we)|0;var to=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(to>>>26)|0,to&=67108863,v=Math.imul(O,re),f=Math.imul(O,ie),f=f+Math.imul(z,re)|0,x=Math.imul(z,ie),v=v+Math.imul(d,se)|0,f=f+Math.imul(d,oe)|0,f=f+Math.imul(_,se)|0,x=x+Math.imul(_,oe)|0,v=v+Math.imul(Jt,ae)|0,f=f+Math.imul(Jt,ce)|0,f=f+Math.imul(w,ae)|0,x=x+Math.imul(w,ce)|0,v=v+Math.imul(Dt,ue)|0,f=f+Math.imul(Dt,le)|0,f=f+Math.imul(Zt,ue)|0,x=x+Math.imul(Zt,le)|0,v=v+Math.imul($t,fe)|0,f=f+Math.imul($t,he)|0,f=f+Math.imul(Ut,fe)|0,x=x+Math.imul(Ut,he)|0,v=v+Math.imul(zt,de)|0,f=f+Math.imul(zt,pe)|0,f=f+Math.imul(Yt,de)|0,x=x+Math.imul(Yt,pe)|0,v=v+Math.imul(Lt,ge)|0,f=f+Math.imul(Lt,ye)|0,f=f+Math.imul(Gt,ge)|0,x=x+Math.imul(Gt,ye)|0,v=v+Math.imul(Tt,me)|0,f=f+Math.imul(Tt,we)|0,f=f+Math.imul(Pt,me)|0,x=x+Math.imul(Pt,we)|0;var eo=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(eo>>>26)|0,eo&=67108863,v=Math.imul(O,se),f=Math.imul(O,oe),f=f+Math.imul(z,se)|0,x=Math.imul(z,oe),v=v+Math.imul(d,ae)|0,f=f+Math.imul(d,ce)|0,f=f+Math.imul(_,ae)|0,x=x+Math.imul(_,ce)|0,v=v+Math.imul(Jt,ue)|0,f=f+Math.imul(Jt,le)|0,f=f+Math.imul(w,ue)|0,x=x+Math.imul(w,le)|0,v=v+Math.imul(Dt,fe)|0,f=f+Math.imul(Dt,he)|0,f=f+Math.imul(Zt,fe)|0,x=x+Math.imul(Zt,he)|0,v=v+Math.imul($t,de)|0,f=f+Math.imul($t,pe)|0,f=f+Math.imul(Ut,de)|0,x=x+Math.imul(Ut,pe)|0,v=v+Math.imul(zt,ge)|0,f=f+Math.imul(zt,ye)|0,f=f+Math.imul(Yt,ge)|0,x=x+Math.imul(Yt,ye)|0,v=v+Math.imul(Lt,me)|0,f=f+Math.imul(Lt,we)|0,f=f+Math.imul(Gt,me)|0,x=x+Math.imul(Gt,we)|0;var no=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(no>>>26)|0,no&=67108863,v=Math.imul(O,ae),f=Math.imul(O,ce),f=f+Math.imul(z,ae)|0,x=Math.imul(z,ce),v=v+Math.imul(d,ue)|0,f=f+Math.imul(d,le)|0,f=f+Math.imul(_,ue)|0,x=x+Math.imul(_,le)|0,v=v+Math.imul(Jt,fe)|0,f=f+Math.imul(Jt,he)|0,f=f+Math.imul(w,fe)|0,x=x+Math.imul(w,he)|0,v=v+Math.imul(Dt,de)|0,f=f+Math.imul(Dt,pe)|0,f=f+Math.imul(Zt,de)|0,x=x+Math.imul(Zt,pe)|0,v=v+Math.imul($t,ge)|0,f=f+Math.imul($t,ye)|0,f=f+Math.imul(Ut,ge)|0,x=x+Math.imul(Ut,ye)|0,v=v+Math.imul(zt,me)|0,f=f+Math.imul(zt,we)|0,f=f+Math.imul(Yt,me)|0,x=x+Math.imul(Yt,we)|0;var ro=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ro>>>26)|0,ro&=67108863,v=Math.imul(O,ue),f=Math.imul(O,le),f=f+Math.imul(z,ue)|0,x=Math.imul(z,le),v=v+Math.imul(d,fe)|0,f=f+Math.imul(d,he)|0,f=f+Math.imul(_,fe)|0,x=x+Math.imul(_,he)|0,v=v+Math.imul(Jt,de)|0,f=f+Math.imul(Jt,pe)|0,f=f+Math.imul(w,de)|0,x=x+Math.imul(w,pe)|0,v=v+Math.imul(Dt,ge)|0,f=f+Math.imul(Dt,ye)|0,f=f+Math.imul(Zt,ge)|0,x=x+Math.imul(Zt,ye)|0,v=v+Math.imul($t,me)|0,f=f+Math.imul($t,we)|0,f=f+Math.imul(Ut,me)|0,x=x+Math.imul(Ut,we)|0;var io=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(io>>>26)|0,io&=67108863,v=Math.imul(O,fe),f=Math.imul(O,he),f=f+Math.imul(z,fe)|0,x=Math.imul(z,he),v=v+Math.imul(d,de)|0,f=f+Math.imul(d,pe)|0,f=f+Math.imul(_,de)|0,x=x+Math.imul(_,pe)|0,v=v+Math.imul(Jt,ge)|0,f=f+Math.imul(Jt,ye)|0,f=f+Math.imul(w,ge)|0,x=x+Math.imul(w,ye)|0,v=v+Math.imul(Dt,me)|0,f=f+Math.imul(Dt,we)|0,f=f+Math.imul(Zt,me)|0,x=x+Math.imul(Zt,we)|0;var so=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(so>>>26)|0,so&=67108863,v=Math.imul(O,de),f=Math.imul(O,pe),f=f+Math.imul(z,de)|0,x=Math.imul(z,pe),v=v+Math.imul(d,ge)|0,f=f+Math.imul(d,ye)|0,f=f+Math.imul(_,ge)|0,x=x+Math.imul(_,ye)|0,v=v+Math.imul(Jt,me)|0,f=f+Math.imul(Jt,we)|0,f=f+Math.imul(w,me)|0,x=x+Math.imul(w,we)|0;var oo=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(oo>>>26)|0,oo&=67108863,v=Math.imul(O,ge),f=Math.imul(O,ye),f=f+Math.imul(z,ge)|0,x=Math.imul(z,ye),v=v+Math.imul(d,me)|0,f=f+Math.imul(d,we)|0,f=f+Math.imul(_,me)|0,x=x+Math.imul(_,we)|0;var ao=(C+v|0)+((f&8191)<<13)|0;C=(x+(f>>>13)|0)+(ao>>>26)|0,ao&=67108863,v=Math.imul(O,me),f=Math.imul(O,we),f=f+Math.imul(z,me)|0,x=Math.imul(z,we);var co=(C+v|0)+((f&8191)<<13)|0;return C=(x+(f>>>13)|0)+(co>>>26)|0,co&=67108863,B[0]=qs,B[1]=Vs,B[2]=js,B[3]=Hs,B[4]=Gs,B[5]=Ys,B[6]=Zs,B[7]=Js,B[8]=Xs,B[9]=Qs,B[10]=to,B[11]=eo,B[12]=no,B[13]=ro,B[14]=io,B[15]=so,B[16]=oo,B[17]=ao,B[18]=co,C!==0&&(B[19]=C,y.length++),y};Math.imul||(N=M);function P(b,c,h){h.negative=c.negative^b.negative,h.length=b.length+c.length;for(var y=0,k=0,I=0;I<h.length-1;I++){var B=k;k=0;for(var C=y&67108863,v=Math.min(I,c.length-1),f=Math.max(0,I-b.length+1);f<=v;f++){var x=I-f,et=b.words[x]|0,G=c.words[f]|0,it=et*G,vt=it&67108863;B=B+(it/67108864|0)|0,vt=vt+C|0,C=vt&67108863,B=B+(vt>>>26)|0,k+=B>>>26,B&=67108863}h.words[I]=C,y=B,B=k}return y!==0?h.words[I]=y:h.length--,h._strip()}function W(b,c,h){return P(b,c,h)}i.prototype.mulTo=function(c,h){var y,k=this.length+c.length;return this.length===10&&c.length===10?y=N(this,c,h):k<63?y=M(this,c,h):k<1024?y=P(this,c,h):y=W(this,c,h),y},i.prototype.mul=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},i.prototype.mulf=function(c){var h=new i(null);return h.words=new Array(this.length+c.length),W(this,c,h)},i.prototype.imul=function(c){return this.clone().mulTo(c,this)},i.prototype.imuln=function(c){var h=c<0;h&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var y=0,k=0;k<this.length;k++){var I=(this.words[k]|0)*c,B=(I&67108863)+(y&67108863);y>>=26,y+=I/67108864|0,y+=B>>>26,this.words[k]=B&67108863}return y!==0&&(this.words[k]=y,this.length++),this.length=c===0?1:this.length,h?this.ineg():this},i.prototype.muln=function(c){return this.clone().imuln(c)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(c){var h=T(c);if(h.length===0)return new i(1);for(var y=this,k=0;k<h.length&&h[k]===0;k++,y=y.sqr());if(++k<h.length)for(var I=y.sqr();k<h.length;k++,I=I.sqr())h[k]!==0&&(y=y.mul(I));return y},i.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,k=67108863>>>26-h<<26-h,I;if(h!==0){var B=0;for(I=0;I<this.length;I++){var C=this.words[I]&k,v=(this.words[I]|0)-C<<h;this.words[I]=v|B,B=C>>>26-h}B&&(this.words[I]=B,this.length++)}if(y!==0){for(I=this.length-1;I>=0;I--)this.words[I+y]=this.words[I];for(I=0;I<y;I++)this.words[I]=0;this.length+=y}return this._strip()},i.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},i.prototype.iushrn=function(c,h,y){n(typeof c=="number"&&c>=0);var k;h?k=(h-h%26)/26:k=0;var I=c%26,B=Math.min((c-I)/26,this.length),C=67108863^67108863>>>I<<I,v=y;if(k-=B,k=Math.max(0,k),v){for(var f=0;f<B;f++)v.words[f]=this.words[f];v.length=B}if(B!==0)if(this.length>B)for(this.length-=B,f=0;f<this.length;f++)this.words[f]=this.words[f+B];else this.words[0]=0,this.length=1;var x=0;for(f=this.length-1;f>=0&&(x!==0||f>=k);f--){var et=this.words[f]|0;this.words[f]=x<<26-I|et>>>I,x=et&C}return v&&x!==0&&(v.words[v.length++]=x),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},i.prototype.ishrn=function(c,h,y){return n(this.negative===0),this.iushrn(c,h,y)},i.prototype.shln=function(c){return this.clone().ishln(c)},i.prototype.ushln=function(c){return this.clone().iushln(c)},i.prototype.shrn=function(c){return this.clone().ishrn(c)},i.prototype.ushrn=function(c){return this.clone().iushrn(c)},i.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26,k=1<<h;if(this.length<=y)return!1;var I=this.words[y];return!!(I&k)},i.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,y=(c-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(h!==0&&y++,this.length=Math.min(y,this.length),h!==0){var k=67108863^67108863>>>h<<h;this.words[this.length-1]&=k}return this._strip()},i.prototype.maskn=function(c){return this.clone().imaskn(c)},i.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},i.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},i.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},i.prototype.addn=function(c){return this.clone().iaddn(c)},i.prototype.subn=function(c){return this.clone().isubn(c)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(c,h,y){var k=c.length+y,I;this._expand(k);var B,C=0;for(I=0;I<c.length;I++){B=(this.words[I+y]|0)+C;var v=(c.words[I]|0)*h;B-=v&67108863,C=(B>>26)-(v/67108864|0),this.words[I+y]=B&67108863}for(;I<this.length-y;I++)B=(this.words[I+y]|0)+C,C=B>>26,this.words[I+y]=B&67108863;if(C===0)return this._strip();for(n(C===-1),C=0,I=0;I<this.length;I++)B=-(this.words[I]|0)+C,C=B>>26,this.words[I]=B&67108863;return this.negative=1,this._strip()},i.prototype._wordDiv=function(c,h){var y=this.length-c.length,k=this.clone(),I=c,B=I.words[I.length-1]|0,C=this._countBits(B);y=26-C,y!==0&&(I=I.ushln(y),k.iushln(y),B=I.words[I.length-1]|0);var v=k.length-I.length,f;if(h!=="mod"){f=new i(null),f.length=v+1,f.words=new Array(f.length);for(var x=0;x<f.length;x++)f.words[x]=0}var et=k.clone()._ishlnsubmul(I,1,v);et.negative===0&&(k=et,f&&(f.words[v]=1));for(var G=v-1;G>=0;G--){var it=(k.words[I.length+G]|0)*67108864+(k.words[I.length+G-1]|0);for(it=Math.min(it/B|0,67108863),k._ishlnsubmul(I,it,G);k.negative!==0;)it--,k.negative=0,k._ishlnsubmul(I,1,G),k.isZero()||(k.negative^=1);f&&(f.words[G]=it)}return f&&f._strip(),k._strip(),h!=="div"&&y!==0&&k.iushrn(y),{div:f||null,mod:k}},i.prototype.divmod=function(c,h,y){if(n(!c.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var k,I,B;return this.negative!==0&&c.negative===0?(B=this.neg().divmod(c,h),h!=="mod"&&(k=B.div.neg()),h!=="div"&&(I=B.mod.neg(),y&&I.negative!==0&&I.iadd(c)),{div:k,mod:I}):this.negative===0&&c.negative!==0?(B=this.divmod(c.neg(),h),h!=="mod"&&(k=B.div.neg()),{div:k,mod:B.mod}):this.negative&c.negative?(B=this.neg().divmod(c.neg(),h),h!=="div"&&(I=B.mod.neg(),y&&I.negative!==0&&I.isub(c)),{div:B.div,mod:I}):c.length>this.length||this.cmp(c)<0?{div:new i(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new i(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new i(this.modrn(c.words[0]))}:this._wordDiv(c,h)},i.prototype.div=function(c){return this.divmod(c,"div",!1).div},i.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},i.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},i.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var y=h.div.negative!==0?h.mod.isub(c):h.mod,k=c.ushrn(1),I=c.andln(1),B=y.cmp(k);return B<0||I===1&&B===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},i.prototype.modrn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var y=(1<<26)%c,k=0,I=this.length-1;I>=0;I--)k=(y*k+(this.words[I]|0))%c;return h?-k:k},i.prototype.modn=function(c){return this.modrn(c)},i.prototype.idivn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var y=0,k=this.length-1;k>=0;k--){var I=(this.words[k]|0)+y*67108864;this.words[k]=I/c|0,y=I%c}return this._strip(),h?this.ineg():this},i.prototype.divn=function(c){return this.clone().idivn(c)},i.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var k=new i(1),I=new i(0),B=new i(0),C=new i(1),v=0;h.isEven()&&y.isEven();)h.iushrn(1),y.iushrn(1),++v;for(var f=y.clone(),x=h.clone();!h.isZero();){for(var et=0,G=1;!(h.words[0]&G)&&et<26;++et,G<<=1);if(et>0)for(h.iushrn(et);et-- >0;)(k.isOdd()||I.isOdd())&&(k.iadd(f),I.isub(x)),k.iushrn(1),I.iushrn(1);for(var it=0,vt=1;!(y.words[0]&vt)&&it<26;++it,vt<<=1);if(it>0)for(y.iushrn(it);it-- >0;)(B.isOdd()||C.isOdd())&&(B.iadd(f),C.isub(x)),B.iushrn(1),C.iushrn(1);h.cmp(y)>=0?(h.isub(y),k.isub(B),I.isub(C)):(y.isub(h),B.isub(k),C.isub(I))}return{a:B,b:C,gcd:y.iushln(v)}},i.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var h=this,y=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var k=new i(1),I=new i(0),B=y.clone();h.cmpn(1)>0&&y.cmpn(1)>0;){for(var C=0,v=1;!(h.words[0]&v)&&C<26;++C,v<<=1);if(C>0)for(h.iushrn(C);C-- >0;)k.isOdd()&&k.iadd(B),k.iushrn(1);for(var f=0,x=1;!(y.words[0]&x)&&f<26;++f,x<<=1);if(f>0)for(y.iushrn(f);f-- >0;)I.isOdd()&&I.iadd(B),I.iushrn(1);h.cmp(y)>=0?(h.isub(y),k.isub(I)):(y.isub(h),I.isub(k))}var et;return h.cmpn(1)===0?et=k:et=I,et.cmpn(0)<0&&et.iadd(c),et},i.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),y=c.clone();h.negative=0,y.negative=0;for(var k=0;h.isEven()&&y.isEven();k++)h.iushrn(1),y.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;y.isEven();)y.iushrn(1);var I=h.cmp(y);if(I<0){var B=h;h=y,y=B}else if(I===0||y.cmpn(1)===0)break;h.isub(y)}while(!0);return y.iushln(k)},i.prototype.invm=function(c){return this.egcd(c).a.umod(c)},i.prototype.isEven=function(){return(this.words[0]&1)===0},i.prototype.isOdd=function(){return(this.words[0]&1)===1},i.prototype.andln=function(c){return this.words[0]&c},i.prototype.bincn=function(c){n(typeof c=="number");var h=c%26,y=(c-h)/26,k=1<<h;if(this.length<=y)return this._expand(y+1),this.words[y]|=k,this;for(var I=k,B=y;I!==0&&B<this.length;B++){var C=this.words[B]|0;C+=I,I=C>>>26,C&=67108863,this.words[B]=C}return I!==0&&(this.words[B]=I,this.length++),this},i.prototype.isZero=function(){return this.length===1&&this.words[0]===0},i.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var y;if(this.length>1)y=1;else{h&&(c=-c),n(c<=67108863,"Number is too big");var k=this.words[0]|0;y=k===c?0:k<c?-1:1}return this.negative!==0?-y|0:y},i.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},i.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,y=this.length-1;y>=0;y--){var k=this.words[y]|0,I=c.words[y]|0;if(k!==I){k<I?h=-1:k>I&&(h=1);break}}return h},i.prototype.gtn=function(c){return this.cmpn(c)===1},i.prototype.gt=function(c){return this.cmp(c)===1},i.prototype.gten=function(c){return this.cmpn(c)>=0},i.prototype.gte=function(c){return this.cmp(c)>=0},i.prototype.ltn=function(c){return this.cmpn(c)===-1},i.prototype.lt=function(c){return this.cmp(c)===-1},i.prototype.lten=function(c){return this.cmpn(c)<=0},i.prototype.lte=function(c){return this.cmp(c)<=0},i.prototype.eqn=function(c){return this.cmpn(c)===0},i.prototype.eq=function(c){return this.cmp(c)===0},i.red=function(c){return new X(c)},i.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(c){return this.red=c,this},i.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},i.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},i.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},i.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},i.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},i.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},i.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},i.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var K={k256:null,p224:null,p192:null,p25519:null};function $(b,c){this.name=b,this.p=new i(c,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}$.prototype._tmp=function(){var c=new i(null);return c.words=new Array(Math.ceil(this.n/13)),c},$.prototype.ireduce=function(c){var h=c,y;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),y=h.bitLength();while(y>this.n);var k=y<this.n?-1:h.ucmp(this.p);return k===0?(h.words[0]=0,h.length=1):k>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},$.prototype.split=function(c,h){c.iushrn(this.n,0,h)},$.prototype.imulK=function(c){return c.imul(this.k)};function V(){$.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(V,$),V.prototype.split=function(c,h){for(var y=4194303,k=Math.min(c.length,9),I=0;I<k;I++)h.words[I]=c.words[I];if(h.length=k,c.length<=9){c.words[0]=0,c.length=1;return}var B=c.words[9];for(h.words[h.length++]=B&y,I=10;I<c.length;I++){var C=c.words[I]|0;c.words[I-10]=(C&y)<<4|B>>>22,B=C}B>>>=22,c.words[I-10]=B,B===0&&c.length>10?c.length-=10:c.length-=9},V.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,y=0;y<c.length;y++){var k=c.words[y]|0;h+=k*977,c.words[y]=h&67108863,h=k*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function j(){$.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(j,$);function D(){$.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(D,$);function Z(){$.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(Z,$),Z.prototype.imulK=function(c){for(var h=0,y=0;y<c.length;y++){var k=(c.words[y]|0)*19+h,I=k&67108863;k>>>=26,c.words[y]=I,h=k}return h!==0&&(c.words[c.length++]=h),c},i._prime=function(c){if(K[c])return K[c];var h;if(c==="k256")h=new V;else if(c==="p224")h=new j;else if(c==="p192")h=new D;else if(c==="p25519")h=new Z;else throw new Error("Unknown prime "+c);return K[c]=h,h};function X(b){if(typeof b=="string"){var c=i._prime(b);this.m=c.p,this.prime=c}else n(b.gtn(1),"modulus must be greater than 1"),this.m=b,this.prime=null}X.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},X.prototype._verify2=function(c,h){n((c.negative|h.negative)===0,"red works only with positives"),n(c.red&&c.red===h.red,"red works only with red numbers")},X.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(m(c,c.umod(this.m)._forceRed(this)),c)},X.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},X.prototype.add=function(c,h){this._verify2(c,h);var y=c.add(h);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},X.prototype.iadd=function(c,h){this._verify2(c,h);var y=c.iadd(h);return y.cmp(this.m)>=0&&y.isub(this.m),y},X.prototype.sub=function(c,h){this._verify2(c,h);var y=c.sub(h);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},X.prototype.isub=function(c,h){this._verify2(c,h);var y=c.isub(h);return y.cmpn(0)<0&&y.iadd(this.m),y},X.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},X.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},X.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},X.prototype.isqr=function(c){return this.imul(c,c.clone())},X.prototype.sqr=function(c){return this.mul(c,c)},X.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var y=this.m.add(new i(1)).iushrn(2);return this.pow(c,y)}for(var k=this.m.subn(1),I=0;!k.isZero()&&k.andln(1)===0;)I++,k.iushrn(1);n(!k.isZero());var B=new i(1).toRed(this),C=B.redNeg(),v=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new i(2*f*f).toRed(this);this.pow(f,v).cmp(C)!==0;)f.redIAdd(C);for(var x=this.pow(f,k),et=this.pow(c,k.addn(1).iushrn(1)),G=this.pow(c,k),it=I;G.cmp(B)!==0;){for(var vt=G,pt=0;vt.cmp(B)!==0;pt++)vt=vt.redSqr();n(pt<it);var ht=this.pow(x,new i(1).iushln(it-pt-1));et=et.redMul(ht),x=ht.redSqr(),G=G.redMul(x),it=pt}return et},X.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},X.prototype.pow=function(c,h){if(h.isZero())return new i(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var y=4,k=new Array(1<<y);k[0]=new i(1).toRed(this),k[1]=c;for(var I=2;I<k.length;I++)k[I]=this.mul(k[I-1],c);var B=k[0],C=0,v=0,f=h.bitLength()%26;for(f===0&&(f=26),I=h.length-1;I>=0;I--){for(var x=h.words[I],et=f-1;et>=0;et--){var G=x>>et&1;if(B!==k[0]&&(B=this.sqr(B)),G===0&&C===0){v=0;continue}C<<=1,C|=G,v++,!(v!==y&&(I!==0||et!==0))&&(B=this.mul(B,k[C]),v=0,C=0)}f=26}return B},X.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},X.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},i.mont=function(c){return new J(c)};function J(b){X.call(this,b),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(J,X),J.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},J.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},J.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var y=c.imul(h),k=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(k).iushrn(this.shift),B=I;return I.cmp(this.m)>=0?B=I.isub(this.m):I.cmpn(0)<0&&(B=I.iadd(this.m)),B._forceRed(this)},J.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new i(0)._forceRed(this);var y=c.mul(h),k=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(k).iushrn(this.shift),B=I;return I.cmp(this.m)>=0?B=I.isub(this.m):I.cmpn(0)<0&&(B=I.iadd(this.m)),B._forceRed(this)},J.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(r,on)})(Ta);var Gu=Ta.exports;const Nc=Si(Gu);var qo={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(r,t){var e=lt,n=e.Buffer;function s(o,a){for(var u in o)a[u]=o[u]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=e:(s(e,t),t.Buffer=i);function i(o,a,u){return n(o,a,u)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,a,u){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,a,u)},i.alloc=function(o,a,u){if(typeof o!="number")throw new TypeError("Argument must be a number");var p=n(o);return a!==void 0?typeof u=="string"?p.fill(a,u):p.fill(a):p.fill(0),p},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return e.SlowBuffer(o)}})(qo,qo.exports);var Yu=qo.exports,Oi=Yu.Buffer;function hd(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function m(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Oi.from(g)),!Oi.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var E=0,R=0,T=0,M=g.length;T!==M&&g[T]===0;)T++,E++;for(var N=(M-T)*p+1>>>0,P=new Uint8Array(N);T!==M;){for(var W=g[T],K=0,$=N-1;(W!==0||K<R)&&$!==-1;$--,K++)W+=256*P[$]>>>0,P[$]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");R=K,T++}for(var V=N-R;V!==N&&P[V]===0;)V++;for(var j=a.repeat(E);V<N;++V)j+=r.charAt(P[V]);return j}function A(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Oi.alloc(0);for(var E=0,R=0,T=0;g[E]===a;)R++,E++;for(var M=(g.length-E)*u+1>>>0,N=new Uint8Array(M);E<g.length;){var P=g.charCodeAt(E);if(P>255)return;var W=t[P];if(W===255)return;for(var K=0,$=M-1;(W!==0||K<T)&&$!==-1;$--,K++)W+=o*N[$]>>>0,N[$]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");T=K,E++}for(var V=M-T;V!==M&&N[V]===0;)V++;var j=Oi.allocUnsafe(R+(M-V));j.fill(0,0,R);for(var D=R;V!==M;)j[D++]=N[V++];return j}function S(g){var E=A(g);if(E)return E;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:A,decode:S}}var dd=hd,pd=dd,gd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",yd=pd(gd);const Re=Si(yd),Oc=xu;var Be={},Ui=Yu.Buffer;function md(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function m(g){if((Array.isArray(g)||g instanceof Uint8Array)&&(g=Ui.from(g)),!Ui.isBuffer(g))throw new TypeError("Expected Buffer");if(g.length===0)return"";for(var E=0,R=0,T=0,M=g.length;T!==M&&g[T]===0;)T++,E++;for(var N=(M-T)*p+1>>>0,P=new Uint8Array(N);T!==M;){for(var W=g[T],K=0,$=N-1;(W!==0||K<R)&&$!==-1;$--,K++)W+=256*P[$]>>>0,P[$]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");R=K,T++}for(var V=N-R;V!==N&&P[V]===0;)V++;for(var j=a.repeat(E);V<N;++V)j+=r.charAt(P[V]);return j}function A(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return Ui.alloc(0);for(var E=0,R=0,T=0;g[E]===a;)R++,E++;for(var M=(g.length-E)*u+1>>>0,N=new Uint8Array(M);E<g.length;){var P=g.charCodeAt(E);if(P>255)return;var W=t[P];if(W===255)return;for(var K=0,$=M-1;(W!==0||K<T)&&$!==-1;$--,K++)W+=o*N[$]>>>0,N[$]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");T=K,E++}for(var V=M-T;V!==M&&N[V]===0;)V++;var j=Ui.allocUnsafe(R+(M-V));j.fill(0,0,R);for(var D=R;V!==M;)j[D++]=N[V++];return j}function S(g){var E=A(g);if(E)return E;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:A,decode:S}}var wd=md,bd=wd,vd="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Sd=bd(vd);function Rn(r,t,e){return t<=r&&r<=e}function _s(r){if(r===void 0)return{};if(r===Object(r))return r;throw TypeError("Could not convert argument to dictionary")}function kd(r){for(var t=String(r),e=t.length,n=0,s=[];n<e;){var i=t.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===e-1)s.push(65533);else{var o=r.charCodeAt(n+1);if(56320<=o&&o<=57343){var a=i&1023,u=o&1023;s.push(65536+(a<<10)+u),n+=1}else s.push(65533)}n+=1}return s}function Ed(r){for(var t="",e=0;e<r.length;++e){var n=r[e];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return t}var as=-1;function Ca(r){this.tokens=[].slice.call(r)}Ca.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():as},prepend:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(r)},push:function(r){if(Array.isArray(r))for(var t=r;t.length;)this.tokens.push(t.shift());else this.tokens.push(r)}};var Dr=-1;function mo(r,t){if(r)throw TypeError("Decoder error");return t||65533}var cs="utf-8";function us(r,t){if(!(this instanceof us))return new us(r,t);if(r=r!==void 0?String(r).toLowerCase():cs,r!==cs)throw new Error("Encoding not supported. Only utf-8 is supported");t=_s(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!t.fatal,this._ignoreBOM=!!t.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}us.prototype={decode:function(t,e){var n;typeof t=="object"&&t instanceof ArrayBuffer?n=new Uint8Array(t):typeof t=="object"&&"buffer"in t&&t.buffer instanceof ArrayBuffer?n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):n=new Uint8Array(0),e=_s(e),this._streaming||(this._decoder=new Ad({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!e.stream;for(var s=new Ca(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==Dr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===Dr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Ed(i)}};function ls(r,t){if(!(this instanceof ls))return new ls(r,t);if(r=r!==void 0?String(r).toLowerCase():cs,r!==cs)throw new Error("Encoding not supported. Only utf-8 is supported");t=_s(t),this._streaming=!1,this._encoder=null,this._options={fatal:!!t.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ls.prototype={encode:function(t,e){t=t?String(t):"",e=_s(e),this._streaming||(this._encoder=new _d(this._options)),this._streaming=!!e.stream;for(var n=[],s=new Ca(kd(t)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==Dr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==Dr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Ad(r){var t=r.fatal,e=0,n=0,s=0,i=128,o=191;this.handler=function(a,u){if(u===as&&s!==0)return s=0,mo(t);if(u===as)return Dr;if(s===0){if(Rn(u,0,127))return u;if(Rn(u,194,223))s=1,e=u-192;else if(Rn(u,224,239))u===224&&(i=160),u===237&&(o=159),s=2,e=u-224;else if(Rn(u,240,244))u===240&&(i=144),u===244&&(o=143),s=3,e=u-240;else return mo(t);return e=e<<6*s,null}if(!Rn(u,i,o))return e=s=n=0,i=128,o=191,a.prepend(u),mo(t);if(i=128,o=191,n+=1,e+=u-128<<6*(s-n),n!==s)return null;var p=e;return e=s=n=0,p}}function _d(r){r.fatal,this.handler=function(t,e){if(e===as)return Dr;if(Rn(e,0,127))return e;var n,s;Rn(e,128,2047)?(n=1,s=192):Rn(e,2048,65535)?(n=2,s=224):Rn(e,65536,1114111)&&(n=3,s=240);for(var i=[(e>>6*n)+s];n>0;){var o=e>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Id=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:us,TextEncoder:ls},Symbol.toStringTag,{value:"Module"})),xd=ka(Id);var Bd=on&&on.__createBinding||(Object.create?function(r,t,e,n){n===void 0&&(n=e),Object.defineProperty(r,n,{enumerable:!0,get:function(){return t[e]}})}:function(r,t,e,n){n===void 0&&(n=e),r[n]=t[e]}),Rd=on&&on.__setModuleDefault||(Object.create?function(r,t){Object.defineProperty(r,"default",{enumerable:!0,value:t})}:function(r,t){r.default=t}),bn=on&&on.__decorate||function(r,t,e,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(r,t,e,n);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(i=(s<3?o(i):s>3?o(t,e,i):o(t,e))||i);return s>3&&i&&Object.defineProperty(t,e,i),i},Md=on&&on.__importStar||function(r){if(r&&r.__esModule)return r;var t={};if(r!=null)for(var e in r)e!=="default"&&Object.hasOwnProperty.call(r,e)&&Bd(t,r,e);return Rd(t,r),t},Zu=on&&on.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(Be,"__esModule",{value:!0});var Ju=Be.deserializeUnchecked=rl=Be.deserialize=nl=Be.serialize=Be.BinaryReader=Be.BinaryWriter=Be.BorshError=Be.baseDecode=Be.baseEncode=void 0;const Vn=Zu(Gu),Xu=Zu(Sd),Td=Md(xd),Cd=typeof TextDecoder!="function"?Td.TextDecoder:TextDecoder,Pd=new Cd("utf-8",{fatal:!0});function Ld(r){return typeof r=="string"&&(r=Buffer.from(r,"utf8")),Xu.default.encode(Buffer.from(r))}Be.baseEncode=Ld;function Nd(r){return Buffer.from(Xu.default.decode(r))}Be.baseDecode=Nd;const wo=1024;class Fe extends Error{constructor(t){super(t),this.fieldPath=[],this.originalMessage=t}addToFieldPath(t){this.fieldPath.splice(0,0,t),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}Be.BorshError=Fe;class Qu{constructor(){this.buf=Buffer.alloc(wo),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(wo)]))}writeU8(t){this.maybeResize(),this.buf.writeUInt8(t,this.length),this.length+=1}writeU16(t){this.maybeResize(),this.buf.writeUInt16LE(t,this.length),this.length+=2}writeU32(t){this.maybeResize(),this.buf.writeUInt32LE(t,this.length),this.length+=4}writeU64(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Vn.default(t).toArray("le",8)))}writeU128(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Vn.default(t).toArray("le",16)))}writeU256(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Vn.default(t).toArray("le",32)))}writeU512(t){this.maybeResize(),this.writeBuffer(Buffer.from(new Vn.default(t).toArray("le",64)))}writeBuffer(t){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),t,Buffer.alloc(wo)]),this.length+=t.length}writeString(t){this.maybeResize();const e=Buffer.from(t,"utf8");this.writeU32(e.length),this.writeBuffer(e)}writeFixedArray(t){this.writeBuffer(Buffer.from(t))}writeArray(t,e){this.maybeResize(),this.writeU32(t.length);for(const n of t)this.maybeResize(),e(n)}toArray(){return this.buf.subarray(0,this.length)}}Be.BinaryWriter=Qu;function vn(r,t,e){const n=e.value;e.value=function(...s){try{return n.apply(this,s)}catch(i){if(i instanceof RangeError){const o=i.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Fe("Reached the end of buffer when deserializing")}throw i}}}class Ye{constructor(t){this.buf=t,this.offset=0}readU8(){const t=this.buf.readUInt8(this.offset);return this.offset+=1,t}readU16(){const t=this.buf.readUInt16LE(this.offset);return this.offset+=2,t}readU32(){const t=this.buf.readUInt32LE(this.offset);return this.offset+=4,t}readU64(){const t=this.readBuffer(8);return new Vn.default(t,"le")}readU128(){const t=this.readBuffer(16);return new Vn.default(t,"le")}readU256(){const t=this.readBuffer(32);return new Vn.default(t,"le")}readU512(){const t=this.readBuffer(64);return new Vn.default(t,"le")}readBuffer(t){if(this.offset+t>this.buf.length)throw new Fe(`Expected buffer length ${t} isn't within bounds`);const e=this.buf.slice(this.offset,this.offset+t);return this.offset+=t,e}readString(){const t=this.readU32(),e=this.readBuffer(t);try{return Pd.decode(e)}catch(n){throw new Fe(`Error decoding UTF-8 string: ${n}`)}}readFixedArray(t){return new Uint8Array(this.readBuffer(t))}readArray(t){const e=this.readU32(),n=Array();for(let s=0;s<e;++s)n.push(t());return n}}bn([vn],Ye.prototype,"readU8",null);bn([vn],Ye.prototype,"readU16",null);bn([vn],Ye.prototype,"readU32",null);bn([vn],Ye.prototype,"readU64",null);bn([vn],Ye.prototype,"readU128",null);bn([vn],Ye.prototype,"readU256",null);bn([vn],Ye.prototype,"readU512",null);bn([vn],Ye.prototype,"readString",null);bn([vn],Ye.prototype,"readFixedArray",null);bn([vn],Ye.prototype,"readArray",null);Be.BinaryReader=Ye;function tl(r){return r.charAt(0).toUpperCase()+r.slice(1)}function tr(r,t,e,n,s){try{if(typeof n=="string")s[`write${tl(n)}`](e);else if(n instanceof Array)if(typeof n[0]=="number"){if(e.length!==n[0])throw new Fe(`Expecting byte array of length ${n[0]}, but got ${e.length} bytes`);s.writeFixedArray(e)}else if(n.length===2&&typeof n[1]=="number"){if(e.length!==n[1])throw new Fe(`Expecting byte array of length ${n[1]}, but got ${e.length} bytes`);for(let i=0;i<n[1];i++)tr(r,null,e[i],n[0],s)}else s.writeArray(e,i=>{tr(r,t,i,n[0],s)});else if(n.kind!==void 0)switch(n.kind){case"option":{e==null?s.writeU8(0):(s.writeU8(1),tr(r,t,e,n.type,s));break}case"map":{s.writeU32(e.size),e.forEach((i,o)=>{tr(r,t,o,n.key,s),tr(r,t,i,n.value,s)});break}default:throw new Fe(`FieldType ${n} unrecognized`)}else el(r,e,s)}catch(i){throw i instanceof Fe&&i.addToFieldPath(t),i}}function el(r,t,e){if(typeof t.borshSerialize=="function"){t.borshSerialize(e);return}const n=r.get(t.constructor);if(!n)throw new Fe(`Class ${t.constructor.name} is missing in schema`);if(n.kind==="struct")n.fields.map(([s,i])=>{tr(r,s,t[s],i,e)});else if(n.kind==="enum"){const s=t[n.field];for(let i=0;i<n.values.length;++i){const[o,a]=n.values[i];if(o===s){e.writeU8(i),tr(r,o,t[o],a,e);break}}}else throw new Fe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Od(r,t,e=Qu){const n=new e;return el(r,t,n),n.toArray()}var nl=Be.serialize=Od;function er(r,t,e,n){try{if(typeof e=="string")return n[`read${tl(e)}`]();if(e instanceof Array){if(typeof e[0]=="number")return n.readFixedArray(e[0]);if(typeof e[1]=="number"){const s=[];for(let i=0;i<e[1];i++)s.push(er(r,null,e[0],n));return s}else return n.readArray(()=>er(r,t,e[0],n))}if(e.kind==="option")return n.readU8()?er(r,t,e.type,n):void 0;if(e.kind==="map"){let s=new Map;const i=n.readU32();for(let o=0;o<i;o++){const a=er(r,t,e.key,n),u=er(r,t,e.value,n);s.set(a,u)}return s}return Pa(r,e,n)}catch(s){throw s instanceof Fe&&s.addToFieldPath(t),s}}function Pa(r,t,e){if(typeof t.borshDeserialize=="function")return t.borshDeserialize(e);const n=r.get(t);if(!n)throw new Fe(`Class ${t.name} is missing in schema`);if(n.kind==="struct"){const s={};for(const[i,o]of r.get(t).fields)s[i]=er(r,i,o,e);return new t(s)}if(n.kind==="enum"){const s=e.readU8();if(s>=n.values.length)throw new Fe(`Enum index: ${s} is out of range`);const[i,o]=n.values[s],a=er(r,i,o,e);return new t({[i]:a})}throw new Fe(`Unexpected schema kind: ${n.kind} for ${t.constructor.name}`)}function Ud(r,t,e,n=Ye){const s=new n(e),i=Pa(r,t,s);if(s.offset<e.length)throw new Fe(`Unexpected ${e.length-s.offset} bytes after deserialized data`);return i}var rl=Be.deserialize=Ud;function Wd(r,t,e,n=Ye){const s=new n(e);return Pa(r,t,s)}Ju=Be.deserializeUnchecked=Wd;var F={};Object.defineProperty(F,"__esModule",{value:!0});F.s16=F.s8=F.nu64be=F.u48be=F.u40be=F.u32be=F.u24be=F.u16be=xe=F.nu64=F.u48=F.u40=st=F.u32=F.u24=tn=F.u16=At=F.u8=Gn=F.offset=F.greedy=F.Constant=F.UTF8=F.CString=F.Blob=F.Boolean=F.BitField=F.BitStructure=F.VariantLayout=F.Union=F.UnionLayoutDiscriminator=F.UnionDiscriminator=F.Structure=F.Sequence=F.DoubleBE=F.Double=F.FloatBE=F.Float=F.NearInt64BE=F.NearInt64=F.NearUInt64BE=F.NearUInt64=F.IntBE=F.Int=F.UIntBE=F.UInt=F.OffsetLayout=F.GreedyCount=F.ExternalLayout=F.bindConstructorLayout=F.nameWithProperty=F.Layout=F.uint8ArrayToBuffer=F.checkUint8Array=void 0;F.constant=F.utf8=F.cstr=Ft=F.blob=F.unionLayoutDiscriminator=F.union=Me=F.seq=F.bits=ot=F.struct=F.f64be=F.f64=F.f32be=F.f32=F.ns64be=F.s48be=F.s40be=F.s32be=F.s24be=F.s16be=He=F.ns64=F.s48=F.s40=F.s32=F.s24=void 0;const La=lt;function Yr(r){if(!(r instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}F.checkUint8Array=Yr;function xt(r){return Yr(r),La.Buffer.from(r.buffer,r.byteOffset,r.length)}F.uint8ArrayToBuffer=xt;class Mt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}F.Layout=Mt;function Na(r,t){return t.property?r+"["+t.property+"]":r}F.nameWithProperty=Na;function Fd(r,t){if(typeof r!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(r,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof Mt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");r.layout_=t,t.boundConstructor_=r,t.makeDestinationObject=()=>new r,Object.defineProperty(r.prototype,"encode",{value(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(r,"decode",{value(e,n){return t.decode(e,n)},writable:!0})}F.bindConstructorLayout=Fd;class $e extends Mt{isCount(){throw new Error("ExternalLayout is abstract")}}F.ExternalLayout=$e;class il extends $e{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){Yr(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}F.GreedyCount=il;class Oa extends $e{constructor(t,e=0,n){if(!(t instanceof Mt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof en||this.layout instanceof sn}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}F.OffsetLayout=Oa;class en extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntLE(t,n,this.span),this.span}}F.UInt=en;class sn extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readUIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeUIntBE(t,n,this.span),this.span}}F.UIntBE=sn;class pr extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntLE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntLE(t,n,this.span),this.span}}F.Int=pr;class Zr extends Mt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return xt(t).readIntBE(e,this.span)}encode(t,e,n=0){return xt(e).writeIntBE(t,n,this.span),this.span}}F.IntBE=Zr;const Vo=Math.pow(2,32);function Is(r){const t=Math.floor(r/Vo),e=r-t*Vo;return{hi32:t,lo32:e}}function xs(r,t){return r*Vo+t}class sl extends Mt{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readUInt32LE(e+4);return xs(i,s)}encode(t,e,n=0){const s=Is(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeUInt32LE(s.hi32,n+4),8}}F.NearUInt64=sl;class ol extends Mt{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32BE(e),i=n.readUInt32BE(e+4);return xs(s,i)}encode(t,e,n=0){const s=Is(t),i=xt(e);return i.writeUInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}F.NearUInt64BE=ol;class al extends Mt{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readUInt32LE(e),i=n.readInt32LE(e+4);return xs(i,s)}encode(t,e,n=0){const s=Is(t),i=xt(e);return i.writeUInt32LE(s.lo32,n),i.writeInt32LE(s.hi32,n+4),8}}F.NearInt64=al;class cl extends Mt{constructor(t){super(8,t)}decode(t,e=0){const n=xt(t),s=n.readInt32BE(e),i=n.readUInt32BE(e+4);return xs(s,i)}encode(t,e,n=0){const s=Is(t),i=xt(e);return i.writeInt32BE(s.hi32,n),i.writeUInt32BE(s.lo32,n+4),8}}F.NearInt64BE=cl;class ul extends Mt{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatLE(e)}encode(t,e,n=0){return xt(e).writeFloatLE(t,n),4}}F.Float=ul;class ll extends Mt{constructor(t){super(4,t)}decode(t,e=0){return xt(t).readFloatBE(e)}encode(t,e,n=0){return xt(e).writeFloatBE(t,n),4}}F.FloatBE=ll;class fl extends Mt{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleLE(e)}encode(t,e,n=0){return xt(e).writeDoubleLE(t,n),8}}F.Double=fl;class hl extends Mt{constructor(t){super(8,t)}decode(t,e=0){return xt(t).readDoubleBE(e)}encode(t,e,n=0){return xt(e).writeDoubleBE(t,n),8}}F.DoubleBE=hl;class dl extends Mt{constructor(t,e,n){if(!(t instanceof Mt))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof $e&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let s=-1;!(e instanceof $e)&&0<t.span&&(s=e*t.span),super(s,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,s=this.count;if(s instanceof $e&&(s=s.decode(t,e)),0<this.elementLayout.span)n=s*this.elementLayout.span;else{let i=0;for(;i<s;)n+=this.elementLayout.getSpan(t,e+n),++i}return n}decode(t,e=0){const n=[];let s=0,i=this.count;for(i instanceof $e&&(i=i.decode(t,e));s<i;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),s+=1;return n}encode(t,e,n=0){const s=this.elementLayout,i=t.reduce((o,a)=>o+s.encode(a,e,n+o),0);return this.count instanceof $e&&this.count.encode(t.length,e,n),i}}F.Sequence=dl;class pl extends Mt{constructor(t,e,n){if(!(Array.isArray(t)&&t.reduce((i,o)=>i&&o instanceof Mt,!0)))throw new TypeError("fields must be array of Layout instances");typeof e=="boolean"&&n===void 0&&(n=e,e=void 0);for(const i of t)if(0>i.span&&i.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let s=-1;try{s=t.reduce((i,o)=>i+o.getSpan(),0)}catch{}super(s,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce((s,i)=>{const o=i.getSpan(t,e);return e+=o,s+o},0)}catch{throw new RangeError("indeterminate span")}return n}decode(t,e=0){Yr(t);const n=this.makeDestinationObject();for(const s of this.fields)if(s.property!==void 0&&(n[s.property]=s.decode(t,e)),e+=s.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const s=n;let i=0,o=0;for(const a of this.fields){let u=a.span;if(o=0<u?u:0,a.property!==void 0){const p=t[a.property];p!==void 0&&(o=a.encode(p,e,n),0>u&&(u=a.getSpan(e,n)))}i=n,n+=u}return i+o-s}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)n.property!==void 0&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if(typeof t!="string")throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}F.Structure=pl;class Ua{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}F.UnionDiscriminator=Ua;class fs extends Ua{constructor(t,e){if(!(t instanceof $e&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}F.UnionLayoutDiscriminator=fs;class Wa extends Mt{constructor(t,e,n){let s;if(t instanceof en||t instanceof sn)s=new fs(new Oa(t));else if(t instanceof $e&&t.isCount())s=new fs(t);else if(t instanceof Ua)s=t;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(e===void 0&&(e=null),!(e===null||e instanceof Mt))throw new TypeError("defaultLayout must be null or a Layout");if(e!==null){if(0>e.span)throw new Error("defaultLayout must have constant span");e.property===void 0&&(e=e.replicate("content"))}let i=-1;e&&(i=e.span,0<=i&&(t instanceof en||t instanceof sn)&&(i+=s.layout.span)),super(i,n),this.discriminator=s,this.usesPrefixDiscriminator=t instanceof en||t instanceof sn,this.defaultLayout=e,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const s=this.discriminator,i=s.decode(t,e),o=this.registry[i];if(o===void 0){const a=this.defaultLayout;let u=0;this.usesPrefixDiscriminator&&(u=s.layout.span),n=this.makeDestinationObject(),n[s.property]=i,n[a.property]=a.decode(t,e+u)}else n=o.decode(t,e);return n}encode(t,e,n=0){const s=this.getSourceVariant(t);if(s===void 0){const i=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(t[i.property],e,n),a+o.encode(t[o.property],e,n+a)}return s.encode(t,e,n)}addVariant(t,e,n){const s=new gl(this,t,e,n);return this.registry[t]=s,s}getVariant(t,e=0){let n;return t instanceof Uint8Array?n=this.discriminator.decode(t,e):n=t,this.registry[n]}}F.Union=Wa;class gl extends Mt{constructor(t,e,n,s){if(!(t instanceof Wa))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if(typeof n=="string"&&s===void 0&&(s=n,n=null),n){if(!(n instanceof Mt))throw new TypeError("layout must be a Layout");if(t.defaultLayout!==null&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof s!="string")throw new TypeError("variant must have a String property")}let i=t.span;0>t.span&&(i=n?n.span:0,0<=i&&t.usesPrefixDiscriminator&&(i+=t.discriminator.layout.span)),super(i,s),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let s=0;return this.layout&&(s=this.layout.getSpan(t,e+n)),n+s}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let s=0;return this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+s):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let s=0;if(this.union.usesPrefixDiscriminator&&(s=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let i=s;if(this.layout&&(this.layout.encode(t[this.property],e,n+s),i+=this.layout.getSpan(e,n+s),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}F.VariantLayout=gl;function Ar(r){return 0>r&&(r+=4294967296),r}class Fa extends Mt{constructor(t,e,n){if(!(t instanceof en||t instanceof sn))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof e=="string"&&n===void 0&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let s=0;this._packedSetValue=function(i){return s=Ar(i),this},this._packedGetValue=function(){return s}}decode(t,e=0){const n=this.makeDestinationObject(),s=this.word.decode(t,e);this._packedSetValue(s);for(const i of this.fields)i.property!==void 0&&(n[i.property]=i.decode(t));return n}encode(t,e,n=0){const s=this.word.decode(e,n);this._packedSetValue(s);for(const i of this.fields)if(i.property!==void 0){const o=t[i.property];o!==void 0&&i.encode(o)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new za(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new yl(this,t);return this.fields.push(e),e}fieldFor(t){if(typeof t!="string")throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}F.BitStructure=Fa;class za{constructor(t,e,n){if(!(t instanceof Fa))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const s=8*t.span,i=t.fields.reduce((o,a)=>o+a.bits,0);if(e+i>s)throw new Error("bits too long for span remainder ("+(s-i)+" of "+s+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,e===32&&(this.valueMask=4294967295),this.start=i,this.container.msb&&(this.start=s-i-e),this.wordMask=Ar(this.valueMask<<this.start),this.property=n}decode(t,e){const n=this.container._packedGetValue();return Ar(n&this.wordMask)>>>this.start}encode(t){if(typeof t!="number"||!Number.isInteger(t)||t!==Ar(t&this.valueMask))throw new TypeError(Na("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=Ar(t<<this.start);this.container._packedSetValue(Ar(e&~this.wordMask)|n)}}F.BitField=za;let yl=class extends za{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){typeof t=="boolean"&&(t=+t),super.encode(t)}};F.Boolean=yl;class ml extends Mt{constructor(t,e){if(!(t instanceof $e&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof $e||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),xt(t).slice(e,e+n)}encode(t,e,n){let s=this.length;if(this.length instanceof $e&&(s=t.length),!(t instanceof Uint8Array&&s===t.length))throw new TypeError(Na("Blob.encode",this)+" requires (length "+s+") Uint8Array as src");if(n+s>e.length)throw new RangeError("encoding overruns Uint8Array");const i=xt(t);return xt(e).write(i.toString("hex"),n,s,"hex"),this.length instanceof $e&&this.length.encode(s,e,n),s}}F.Blob=ml;class wl extends Mt{constructor(t){super(-1,t)}getSpan(t,e=0){Yr(t);let n=e;for(;n<t.length&&t[n]!==0;)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return xt(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=La.Buffer.from(t,"utf8"),i=s.length;if(n+i>e.length)throw new RangeError("encoding overruns Buffer");const o=xt(e);return s.copy(o,n),o[n+i]=0,i+1}}F.CString=wl;class bl extends Mt{constructor(t,e){if(typeof t=="string"&&e===void 0&&(e=t,t=void 0),t===void 0)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return Yr(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return xt(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){typeof t!="string"&&(t=String(t));const s=La.Buffer.from(t,"utf8"),i=s.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>e.length)throw new RangeError("encoding overruns Buffer");return s.copy(xt(e),n),i}}F.UTF8=bl;class vl extends Mt{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}F.Constant=vl;F.greedy=(r,t)=>new il(r,t);var Gn=F.offset=(r,t,e)=>new Oa(r,t,e),At=F.u8=r=>new en(1,r),tn=F.u16=r=>new en(2,r);F.u24=r=>new en(3,r);var st=F.u32=r=>new en(4,r);F.u40=r=>new en(5,r);F.u48=r=>new en(6,r);var xe=F.nu64=r=>new sl(r);F.u16be=r=>new sn(2,r);F.u24be=r=>new sn(3,r);F.u32be=r=>new sn(4,r);F.u40be=r=>new sn(5,r);F.u48be=r=>new sn(6,r);F.nu64be=r=>new ol(r);F.s8=r=>new pr(1,r);F.s16=r=>new pr(2,r);F.s24=r=>new pr(3,r);F.s32=r=>new pr(4,r);F.s40=r=>new pr(5,r);F.s48=r=>new pr(6,r);var He=F.ns64=r=>new al(r);F.s16be=r=>new Zr(2,r);F.s24be=r=>new Zr(3,r);F.s32be=r=>new Zr(4,r);F.s40be=r=>new Zr(5,r);F.s48be=r=>new Zr(6,r);F.ns64be=r=>new cl(r);F.f32=r=>new ul(r);F.f32be=r=>new ll(r);F.f64=r=>new fl(r);F.f64be=r=>new hl(r);var ot=F.struct=(r,t,e)=>new pl(r,t,e);F.bits=(r,t,e)=>new Fa(r,t,e);var Me=F.seq=(r,t,e)=>new dl(r,t,e);F.union=(r,t,e)=>new Wa(r,t,e);F.unionLayoutDiscriminator=(r,t)=>new fs(r,t);var Ft=F.blob=(r,t)=>new ml(r,t);F.cstr=r=>new wl(r);F.utf8=(r,t)=>new bl(r,t);F.constant=(r,t)=>new vl(r,t);var zd=8078e3,Dd=8078001,Kd=8078004,$d=8078005,qd=8078006,Vd=8078011;function Sl(r){return Array.isArray(r)?"%5B"+r.map(Sl).join("%2C%20")+"%5D":typeof r=="bigint"?`${r}n`:encodeURIComponent(String(r!=null&&Object.getPrototypeOf(r)===null?{...r}:r))}function jd([r,t]){return`${r}=${Sl(t)}`}function Hd(r){const t=Object.entries(r).map(jd).join("&");return btoa(t)}function Gd(r,t={}){{let e=`Solana error #${r}; Decode this error by running \`npx @solana/errors decode -- ${r}`;return Object.keys(t).length&&(e+=` '${Hd(t)}'`),`${e}\``}}var Pr=class extends Error{constructor(...[t,e]){let n,s;if(e){const{cause:o,...a}=e;o&&(s={cause:o}),Object.keys(a).length>0&&(n=a)}const i=Gd(t,n);super(i,s);be(this,"cause",this.cause);be(this,"context");this.context={__code:t,...n},this.name="SolanaError"}};function Yd(r,t){return"fixedSize"in t?t.fixedSize:t.getSizeFromValue(r)}function Zd(r){return Object.freeze({...r,encode:t=>{const e=new Uint8Array(Yd(t,r));return r.write(t,e,0),e}})}function Jd(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}function Er(r){return"fixedSize"in r&&typeof r.fixedSize=="number"}function Xd(r,t){if(Er(r)!==Er(t))throw new Pr(Kd);if(Er(r)&&Er(t)&&r.fixedSize!==t.fixedSize)throw new Pr($d,{decoderFixedSize:t.fixedSize,encoderFixedSize:r.fixedSize});if(!Er(r)&&!Er(t)&&r.maxSize!==t.maxSize)throw new Pr(qd,{decoderMaxSize:t.maxSize,encoderMaxSize:r.maxSize});return{...t,...r,decode:t.decode,encode:r.encode,read:t.read,write:r.write}}function Qd(r,t,e=0){if(t.length-e<=0)throw new Pr(zd,{codecDescription:r})}function t0(r,t,e,n=0){const s=e.length-n;if(s<t)throw new Pr(Dd,{bytesLength:s,codecDescription:r,expected:t})}function e0(r,t,e,n){if(n<t||n>e)throw new Pr(Vd,{codecDescription:r,max:e,min:t,value:n})}function kl(r){return(r==null?void 0:r.endian)!==1}function n0(r){return Zd({fixedSize:r.size,write(t,e,n){r.range&&e0(r.name,r.range[0],r.range[1],t);const s=new ArrayBuffer(r.size);return r.set(new DataView(s),t,kl(r.config)),e.set(new Uint8Array(s),n),n+r.size}})}function r0(r){return Jd({fixedSize:r.size,read(t,e=0){Qd(r.name,t,e),t0(r.name,r.size,t,e);const n=new DataView(i0(t,e,r.size));return[r.get(n,kl(r.config)),e+r.size]}})}function i0(r,t,e){const n=r.byteOffset+(t??0),s=e??r.byteLength;return r.buffer.slice(n,n+s)}var El=(r={})=>n0({config:r,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(t,e,n)=>t.setBigUint64(0,BigInt(e),n),size:8}),s0=(r={})=>r0({config:r,get:(t,e)=>t.getBigUint64(0,e),name:"u64",size:8}),o0=(r={})=>Xd(El(r),s0(r));class a0 extends TypeError{constructor(t,e){let n;const{message:s,explanation:i,...o}=t,{path:a}=t,u=a.length===0?s:`At path: ${a.join(".")} -- ${s}`;super(i??u),i!=null&&(this.cause=u),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[t,...e()])}}function c0(r){return _i(r)&&typeof r[Symbol.iterator]=="function"}function _i(r){return typeof r=="object"&&r!=null}function hs(r){return _i(r)&&!Array.isArray(r)}function an(r){return typeof r=="symbol"?r.toString():typeof r=="string"?JSON.stringify(r):`${r}`}function u0(r){const{done:t,value:e}=r.next();return t?void 0:e}function l0(r,t,e,n){if(r===!0)return;r===!1?r={}:typeof r=="string"&&(r={message:r});const{path:s,branch:i}=t,{type:o}=e,{refinement:a,message:u=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${an(n)}\``}=r;return{value:n,type:o,refinement:a,key:s[s.length-1],path:s,branch:i,...r,message:u}}function*Uc(r,t,e,n){c0(r)||(r=[r]);for(const s of r){const i=l0(s,t,e,n);i&&(yield i)}}function*Da(r,t,e={}){const{path:n=[],branch:s=[r],coerce:i=!1,mask:o=!1}=e,a={path:n,branch:s,mask:o};i&&(r=t.coercer(r,a));let u="valid";for(const p of t.validator(r,a))p.explanation=e.message,u="not_valid",yield[p,void 0];for(let[p,m,A]of t.entries(r,a)){const S=Da(m,A,{path:p===void 0?n:[...n,p],branch:p===void 0?s:[...s,m],coerce:i,mask:o,message:e.message});for(const g of S)g[0]?(u=g[0].refinement!=null?"not_refined":"not_valid",yield[g[0],void 0]):i&&(m=g[1],p===void 0?r=m:r instanceof Map?r.set(p,m):r instanceof Set?r.add(m):_i(r)&&(m!==void 0||p in r)&&(r[p]=m))}if(u!=="not_valid")for(const p of t.refiner(r,a))p.explanation=e.message,u="not_refined",yield[p,void 0];u==="valid"&&(yield[void 0,r])}let Sn=class{constructor(t){const{type:e,schema:n,validator:s,refiner:i,coercer:o=u=>u,entries:a=function*(){}}=t;this.type=e,this.schema=n,this.entries=a,this.coercer=o,s?this.validator=(u,p)=>{const m=s(u,p);return Uc(m,p,this,u)}:this.validator=()=>[],i?this.refiner=(u,p)=>{const m=i(u,p);return Uc(m,p,this,u)}:this.refiner=()=>[]}assert(t,e){return Al(t,this,e)}create(t,e){return Q(t,this,e)}is(t){return _l(t,this)}mask(t,e){return f0(t,this,e)}validate(t,e={}){return Ii(t,this,e)}};function Al(r,t,e){const n=Ii(r,t,{message:e});if(n[0])throw n[0]}function Q(r,t,e){const n=Ii(r,t,{coerce:!0,message:e});if(n[0])throw n[0];return n[1]}function f0(r,t,e){const n=Ii(r,t,{coerce:!0,mask:!0,message:e});if(n[0])throw n[0];return n[1]}function _l(r,t){return!Ii(r,t)[0]}function Ii(r,t,e={}){const n=Da(r,t,e),s=u0(n);return s[0]?[new a0(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function gr(r,t){return new Sn({type:r,schema:null,validator:t})}function h0(){return gr("any",()=>!0)}function nt(r){return new Sn({type:"array",schema:r,*entries(t){if(r&&Array.isArray(t))for(const[e,n]of t.entries())yield[e,n,r]},coercer(t){return Array.isArray(t)?t.slice():t},validator(t){return Array.isArray(t)||`Expected an array value, but received: ${an(t)}`}})}function wn(){return gr("boolean",r=>typeof r=="boolean")}function Ka(r){return gr("instance",t=>t instanceof r||`Expected a \`${r.name}\` instance, but received: ${an(t)}`)}function Vt(r){const t=an(r),e=typeof r;return new Sn({type:"literal",schema:e==="string"||e==="number"||e==="boolean"?r:null,validator(n){return n===r||`Expected the literal \`${t}\`, but received: ${an(n)}`}})}function d0(){return gr("never",()=>!1)}function rt(r){return new Sn({...r,validator:(t,e)=>t===null||r.validator(t,e),refiner:(t,e)=>t===null||r.refiner(t,e)})}function U(){return gr("number",r=>typeof r=="number"&&!isNaN(r)||`Expected a number, but received: ${an(r)}`)}function ut(r){return new Sn({...r,validator:(t,e)=>t===void 0||r.validator(t,e),refiner:(t,e)=>t===void 0||r.refiner(t,e)})}function Il(r,t){return new Sn({type:"record",schema:null,*entries(e){if(_i(e))for(const n in e){const s=e[n];yield[n,n,r],yield[n,s,t]}},validator(e){return hs(e)||`Expected an object, but received: ${an(e)}`},coercer(e){return hs(e)?{...e}:e}})}function H(){return gr("string",r=>typeof r=="string"||`Expected a string, but received: ${an(r)}`)}function $a(r){const t=d0();return new Sn({type:"tuple",schema:null,*entries(e){if(Array.isArray(e)){const n=Math.max(r.length,e.length);for(let s=0;s<n;s++)yield[s,e[s],r[s]||t]}},validator(e){return Array.isArray(e)||`Expected an array, but received: ${an(e)}`},coercer(e){return Array.isArray(e)?e.slice():e}})}function q(r){const t=Object.keys(r);return new Sn({type:"type",schema:r,*entries(e){if(_i(e))for(const n of t)yield[n,e[n],r[n]]},validator(e){return hs(e)||`Expected an object, but received: ${an(e)}`},coercer(e){return hs(e)?{...e}:e}})}function ze(r){const t=r.map(e=>e.type).join(" | ");return new Sn({type:"union",schema:null,coercer(e,n){for(const s of r){const[i,o]=s.validate(e,{coerce:!0,mask:n.mask});if(!i)return o}return e},validator(e,n){const s=[];for(const i of r){const[...o]=Da(e,i,n),[a]=o;if(a[0])for(const[u]of o)u&&s.push(u);else return[]}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${an(e)}`,...s]}})}function Jr(){return gr("unknown",()=>!0)}function xi(r,t,e){return new Sn({...r,coercer:(n,s)=>_l(n,t)?r.coercer(e(n,s),s):r.coercer(n,s)})}var Wi,p0=new Uint8Array(16);function xl(){if(!Wi&&(Wi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Wi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Wi(p0)}const g0=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Bs(r){return typeof r=="string"&&g0.test(r)}var Ie=[];for(var bo=0;bo<256;++bo)Ie.push((bo+256).toString(16).substr(1));function Rs(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=(Ie[r[t+0]]+Ie[r[t+1]]+Ie[r[t+2]]+Ie[r[t+3]]+"-"+Ie[r[t+4]]+Ie[r[t+5]]+"-"+Ie[r[t+6]]+Ie[r[t+7]]+"-"+Ie[r[t+8]]+Ie[r[t+9]]+"-"+Ie[r[t+10]]+Ie[r[t+11]]+Ie[r[t+12]]+Ie[r[t+13]]+Ie[r[t+14]]+Ie[r[t+15]]).toLowerCase();if(!Bs(e))throw TypeError("Stringified UUID is invalid");return e}var Wc,vo,So=0,ko=0;function y0(r,t,e){var n=t&&e||0,s=t||new Array(16);r=r||{};var i=r.node||Wc,o=r.clockseq!==void 0?r.clockseq:vo;if(i==null||o==null){var a=r.random||(r.rng||xl)();i==null&&(i=Wc=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=vo=(a[6]<<8|a[7])&16383)}var u=r.msecs!==void 0?r.msecs:Date.now(),p=r.nsecs!==void 0?r.nsecs:ko+1,m=u-So+(p-ko)/1e4;if(m<0&&r.clockseq===void 0&&(o=o+1&16383),(m<0||u>So)&&r.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");So=u,ko=p,vo=o,u+=122192928e5;var A=((u&268435455)*1e4+p)%4294967296;s[n++]=A>>>24&255,s[n++]=A>>>16&255,s[n++]=A>>>8&255,s[n++]=A&255;var S=u/4294967296*1e4&268435455;s[n++]=S>>>8&255,s[n++]=S&255,s[n++]=S>>>24&15|16,s[n++]=S>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var g=0;g<6;++g)s[n+g]=i[g];return t||Rs(s)}function Bl(r){if(!Bs(r))throw TypeError("Invalid UUID");var t,e=new Uint8Array(16);return e[0]=(t=parseInt(r.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(r.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(r.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(r.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(r.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function m0(r){r=unescape(encodeURIComponent(r));for(var t=[],e=0;e<r.length;++e)t.push(r.charCodeAt(e));return t}var w0="6ba7b810-9dad-11d1-80b4-00c04fd430c8",b0="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Rl(r,t,e){function n(s,i,o,a){if(typeof s=="string"&&(s=m0(s)),typeof i=="string"&&(i=Bl(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var u=new Uint8Array(16+s.length);if(u.set(i),u.set(s,i.length),u=e(u),u[6]=u[6]&15|t,u[8]=u[8]&63|128,o){a=a||0;for(var p=0;p<16;++p)o[a+p]=u[p];return o}return Rs(u)}try{n.name=r}catch{}return n.DNS=w0,n.URL=b0,n}function v0(r){if(typeof r=="string"){var t=unescape(encodeURIComponent(r));r=new Uint8Array(t.length);for(var e=0;e<t.length;++e)r[e]=t.charCodeAt(e)}return S0(k0(E0(r),r.length*8))}function S0(r){for(var t=[],e=r.length*32,n="0123456789abcdef",s=0;s<e;s+=8){var i=r[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);t.push(o)}return t}function Ml(r){return(r+64>>>9<<4)+14+1}function k0(r,t){r[t>>5]|=128<<t%32,r[Ml(t)-1]=t;for(var e=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<r.length;o+=16){var a=e,u=n,p=s,m=i;e=Pe(e,n,s,i,r[o],7,-680876936),i=Pe(i,e,n,s,r[o+1],12,-389564586),s=Pe(s,i,e,n,r[o+2],17,606105819),n=Pe(n,s,i,e,r[o+3],22,-1044525330),e=Pe(e,n,s,i,r[o+4],7,-176418897),i=Pe(i,e,n,s,r[o+5],12,1200080426),s=Pe(s,i,e,n,r[o+6],17,-1473231341),n=Pe(n,s,i,e,r[o+7],22,-45705983),e=Pe(e,n,s,i,r[o+8],7,1770035416),i=Pe(i,e,n,s,r[o+9],12,-1958414417),s=Pe(s,i,e,n,r[o+10],17,-42063),n=Pe(n,s,i,e,r[o+11],22,-1990404162),e=Pe(e,n,s,i,r[o+12],7,1804603682),i=Pe(i,e,n,s,r[o+13],12,-40341101),s=Pe(s,i,e,n,r[o+14],17,-1502002290),n=Pe(n,s,i,e,r[o+15],22,1236535329),e=Le(e,n,s,i,r[o+1],5,-165796510),i=Le(i,e,n,s,r[o+6],9,-1069501632),s=Le(s,i,e,n,r[o+11],14,643717713),n=Le(n,s,i,e,r[o],20,-373897302),e=Le(e,n,s,i,r[o+5],5,-701558691),i=Le(i,e,n,s,r[o+10],9,38016083),s=Le(s,i,e,n,r[o+15],14,-660478335),n=Le(n,s,i,e,r[o+4],20,-405537848),e=Le(e,n,s,i,r[o+9],5,568446438),i=Le(i,e,n,s,r[o+14],9,-1019803690),s=Le(s,i,e,n,r[o+3],14,-187363961),n=Le(n,s,i,e,r[o+8],20,1163531501),e=Le(e,n,s,i,r[o+13],5,-1444681467),i=Le(i,e,n,s,r[o+2],9,-51403784),s=Le(s,i,e,n,r[o+7],14,1735328473),n=Le(n,s,i,e,r[o+12],20,-1926607734),e=Ne(e,n,s,i,r[o+5],4,-378558),i=Ne(i,e,n,s,r[o+8],11,-2022574463),s=Ne(s,i,e,n,r[o+11],16,1839030562),n=Ne(n,s,i,e,r[o+14],23,-35309556),e=Ne(e,n,s,i,r[o+1],4,-1530992060),i=Ne(i,e,n,s,r[o+4],11,1272893353),s=Ne(s,i,e,n,r[o+7],16,-155497632),n=Ne(n,s,i,e,r[o+10],23,-1094730640),e=Ne(e,n,s,i,r[o+13],4,681279174),i=Ne(i,e,n,s,r[o],11,-358537222),s=Ne(s,i,e,n,r[o+3],16,-722521979),n=Ne(n,s,i,e,r[o+6],23,76029189),e=Ne(e,n,s,i,r[o+9],4,-640364487),i=Ne(i,e,n,s,r[o+12],11,-421815835),s=Ne(s,i,e,n,r[o+15],16,530742520),n=Ne(n,s,i,e,r[o+2],23,-995338651),e=Oe(e,n,s,i,r[o],6,-198630844),i=Oe(i,e,n,s,r[o+7],10,1126891415),s=Oe(s,i,e,n,r[o+14],15,-1416354905),n=Oe(n,s,i,e,r[o+5],21,-57434055),e=Oe(e,n,s,i,r[o+12],6,1700485571),i=Oe(i,e,n,s,r[o+3],10,-1894986606),s=Oe(s,i,e,n,r[o+10],15,-1051523),n=Oe(n,s,i,e,r[o+1],21,-2054922799),e=Oe(e,n,s,i,r[o+8],6,1873313359),i=Oe(i,e,n,s,r[o+15],10,-30611744),s=Oe(s,i,e,n,r[o+6],15,-1560198380),n=Oe(n,s,i,e,r[o+13],21,1309151649),e=Oe(e,n,s,i,r[o+4],6,-145523070),i=Oe(i,e,n,s,r[o+11],10,-1120210379),s=Oe(s,i,e,n,r[o+2],15,718787259),n=Oe(n,s,i,e,r[o+9],21,-343485551),e=jn(e,a),n=jn(n,u),s=jn(s,p),i=jn(i,m)}return[e,n,s,i]}function E0(r){if(r.length===0)return[];for(var t=r.length*8,e=new Uint32Array(Ml(t)),n=0;n<t;n+=8)e[n>>5]|=(r[n/8]&255)<<n%32;return e}function jn(r,t){var e=(r&65535)+(t&65535),n=(r>>16)+(t>>16)+(e>>16);return n<<16|e&65535}function A0(r,t){return r<<t|r>>>32-t}function Ms(r,t,e,n,s,i){return jn(A0(jn(jn(t,r),jn(n,i)),s),e)}function Pe(r,t,e,n,s,i,o){return Ms(t&e|~t&n,r,t,s,i,o)}function Le(r,t,e,n,s,i,o){return Ms(t&n|e&~n,r,t,s,i,o)}function Ne(r,t,e,n,s,i,o){return Ms(t^e^n,r,t,s,i,o)}function Oe(r,t,e,n,s,i,o){return Ms(e^(t|~n),r,t,s,i,o)}var _0=Rl("v3",48,v0);function I0(r,t,e){r=r||{};var n=r.random||(r.rng||xl)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(var s=0;s<16;++s)t[e+s]=n[s];return t}return Rs(n)}function x0(r,t,e,n){switch(r){case 0:return t&e^~t&n;case 1:return t^e^n;case 2:return t&e^t&n^e&n;case 3:return t^e^n}}function Eo(r,t){return r<<t|r>>>32-t}function B0(r){var t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=[];for(var s=0;s<n.length;++s)r.push(n.charCodeAt(s))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var i=r.length/4+2,o=Math.ceil(i/16),a=new Array(o),u=0;u<o;++u){for(var p=new Uint32Array(16),m=0;m<16;++m)p[m]=r[u*64+m*4]<<24|r[u*64+m*4+1]<<16|r[u*64+m*4+2]<<8|r[u*64+m*4+3];a[u]=p}a[o-1][14]=(r.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(r.length-1)*8&4294967295;for(var A=0;A<o;++A){for(var S=new Uint32Array(80),g=0;g<16;++g)S[g]=a[A][g];for(var E=16;E<80;++E)S[E]=Eo(S[E-3]^S[E-8]^S[E-14]^S[E-16],1);for(var R=e[0],T=e[1],M=e[2],N=e[3],P=e[4],W=0;W<80;++W){var K=Math.floor(W/20),$=Eo(R,5)+x0(K,T,M,N)+P+t[K]+S[W]>>>0;P=N,N=M,M=Eo(T,30)>>>0,T=R,R=$}e[0]=e[0]+R>>>0,e[1]=e[1]+T>>>0,e[2]=e[2]+M>>>0,e[3]=e[3]+N>>>0,e[4]=e[4]+P>>>0}return[e[0]>>24&255,e[0]>>16&255,e[0]>>8&255,e[0]&255,e[1]>>24&255,e[1]>>16&255,e[1]>>8&255,e[1]&255,e[2]>>24&255,e[2]>>16&255,e[2]>>8&255,e[2]&255,e[3]>>24&255,e[3]>>16&255,e[3]>>8&255,e[3]&255,e[4]>>24&255,e[4]>>16&255,e[4]>>8&255,e[4]&255]}var R0=Rl("v5",80,B0);const M0="00000000-0000-0000-0000-000000000000";function T0(r){if(!Bs(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const C0=Object.freeze(Object.defineProperty({__proto__:null,NIL:M0,parse:Bl,stringify:Rs,v1:y0,v3:_0,v4:I0,v5:R0,validate:Bs,version:T0},Symbol.toStringTag,{value:"Module"})),Tl=ka(C0),P0=Tl.v4,L0=function(r,t,e,n){if(typeof r!="string")throw new TypeError(r+" must be a string");n=n||{};const s=typeof n.version=="number"?n.version:2;if(s!==1&&s!==2)throw new TypeError(s+" must be 1 or 2");const i={method:r};if(s===2&&(i.jsonrpc="2.0"),t){if(typeof t!="object"&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");i.params=t}if(typeof e>"u"){const o=typeof n.generator=="function"?n.generator:function(){return P0()};i.id=o(i,n)}else s===2&&e===null?n.notificationIdNull&&(i.id=null):i.id=e;return i};var N0=L0;const O0=Tl.v4,U0=N0,gi=function(r,t){if(!(this instanceof gi))return new gi(r,t);t||(t={}),this.options={reviver:typeof t.reviver<"u"?t.reviver:null,replacer:typeof t.replacer<"u"?t.replacer:null,generator:typeof t.generator<"u"?t.generator:function(){return O0()},version:typeof t.version<"u"?t.version:2,notificationIdNull:typeof t.notificationIdNull=="boolean"?t.notificationIdNull:!1},this.callServer=r};var W0=gi;gi.prototype.request=function(r,t,e,n){const s=this;let i=null;const o=Array.isArray(r)&&typeof t=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&r&&typeof r=="object"&&typeof t=="function")n=t,i=r;else{typeof e=="function"&&(n=e,e=void 0);const p=typeof n=="function";try{i=U0(r,t,e,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(m){if(p)return n(m);throw m}if(!p)return i}let u;try{u=JSON.stringify(i,this.options.replacer)}catch(p){return n(p)}return this.callServer(u,function(p,m){s._parseResponse(p,m,n)}),i};gi.prototype._parseResponse=function(r,t,e){if(r){e(r);return}if(!t)return e();let n;try{n=JSON.parse(t,this.options.reviver)}catch(s){return e(s)}if(e.length===3)if(Array.isArray(n)){const s=function(o){return typeof o.error<"u"},i=function(o){return!s(o)};return e(null,n.filter(s),n.filter(i))}else return e(null,n.error,n.result);e(null,n)};const F0=Si(W0);var Cl={exports:{}};(function(r){var t=Object.prototype.hasOwnProperty,e="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(e=!1));function s(u,p,m){this.fn=u,this.context=p,this.once=m||!1}function i(u,p,m,A,S){if(typeof m!="function")throw new TypeError("The listener must be a function");var g=new s(m,A||u,S),E=e?e+p:p;return u._events[E]?u._events[E].fn?u._events[E]=[u._events[E],g]:u._events[E].push(g):(u._events[E]=g,u._eventsCount++),u}function o(u,p){--u._eventsCount===0?u._events=new n:delete u._events[p]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var p=[],m,A;if(this._eventsCount===0)return p;for(A in m=this._events)t.call(m,A)&&p.push(e?A.slice(1):A);return Object.getOwnPropertySymbols?p.concat(Object.getOwnPropertySymbols(m)):p},a.prototype.listeners=function(p){var m=e?e+p:p,A=this._events[m];if(!A)return[];if(A.fn)return[A.fn];for(var S=0,g=A.length,E=new Array(g);S<g;S++)E[S]=A[S].fn;return E},a.prototype.listenerCount=function(p){var m=e?e+p:p,A=this._events[m];return A?A.fn?1:A.length:0},a.prototype.emit=function(p,m,A,S,g,E){var R=e?e+p:p;if(!this._events[R])return!1;var T=this._events[R],M=arguments.length,N,P;if(T.fn){switch(T.once&&this.removeListener(p,T.fn,void 0,!0),M){case 1:return T.fn.call(T.context),!0;case 2:return T.fn.call(T.context,m),!0;case 3:return T.fn.call(T.context,m,A),!0;case 4:return T.fn.call(T.context,m,A,S),!0;case 5:return T.fn.call(T.context,m,A,S,g),!0;case 6:return T.fn.call(T.context,m,A,S,g,E),!0}for(P=1,N=new Array(M-1);P<M;P++)N[P-1]=arguments[P];T.fn.apply(T.context,N)}else{var W=T.length,K;for(P=0;P<W;P++)switch(T[P].once&&this.removeListener(p,T[P].fn,void 0,!0),M){case 1:T[P].fn.call(T[P].context);break;case 2:T[P].fn.call(T[P].context,m);break;case 3:T[P].fn.call(T[P].context,m,A);break;case 4:T[P].fn.call(T[P].context,m,A,S);break;default:if(!N)for(K=1,N=new Array(M-1);K<M;K++)N[K-1]=arguments[K];T[P].fn.apply(T[P].context,N)}}return!0},a.prototype.on=function(p,m,A){return i(this,p,m,A,!1)},a.prototype.once=function(p,m,A){return i(this,p,m,A,!0)},a.prototype.removeListener=function(p,m,A,S){var g=e?e+p:p;if(!this._events[g])return this;if(!m)return o(this,g),this;var E=this._events[g];if(E.fn)E.fn===m&&(!S||E.once)&&(!A||E.context===A)&&o(this,g);else{for(var R=0,T=[],M=E.length;R<M;R++)(E[R].fn!==m||S&&!E[R].once||A&&E[R].context!==A)&&T.push(E[R]);T.length?this._events[g]=T.length===1?T[0]:T:o(this,g)}return this},a.prototype.removeAllListeners=function(p){var m;return p?(m=e?e+p:p,this._events[m]&&o(this,m)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=e,a.EventEmitter=a,r.exports=a})(Cl);var z0=Cl.exports;const qa=Si(z0);var D0=class extends qa{constructor(t,e,n){super();be(this,"socket");this.socket=new window.WebSocket(t,n),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=s=>this.emit("message",s.data),this.socket.onerror=s=>this.emit("error",s),this.socket.onclose=s=>{this.emit("close",s.code,s.reason)}}send(t,e,n){const s=n||e;try{this.socket.send(t),s()}catch(i){s(i)}}close(t,e){this.socket.close(t,e)}addEventListener(t,e,n){this.socket.addEventListener(t,e,n)}};function K0(r,t){return new D0(r,t)}var $0=class{encode(r){return JSON.stringify(r)}decode(r){return JSON.parse(r)}},q0=class extends qa{constructor(t,e="ws://localhost:8080",{autoconnect:n=!0,reconnect:s=!0,reconnect_interval:i=1e3,max_reconnects:o=5,...a}={},u,p){super();be(this,"address");be(this,"rpc_id");be(this,"queue");be(this,"options");be(this,"autoconnect");be(this,"ready");be(this,"reconnect");be(this,"reconnect_timer_id");be(this,"reconnect_interval");be(this,"max_reconnects");be(this,"rest_options");be(this,"current_reconnects");be(this,"generate_request_id");be(this,"socket");be(this,"webSocketFactory");be(this,"dataPack");this.webSocketFactory=t,this.queue={},this.rpc_id=0,this.address=e,this.autoconnect=n,this.ready=!1,this.reconnect=s,this.reconnect_timer_id=void 0,this.reconnect_interval=i,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=u||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),p?this.dataPack=p:this.dataPack=new $0,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(t,e,n,s){return!s&&typeof n=="object"&&(s=n,n=null),new Promise((i,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(t,e),u={jsonrpc:"2.0",method:t,params:e||void 0,id:a};this.socket.send(this.dataPack.encode(u),s,p=>{if(p)return o(p);this.queue[a]={promise:[i,o]},n&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},n))})})}async login(t){const e=await this.call("rpc.login",t);if(!e)throw new Error("authentication failed");return e}async listMethods(){return await this.call("__listMethods")}notify(t,e){return new Promise((n,s)=>{if(!this.ready)return s(new Error("socket not ready"));const i={jsonrpc:"2.0",method:t,params:e};this.socket.send(this.dataPack.encode(i),o=>{if(o)return s(o);n()})})}async subscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.on",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed subscribing to an event '"+t+"' with: "+e[t]);return e}async unsubscribe(t){typeof t=="string"&&(t=[t]);const e=await this.call("rpc.off",t);if(typeof t=="string"&&e[t]!=="ok")throw new Error("Failed unsubscribing from an event with: "+e);return e}close(t,e){this.socket&&this.socket.close(t||1e3,e)}setAutoReconnect(t){this.reconnect=t}setReconnectInterval(t){this.reconnect_interval=t}setMaxReconnects(t){this.max_reconnects=t}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(t,e){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(t,e),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:n})=>{n instanceof ArrayBuffer&&(n=lt.Buffer.from(n).toString());try{n=this.dataPack.decode(n)}catch{return}if(n.notification&&this.listeners(n.notification).length){if(!Object.keys(n.params).length)return this.emit(n.notification);const s=[n.notification];if(n.params.constructor===Object)s.push(n.params);else for(let i=0;i<n.params.length;i++)s.push(n.params[i]);return Promise.resolve().then(()=>{this.emit.apply(this,s)})}if(!this.queue[n.id])return n.method?Promise.resolve().then(()=>{this.emit(n.method,n==null?void 0:n.params)}):void 0;"error"in n=="result"in n&&this.queue[n.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[n.id].timeout&&clearTimeout(this.queue[n.id].timeout),n.error?this.queue[n.id].promise[1](n.error):this.queue[n.id].promise[0](n.result),delete this.queue[n.id]}),this.socket.addEventListener("error",n=>this.emit("error",n)),this.socket.addEventListener("close",({code:n,reason:s})=>{this.ready&&setTimeout(()=>this.emit("close",n,s),0),this.ready=!1,this.socket=void 0,n!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(t,e),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",n,s),1))})}};const V0=BigInt(0),ei=BigInt(1),j0=BigInt(2),H0=BigInt(7),G0=BigInt(256),Y0=BigInt(113),Pl=[],Ll=[],Nl=[];for(let r=0,t=ei,e=1,n=0;r<24;r++){[e,n]=[n,(2*e+3*n)%5],Pl.push(2*(5*n+e)),Ll.push((r+1)*(r+2)/2%64);let s=V0;for(let i=0;i<7;i++)t=(t<<ei^(t>>H0)*Y0)%G0,t&j0&&(s^=ei<<(ei<<BigInt(i))-ei);Nl.push(s)}const Ol=_u(Nl,!0),Z0=Ol[0],J0=Ol[1],Fc=(r,t,e)=>e>32?bh(r,t,e):mh(r,t,e),zc=(r,t,e)=>e>32?vh(r,t,e):wh(r,t,e);function X0(r,t=24){const e=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let o=0;o<10;o++)e[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,u=(o+2)%10,p=e[u],m=e[u+1],A=Fc(p,m,1)^e[a],S=zc(p,m,1)^e[a+1];for(let g=0;g<50;g+=10)r[o+g]^=A,r[o+g+1]^=S}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=Ll[o],u=Fc(s,i,a),p=zc(s,i,a),m=Pl[o];s=r[m],i=r[m+1],r[m]=u,r[m+1]=p}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)e[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~e[(a+2)%10]&e[(a+4)%10]}r[0]^=Z0[n],r[1]^=J0[n]}Zn(e)}class Va extends Aa{constructor(t,e,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=e,this.outputLen=n,this.enableXOF=s,this.rounds=i,di(n),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=ah(this.state)}clone(){return this._cloneInto()}keccak(){kc(this.state32),X0(this.state32,this.rounds),kc(this.state32),this.posOut=0,this.pos=0}update(t){Fr(this),t=Es(t),Pn(t);const{blockLen:e,state:n}=this,s=t.length;for(let i=0;i<s;){const o=Math.min(e-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=t[i++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:e,pos:n,blockLen:s}=this;t[n]^=e,e&128&&n===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Fr(this,!1),Pn(t),this.finish();const e=this.state,{blockLen:n}=this;for(let s=0,i=t.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);t.set(e.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return di(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ku(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Zn(this.state)}_cloneInto(t){const{blockLen:e,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return t||(t=new Va(e,n,s,o,i)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=i,t.suffix=n,t.outputLen=s,t.enableXOF=o,t.destroyed=this.destroyed,t}}const Q0=(r,t,e)=>_a(()=>new Va(t,r,e)),Dc=Q0(1,136,256/8);class Ul extends Aa{constructor(t,e){super(),this.finished=!1,this.destroyed=!1,Su(t);const n=Es(e);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,i=new Uint8Array(s);i.set(n.length>s?t.create().update(n).digest():n);for(let o=0;o<i.length;o++)i[o]^=54;this.iHash.update(i),this.oHash=t.create();for(let o=0;o<i.length;o++)i[o]^=106;this.oHash.update(i),Zn(i)}update(t){return Fr(this),this.iHash.update(t),this}digestInto(t){Fr(this),Pn(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:e,iHash:n,finished:s,destroyed:i,blockLen:o,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=i,t.blockLen=o,t.outputLen=a,t.oHash=e._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const Wl=(r,t,e)=>new Ul(r,t).update(e).digest();Wl.create=(r,t)=>new Ul(r,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Kc=(r,t)=>(r+(r>=0?t:-t)/Fl)/t;function tp(r,t,e){const[[n,s],[i,o]]=t,a=Kc(o*r,e),u=Kc(-s*r,e);let p=r-a*n-u*i,m=-a*s-u*o;const A=p<Cn,S=m<Cn;A&&(p=-p),S&&(m=-m);const g=Ei(Math.ceil(Mu(e)/2))+Lr;if(p<Cn||p>=g||m<Cn||m>=g)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:A,k1:p,k2neg:S,k2:m}}function jo(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function Ao(r,t){const e={};for(let n of Object.keys(t))e[n]=r[n]===void 0?t[n]:r[n];return lr(e.lowS,"lowS"),lr(e.prehash,"prehash"),e.format!==void 0&&jo(e.format),e}class ep extends Error{constructor(t=""){super(t)}}const xn={Err:ep,_tlv:{encode:(r,t)=>{const{Err:e}=xn;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length&1)throw new e("tlv.encode: unpadded data");const n=t.length/2,s=Ni(n);if(s.length/2&128)throw new e("tlv.encode: long form length too big");const i=n>127?Ni(s.length/2|128):"";return Ni(r)+i+s+t},decode(r,t){const{Err:e}=xn;let n=0;if(r<0||r>256)throw new e("tlv.encode: wrong tag");if(t.length<2||t[n++]!==r)throw new e("tlv.decode: wrong tlv");const s=t[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const u=s&127;if(!u)throw new e("tlv.decode(long): indefinite length not supported");if(u>4)throw new e("tlv.decode(long): byte length is too big");const p=t.subarray(n,n+u);if(p.length!==u)throw new e("tlv.decode: length bytes not complete");if(p[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(const m of p)o=o<<8|m;if(n+=u,o<128)throw new e("tlv.decode(long): not minimal encoding")}const a=t.subarray(n,n+o);if(a.length!==o)throw new e("tlv.decode: wrong value length");return{v:a,l:t.subarray(n+o)}}},_int:{encode(r){const{Err:t}=xn;if(r<Cn)throw new t("integer: negative integers are not allowed");let e=Ni(r);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return e},decode(r){const{Err:t}=xn;if(r[0]&128)throw new t("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return As(r)}},toSig(r){const{Err:t,_int:e,_tlv:n}=xn,s=te("signature",r),{v:i,l:o}=n.decode(48,s);if(o.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:u}=n.decode(2,i),{v:p,l:m}=n.decode(2,u);if(m.length)throw new t("invalid signature: left bytes after parsing");return{r:e.decode(a),s:e.decode(p)}},hexFromSig(r){const{_tlv:t,_int:e}=xn,n=t.encode(2,e.encode(r.r)),s=t.encode(2,e.encode(r.s)),i=n+s;return t.encode(48,i)}},Cn=BigInt(0),Lr=BigInt(1),Fl=BigInt(2),Fi=BigInt(3),np=BigInt(4);function Mr(r,t){const{BYTES:e}=r;let n;if(typeof t=="bigint")n=t;else{let s=te("private key",t);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${e}, got ${typeof t}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function rp(r,t={}){const e=ju("weierstrass",r,t),{Fp:n,Fn:s}=e;let i=e.CURVE;const{h:o,n:a}=i;Ai(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:u}=t;if(u&&(!n.is0(i.a)||typeof u.beta!="bigint"||!Array.isArray(u.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const p=Dl(n,s);function m(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function A(J,b,c){const{x:h,y}=b.toAffine(),k=n.toBytes(h);if(lr(c,"isCompressed"),c){m();const I=!n.isOdd(y);return hn(zl(I),k)}else return hn(Uint8Array.of(4),k,n.toBytes(y))}function S(J){rn(J,void 0,"Point");const{publicKey:b,publicKeyUncompressed:c}=p,h=J.length,y=J[0],k=J.subarray(1);if(h===b&&(y===2||y===3)){const I=n.fromBytes(k);if(!n.isValid(I))throw new Error("bad point: is not on curve, wrong x");const B=R(I);let C;try{C=n.sqrt(B)}catch(x){const et=x instanceof Error?": "+x.message:"";throw new Error("bad point: is not on curve, sqrt error"+et)}m();const v=n.isOdd(C);return(y&1)===1!==v&&(C=n.neg(C)),{x:I,y:C}}else if(h===c&&y===4){const I=n.BYTES,B=n.fromBytes(k.subarray(0,I)),C=n.fromBytes(k.subarray(I,I*2));if(!T(B,C))throw new Error("bad point: is not on curve");return{x:B,y:C}}else throw new Error(`bad point: got length ${h}, expected compressed=${b} or uncompressed=${c}`)}const g=t.toBytes||A,E=t.fromBytes||S;function R(J){const b=n.sqr(J),c=n.mul(b,J);return n.add(n.add(c,n.mul(J,i.a)),i.b)}function T(J,b){const c=n.sqr(b),h=R(J);return n.eql(c,h)}if(!T(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const M=n.mul(n.pow(i.a,Fi),np),N=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(M,N)))throw new Error("bad curve params: a or b");function P(J,b,c=!1){if(!n.isValid(b)||c&&n.is0(b))throw new Error(`bad point coordinate ${J}`);return b}function W(J){if(!(J instanceof D))throw new Error("ProjectivePoint expected")}function K(J){if(!u||!u.basises)throw new Error("no endo");return tp(J,u.basises,s.ORDER)}const $=ss((J,b)=>{const{X:c,Y:h,Z:y}=J;if(n.eql(y,n.ONE))return{x:c,y:h};const k=J.is0();b==null&&(b=k?n.ONE:n.inv(y));const I=n.mul(c,b),B=n.mul(h,b),C=n.mul(y,b);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:I,y:B}}),V=ss(J=>{if(J.is0()){if(t.allowInfinityPoint&&!n.is0(J.Y))return;throw new Error("bad point: ZERO")}const{x:b,y:c}=J.toAffine();if(!n.isValid(b)||!n.isValid(c))throw new Error("bad point: x or y not field elements");if(!T(b,c))throw new Error("bad point: equation left != right");if(!J.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function j(J,b,c,h,y){return c=new D(n.mul(c.X,J),c.Y,c.Z),b=os(h,b),c=os(y,c),b.add(c)}class D{constructor(b,c,h){this.X=P("x",b),this.Y=P("y",c,!0),this.Z=P("z",h),Object.freeze(this)}static CURVE(){return i}static fromAffine(b){const{x:c,y:h}=b||{};if(!b||!n.isValid(c)||!n.isValid(h))throw new Error("invalid affine point");if(b instanceof D)throw new Error("projective point not allowed");return n.is0(c)&&n.is0(h)?D.ZERO:new D(c,h,n.ONE)}static fromBytes(b){const c=D.fromAffine(E(rn(b,void 0,"point")));return c.assertValidity(),c}static fromHex(b){return D.fromBytes(te("pointHex",b))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(b=8,c=!0){return X.createCache(this,b),c||this.multiply(Fi),this}assertValidity(){V(this)}hasEvenY(){const{y:b}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(b)}equals(b){W(b);const{X:c,Y:h,Z:y}=this,{X:k,Y:I,Z:B}=b,C=n.eql(n.mul(c,B),n.mul(k,y)),v=n.eql(n.mul(h,B),n.mul(I,y));return C&&v}negate(){return new D(this.X,n.neg(this.Y),this.Z)}double(){const{a:b,b:c}=i,h=n.mul(c,Fi),{X:y,Y:k,Z:I}=this;let B=n.ZERO,C=n.ZERO,v=n.ZERO,f=n.mul(y,y),x=n.mul(k,k),et=n.mul(I,I),G=n.mul(y,k);return G=n.add(G,G),v=n.mul(y,I),v=n.add(v,v),B=n.mul(b,v),C=n.mul(h,et),C=n.add(B,C),B=n.sub(x,C),C=n.add(x,C),C=n.mul(B,C),B=n.mul(G,B),v=n.mul(h,v),et=n.mul(b,et),G=n.sub(f,et),G=n.mul(b,G),G=n.add(G,v),v=n.add(f,f),f=n.add(v,f),f=n.add(f,et),f=n.mul(f,G),C=n.add(C,f),et=n.mul(k,I),et=n.add(et,et),f=n.mul(et,G),B=n.sub(B,f),v=n.mul(et,x),v=n.add(v,v),v=n.add(v,v),new D(B,C,v)}add(b){W(b);const{X:c,Y:h,Z:y}=this,{X:k,Y:I,Z:B}=b;let C=n.ZERO,v=n.ZERO,f=n.ZERO;const x=i.a,et=n.mul(i.b,Fi);let G=n.mul(c,k),it=n.mul(h,I),vt=n.mul(y,B),pt=n.add(c,h),ht=n.add(k,I);pt=n.mul(pt,ht),ht=n.add(G,it),pt=n.sub(pt,ht),ht=n.add(c,y);let Ht=n.add(k,B);return ht=n.mul(ht,Ht),Ht=n.add(G,vt),ht=n.sub(ht,Ht),Ht=n.add(h,y),C=n.add(I,B),Ht=n.mul(Ht,C),C=n.add(it,vt),Ht=n.sub(Ht,C),f=n.mul(x,ht),C=n.mul(et,vt),f=n.add(C,f),C=n.sub(it,f),f=n.add(it,f),v=n.mul(C,f),it=n.add(G,G),it=n.add(it,G),vt=n.mul(x,vt),ht=n.mul(et,ht),it=n.add(it,vt),vt=n.sub(G,vt),vt=n.mul(x,vt),ht=n.add(ht,vt),G=n.mul(it,ht),v=n.add(v,G),G=n.mul(Ht,ht),C=n.mul(pt,C),C=n.sub(C,G),G=n.mul(pt,it),f=n.mul(Ht,f),f=n.add(f,G),new D(C,v,f)}subtract(b){return this.add(b.negate())}is0(){return this.equals(D.ZERO)}multiply(b){const{endo:c}=t;if(!s.isValidNot0(b))throw new Error("invalid scalar: out of range");let h,y;const k=I=>X.cached(this,I,B=>sr(D,B));if(c){const{k1neg:I,k1:B,k2neg:C,k2:v}=K(b),{p:f,f:x}=k(B),{p:et,f:G}=k(v);y=x.add(G),h=j(c.beta,f,et,I,C)}else{const{p:I,f:B}=k(b);h=I,y=B}return sr(D,[h,y])[0]}multiplyUnsafe(b){const{endo:c}=t,h=this;if(!s.isValid(b))throw new Error("invalid scalar: out of range");if(b===Cn||h.is0())return D.ZERO;if(b===Lr)return h;if(X.hasCache(this))return this.multiply(b);if(c){const{k1neg:y,k1:k,k2neg:I,k2:B}=K(b),{p1:C,p2:v}=Hh(D,h,k,B);return j(c.beta,C,v,y,I)}else return X.unsafe(h,b)}multiplyAndAddUnsafe(b,c,h){const y=this.multiplyUnsafe(c).add(b.multiplyUnsafe(h));return y.is0()?void 0:y}toAffine(b){return $(this,b)}isTorsionFree(){const{isTorsionFree:b}=t;return o===Lr?!0:b?b(D,this):X.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:b}=t;return o===Lr?this:b?b(D,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(b=!0){return lr(b,"isCompressed"),this.assertValidity(),g(D,this,b)}toHex(b=!0){return ur(this.toBytes(b))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(b=!0){return this.toBytes(b)}_setWindowSize(b){this.precompute(b)}static normalizeZ(b){return sr(D,b)}static msm(b,c){return Vu(D,s,b,c)}static fromPrivateKey(b){return D.BASE.multiply(Mr(s,b))}}D.BASE=new D(i.Gx,i.Gy,n.ONE),D.ZERO=new D(n.ZERO,n.ONE,n.ZERO),D.Fp=n,D.Fn=s;const Z=s.BITS,X=new qu(D,t.endo?Math.ceil(Z/2):Z);return D.BASE.precompute(8),D}function zl(r){return Uint8Array.of(r?2:3)}function Dl(r,t){return{secretKey:t.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function ip(r,t={}){const{Fn:e}=r,n=t.randomBytes||Ia,s=Object.assign(Dl(r.Fp,e),{seed:Du(e.ORDER)});function i(g){try{return!!Mr(e,g)}catch{return!1}}function o(g,E){const{publicKey:R,publicKeyUncompressed:T}=s;try{const M=g.length;return E===!0&&M!==R||E===!1&&M!==T?!1:!!r.fromBytes(g)}catch{return!1}}function a(g=n(s.seed)){return qh(rn(g,s.seed,"seed"),e.ORDER)}function u(g,E=!0){return r.BASE.multiply(Mr(e,g)).toBytes(E)}function p(g){const E=a(g);return{secretKey:E,publicKey:u(E)}}function m(g){if(typeof g=="bigint")return!1;if(g instanceof r)return!0;const{secretKey:E,publicKey:R,publicKeyUncompressed:T}=s;if(e.allowedLengths||E===R)return;const M=te("key",g).length;return M===R||M===T}function A(g,E,R=!0){if(m(g)===!0)throw new Error("first arg must be private key");if(m(E)===!1)throw new Error("second arg must be public key");const T=Mr(e,g);return r.fromHex(E).multiply(T).toBytes(R)}return Object.freeze({getPublicKey:u,getSharedSecret:A,keygen:p,Point:r,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:i,randomPrivateKey:a,normPrivateKeyToScalar:g=>Mr(e,g),precompute(g=8,E=r.BASE){return E.precompute(g,!1)}},lengths:s})}function sp(r,t,e={}){Su(t),Ai(e,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=e.randomBytes||Ia,s=e.hmac||((c,...h)=>Wl(t,c,hn(...h))),{Fp:i,Fn:o}=r,{ORDER:a,BITS:u}=o,{keygen:p,getPublicKey:m,getSharedSecret:A,utils:S,lengths:g}=ip(r,e),E={prehash:!1,lowS:typeof e.lowS=="boolean"?e.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function T(c){const h=a>>Lr;return c>h}function M(c,h){if(!o.isValidNot0(h))throw new Error(`invalid signature ${c}: out of range 1..Point.Fn.ORDER`);return h}function N(c,h){jo(h);const y=g.signature,k=h==="compact"?y:h==="recovered"?y+1:void 0;return rn(c,k,`${h} signature`)}class P{constructor(h,y,k){this.r=M("r",h),this.s=M("s",y),k!=null&&(this.recovery=k),Object.freeze(this)}static fromBytes(h,y=R){N(h,y);let k;if(y==="der"){const{r:v,s:f}=xn.toSig(rn(h));return new P(v,f)}y==="recovered"&&(k=h[0],y="compact",h=h.subarray(1));const I=o.BYTES,B=h.subarray(0,I),C=h.subarray(I,I*2);return new P(o.fromBytes(B),o.fromBytes(C),k)}static fromHex(h,y){return this.fromBytes(is(h),y)}addRecoveryBit(h){return new P(this.r,this.s,h)}recoverPublicKey(h){const y=i.ORDER,{r:k,s:I,recovery:B}=this;if(B==null||![0,1,2,3].includes(B))throw new Error("recovery id invalid");if(a*Fl<y&&B>1)throw new Error("recovery id is ambiguous for h>1 curve");const v=B===2||B===3?k+a:k;if(!i.isValid(v))throw new Error("recovery id 2 or 3 invalid");const f=i.toBytes(v),x=r.fromBytes(hn(zl((B&1)===0),f)),et=o.inv(v),G=K(te("msgHash",h)),it=o.create(-G*et),vt=o.create(I*et),pt=r.BASE.multiplyUnsafe(it).add(x.multiplyUnsafe(vt));if(pt.is0())throw new Error("point at infinify");return pt.assertValidity(),pt}hasHighS(){return T(this.s)}toBytes(h=R){if(jo(h),h==="der")return is(xn.hexFromSig(this));const y=o.toBytes(this.r),k=o.toBytes(this.s);if(h==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return hn(Uint8Array.of(this.recovery),y,k)}return hn(y,k)}toHex(h){return ur(this.toBytes(h))}assertValidity(){}static fromCompact(h){return P.fromBytes(te("sig",h),"compact")}static fromDER(h){return P.fromBytes(te("sig",h),"der")}normalizeS(){return this.hasHighS()?new P(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return ur(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return ur(this.toBytes("compact"))}}const W=e.bits2int||function(h){if(h.length>8192)throw new Error("input is too large");const y=As(h),k=h.length*8-u;return k>0?y>>BigInt(k):y},K=e.bits2int_modN||function(h){return o.create(W(h))},$=Ei(u);function V(c){return $o("num < 2^"+u,c,Cn,$),o.toBytes(c)}function j(c,h){return rn(c,void 0,"message"),h?rn(t(c),void 0,"prehashed message"):c}function D(c,h,y){if(["recovered","canonical"].some(it=>it in y))throw new Error("sign() legacy options not supported");const{lowS:k,prehash:I,extraEntropy:B}=Ao(y,E);c=j(c,I);const C=K(c),v=Mr(o,h),f=[V(v),V(C)];if(B!=null&&B!==!1){const it=B===!0?n(g.secretKey):B;f.push(te("extraEntropy",it))}const x=hn(...f),et=C;function G(it){const vt=W(it);if(!o.isValidNot0(vt))return;const pt=o.inv(vt),ht=r.BASE.multiply(vt).toAffine(),Ht=o.create(ht.x);if(Ht===Cn)return;const Tt=o.create(pt*o.create(et+Ht*v));if(Tt===Cn)return;let Pt=(ht.x===Ht?0:2)|Number(ht.y&Lr),Je=Tt;return k&&T(Tt)&&(Je=o.neg(Tt),Pt^=1),new P(Ht,Je,Pt)}return{seed:x,k2sig:G}}function Z(c,h,y={}){c=te("message",c);const{seed:k,k2sig:I}=D(c,h,y);return Lh(t.outputLen,o.BYTES,s)(k,I)}function X(c){let h;const y=typeof c=="string"||ki(c),k=!y&&c!==null&&typeof c=="object"&&typeof c.r=="bigint"&&typeof c.s=="bigint";if(!y&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(k)h=new P(c.r,c.s);else if(y){try{h=P.fromBytes(te("sig",c),"der")}catch(I){if(!(I instanceof xn.Err))throw I}if(!h)try{h=P.fromBytes(te("sig",c),"compact")}catch{return!1}}return h||!1}function J(c,h,y,k={}){const{lowS:I,prehash:B,format:C}=Ao(k,E);if(y=te("publicKey",y),h=j(te("message",h),B),"strict"in k)throw new Error("options.strict was renamed to lowS");const v=C===void 0?X(c):P.fromBytes(te("sig",c),C);if(v===!1)return!1;try{const f=r.fromBytes(y);if(I&&v.hasHighS())return!1;const{r:x,s:et}=v,G=K(h),it=o.inv(et),vt=o.create(G*it),pt=o.create(x*it),ht=r.BASE.multiplyUnsafe(vt).add(f.multiplyUnsafe(pt));return ht.is0()?!1:o.create(ht.x)===x}catch{return!1}}function b(c,h,y={}){const{prehash:k}=Ao(y,E);return h=j(h,k),P.fromBytes(c,"recovered").recoverPublicKey(h).toBytes()}return Object.freeze({keygen:p,getPublicKey:m,getSharedSecret:A,utils:S,lengths:g,Point:r,sign:Z,verify:J,recoverPublicKey:b,Signature:P,hash:t})}function op(r){const t={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},e=r.Fp;let n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=dr(t.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),i={Fp:e,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:t,curveOpts:i}}function ap(r){const{CURVE:t,curveOpts:e}=op(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:t,curveOpts:e,hash:r.hash,ecdsaOpts:n}}function cp(r,t){const e=t.Point;return Object.assign({},t,{ProjectivePoint:e,CURVE:Object.assign({},r,Fu(e.Fn.ORDER,e.Fn.BITS))})}function up(r){const{CURVE:t,curveOpts:e,hash:n,ecdsaOpts:s}=ap(r),i=rp(t,e),o=sp(i,n,s);return cp(r,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lp(r,t){const e=n=>up({...r,hash:n});return{...e(t),create:e}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ja={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},fp={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},$c=BigInt(2);function hp(r){const t=ja.p,e=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),p=r*r*r%t,m=p*p*r%t,A=Qt(m,e,t)*m%t,S=Qt(A,e,t)*m%t,g=Qt(S,$c,t)*p%t,E=Qt(g,s,t)*g%t,R=Qt(E,i,t)*E%t,T=Qt(R,a,t)*R%t,M=Qt(T,u,t)*T%t,N=Qt(M,a,t)*R%t,P=Qt(N,e,t)*m%t,W=Qt(P,o,t)*E%t,K=Qt(W,n,t)*p%t,$=Qt(K,$c,t);if(!Ho.eql(Ho.sqr($),r))throw new Error("Cannot find square root");return $}const Ho=dr(ja.p,{sqrt:hp}),Ha=lp({...ja,Fp:Ho,lowS:!0,endo:fp},xu),dp=Gr.utils.randomPrivateKey,qc=()=>{const r=Gr.utils.randomPrivateKey(),t=ds(r),e=new Uint8Array(64);return e.set(r),e.set(t,32),{publicKey:t,secretKey:e}},ds=Gr.getPublicKey;function Vc(r){try{return Gr.ExtendedPoint.fromHex(r),!0}catch{return!1}}const Ga=(r,t)=>Gr.sign(r,t.slice(0,32)),pp=Gr.verify,bt=r=>lt.Buffer.isBuffer(r)?r:r instanceof Uint8Array?lt.Buffer.from(r.buffer,r.byteOffset,r.byteLength):lt.Buffer.from(r);class Ya{constructor(t){Object.assign(this,t)}encode(){return lt.Buffer.from(nl(li,this))}static decode(t){return rl(li,this,t)}static decodeUnchecked(t){return Ju(li,this,t)}}class gp extends Ya{constructor(t){if(super(t),this.enum="",Object.keys(t).length!==1)throw new Error("Enum can only take single value");Object.keys(t).map(e=>{this.enum=e})}}const li=new Map;var Kl;const $l=32,mn=32;function yp(r){return r._bn!==void 0}let jc=1;class Y extends Ya{constructor(t){if(super({}),this._bn=void 0,yp(t))this._bn=t._bn;else{if(typeof t=="string"){const e=Re.decode(t);if(e.length!=mn)throw new Error("Invalid public key input");this._bn=new Nc(e)}else this._bn=new Nc(t);if(this._bn.byteLength()>mn)throw new Error("Invalid public key input")}}static unique(){const t=new Y(jc);return jc+=1,new Y(t.toBuffer())}equals(t){return this._bn.eq(t._bn)}toBase58(){return Re.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const t=this.toBuffer();return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}toBuffer(){const t=this._bn.toArrayLike(lt.Buffer);if(t.length===mn)return t;const e=lt.Buffer.alloc(32);return t.copy(e,32-t.length),e}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(t,e,n){const s=lt.Buffer.concat([t.toBuffer(),lt.Buffer.from(e),n.toBuffer()]),i=Oc(s);return new Y(i)}static createProgramAddressSync(t,e){let n=lt.Buffer.alloc(0);t.forEach(function(i){if(i.length>$l)throw new TypeError("Max seed length exceeded");n=lt.Buffer.concat([n,bt(i)])}),n=lt.Buffer.concat([n,e.toBuffer(),lt.Buffer.from("ProgramDerivedAddress")]);const s=Oc(n);if(Vc(s))throw new Error("Invalid seeds, address must fall off the curve");return new Y(s)}static async createProgramAddress(t,e){return this.createProgramAddressSync(t,e)}static findProgramAddressSync(t,e){let n=255,s;for(;n!=0;){try{const i=t.concat(lt.Buffer.from([n]));s=this.createProgramAddressSync(i,e)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(t,e){return this.findProgramAddressSync(t,e)}static isOnCurve(t){const e=new Y(t);return Vc(e.toBytes())}}Kl=Y;Y.default=new Kl("11111111111111111111111111111111");li.set(Y,{kind:"struct",fields:[["_bn","u256"]]});class mp{constructor(t){if(this._publicKey=void 0,this._secretKey=void 0,t){const e=bt(t);if(t.length!==64)throw new Error("bad secret key size");this._publicKey=e.slice(32,64),this._secretKey=e.slice(0,32)}else this._secretKey=bt(dp()),this._publicKey=bt(ds(this._secretKey))}get publicKey(){return new Y(this._publicKey)}get secretKey(){return lt.Buffer.concat([this._secretKey,this._publicKey],64)}}const wp=new Y("BPFLoader1111111111111111111111111111111111"),Yn=1232,Ts=127,yi=64;class Za extends Error{constructor(t){super(`Signature ${t} has expired: block height exceeded.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Za.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ja extends Error{constructor(t,e){super(`Transaction was not confirmed in ${e.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${t} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Ja.prototype,"name",{value:"TransactionExpiredTimeoutError"});class Tr extends Error{constructor(t){super(`Signature ${t} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=t}}Object.defineProperty(Tr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class mi{constructor(t,e){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=e}keySegments(){const t=[this.staticAccountKeys];return this.accountKeysFromLookups&&(t.push(this.accountKeysFromLookups.writable),t.push(this.accountKeysFromLookups.readonly)),t}get(t){for(const e of this.keySegments()){if(t<e.length)return e[t];t-=e.length}}get length(){return this.keySegments().flat().length}compileInstructions(t){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return t.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const St=(r="publicKey")=>Ft(32,r),bp=(r="signature")=>Ft(64,r),or=(r="string")=>{const t=ot([st("length"),st("lengthPadding"),Ft(Gn(st(),-8),"chars")],r),e=t.decode.bind(t),n=t.encode.bind(t),s=t;return s.decode=(i,o)=>e(i,o).chars.toString(),s.encode=(i,o,a)=>{const u={chars:lt.Buffer.from(i,"utf8")};return n(u,o,a)},s.alloc=i=>st().span+st().span+lt.Buffer.from(i,"utf8").length,s},vp=(r="authorized")=>ot([St("staker"),St("withdrawer")],r),Sp=(r="lockup")=>ot([He("unixTimestamp"),He("epoch"),St("custodian")],r),kp=(r="voteInit")=>ot([St("nodePubkey"),St("authorizedVoter"),St("authorizedWithdrawer"),At("commission")],r),Ep=(r="voteAuthorizeWithSeedArgs")=>ot([st("voteAuthorizationType"),St("currentAuthorityDerivedKeyOwnerPubkey"),or("currentAuthorityDerivedKeySeed"),St("newAuthorized")],r);function ql(r,t){const e=s=>{if(s.span>=0)return s.span;if(typeof s.alloc=="function")return s.alloc(t[s.property]);if("count"in s&&"elementLayout"in s){const i=t[s.property];if(Array.isArray(i))return i.length*e(s.elementLayout)}else if("fields"in s)return ql({layout:s},t[s.property]);return 0};let n=0;return r.layout.fields.forEach(s=>{n+=e(s)}),n}function De(r){let t=0,e=0;for(;;){let n=r.shift();if(t|=(n&127)<<e*7,e+=1,!(n&128))break}return t}function Ge(r,t){let e=t;for(;;){let n=e&127;if(e>>=7,e==0){r.push(n);break}else n|=128,r.push(n)}}function It(r,t){if(!r)throw new Error(t||"Assertion failed")}class Cs{constructor(t,e){this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=e}static compile(t,e){const n=new Map,s=o=>{const a=o.toBase58();let u=n.get(a);return u===void 0&&(u={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(a,u)),u},i=s(e);i.isSigner=!0,i.isWritable=!0;for(const o of t){s(o.programId).isInvoked=!0;for(const a of o.keys){const u=s(a.pubkey);u.isSigner||(u.isSigner=a.isSigner),u.isWritable||(u.isWritable=a.isWritable)}}return new Cs(e,n)}getMessageComponents(){const t=[...this.keyMetaMap.entries()];It(t.length<=256,"Max static account keys length exceeded");const e=t.filter(([,u])=>u.isSigner&&u.isWritable),n=t.filter(([,u])=>u.isSigner&&!u.isWritable),s=t.filter(([,u])=>!u.isSigner&&u.isWritable),i=t.filter(([,u])=>!u.isSigner&&!u.isWritable),o={numRequiredSignatures:e.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{It(e.length>0,"Expected at least one writable signer key");const[u]=e[0];It(u===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...e.map(([u])=>new Y(u)),...n.map(([u])=>new Y(u)),...s.map(([u])=>new Y(u)),...i.map(([u])=>new Y(u))];return[o,a]}extractTableLookup(t){const[e,n]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(t.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(e.length===0&&s.length===0))return[{accountKey:t.key,writableIndexes:e,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(t,e){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(e(o)){const a=new Y(i),u=t.findIndex(p=>p.equals(a));u>=0&&(It(u<256,"Max lookup table index exceeded"),n.push(u),s.push(a),this.keyMetaMap.delete(i))}return[n,s]}}const Vl="Reached end of buffer unexpectedly";function dn(r){if(r.length===0)throw new Error(Vl);return r.shift()}function Ke(r,...t){const[e]=t;if(t.length===2?e+(t[1]??0)>r.length:e>=r.length)throw new Error(Vl);return r.splice(...t)}class cn{constructor(t){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map(e=>new Y(e)),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach(e=>this.indexToProgramIds.set(e.programIdIndex,this.accountKeys[e.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(t=>({programIdIndex:t.programIdIndex,accountKeyIndexes:t.accounts,data:Re.decode(t.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new mi(this.staticAccountKeys)}static compile(t){const e=Cs.compile(t.instructions,t.payerKey),[n,s]=e.getMessageComponents(),o=new mi(s).compileInstructions(t.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:Re.encode(a.data)}));return new cn({header:n,accountKeys:s,recentBlockhash:t.recentBlockhash,instructions:o})}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures;if(t>=this.header.numRequiredSignatures){const n=t-e,i=this.accountKeys.length-e-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=e-this.header.numReadonlySignedAccounts;return t<n}}isProgramId(t){return this.indexToProgramIds.has(t)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((t,e)=>!this.isProgramId(e))}serialize(){const t=this.accountKeys.length;let e=[];Ge(e,t);const n=this.instructions.map(A=>{const{accounts:S,programIdIndex:g}=A,E=Array.from(Re.decode(A.data));let R=[];Ge(R,S.length);let T=[];return Ge(T,E.length),{programIdIndex:g,keyIndicesCount:lt.Buffer.from(R),keyIndices:S,dataLength:lt.Buffer.from(T),data:E}});let s=[];Ge(s,n.length);let i=lt.Buffer.alloc(Yn);lt.Buffer.from(s).copy(i);let o=s.length;n.forEach(A=>{const g=ot([At("programIdIndex"),Ft(A.keyIndicesCount.length,"keyIndicesCount"),Me(At("keyIndex"),A.keyIndices.length,"keyIndices"),Ft(A.dataLength.length,"dataLength"),Me(At("userdatum"),A.data.length,"data")]).encode(A,i,o);o+=g}),i=i.slice(0,o);const a=ot([Ft(1,"numRequiredSignatures"),Ft(1,"numReadonlySignedAccounts"),Ft(1,"numReadonlyUnsignedAccounts"),Ft(e.length,"keyCount"),Me(St("key"),t,"keys"),St("recentBlockhash")]),u={numRequiredSignatures:lt.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:lt.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:lt.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:lt.Buffer.from(e),keys:this.accountKeys.map(A=>bt(A.toBytes())),recentBlockhash:Re.decode(this.recentBlockhash)};let p=lt.Buffer.alloc(2048);const m=a.encode(u,p);return i.copy(p,m),p.slice(0,m+i.length)}static from(t){let e=[...t];const n=dn(e);if(n!==(n&Ts))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=dn(e),i=dn(e),o=De(e);let a=[];for(let S=0;S<o;S++){const g=Ke(e,0,mn);a.push(new Y(lt.Buffer.from(g)))}const u=Ke(e,0,mn),p=De(e);let m=[];for(let S=0;S<p;S++){const g=dn(e),E=De(e),R=Ke(e,0,E),T=De(e),M=Ke(e,0,T),N=Re.encode(lt.Buffer.from(M));m.push({programIdIndex:g,accounts:R,data:N})}const A={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Re.encode(lt.Buffer.from(u)),accountKeys:a,instructions:m};return new cn(A)}}class fr{constructor(t){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let t=0;for(const e of this.addressTableLookups)t+=e.readonlyIndexes.length+e.writableIndexes.length;return t}getAccountKeys(t){let e;if(t&&"accountKeysFromLookups"in t&&t.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=t.accountKeysFromLookups.writable.length+t.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");e=t.accountKeysFromLookups}else if(t&&"addressLookupTableAccounts"in t&&t.addressLookupTableAccounts)e=this.resolveAddressTableLookups(t.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new mi(this.staticAccountKeys,e)}isAccountSigner(t){return t<this.header.numRequiredSignatures}isAccountWritable(t){const e=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(t>=n){const s=t-n,i=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return s<i}else if(t>=this.header.numRequiredSignatures){const s=t-e,o=n-e-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=e-this.header.numReadonlySignedAccounts;return t<s}}resolveAddressTableLookups(t){const e={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=t.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)e.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)e.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return e}static compile(t){const e=Cs.compile(t.instructions,t.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=t.addressLookupTableAccounts||[];for(const m of i){const A=e.extractTableLookup(m);if(A!==void 0){const[S,{writable:g,readonly:E}]=A;n.push(S),s.writable.push(...g),s.readonly.push(...E)}}const[o,a]=e.getMessageComponents(),p=new mi(a,s).compileInstructions(t.instructions);return new fr({header:o,staticAccountKeys:a,recentBlockhash:t.recentBlockhash,compiledInstructions:p,addressTableLookups:n})}serialize(){const t=Array();Ge(t,this.staticAccountKeys.length);const e=this.serializeInstructions(),n=Array();Ge(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Ge(i,this.addressTableLookups.length);const o=ot([At("prefix"),ot([At("numRequiredSignatures"),At("numReadonlySignedAccounts"),At("numReadonlyUnsignedAccounts")],"header"),Ft(t.length,"staticAccountKeysLength"),Me(St(),this.staticAccountKeys.length,"staticAccountKeys"),St("recentBlockhash"),Ft(n.length,"instructionsLength"),Ft(e.length,"serializedInstructions"),Ft(i.length,"addressTableLookupsLength"),Ft(s.length,"serializedAddressTableLookups")]),a=new Uint8Array(Yn),p=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(t),staticAccountKeys:this.staticAccountKeys.map(m=>m.toBytes()),recentBlockhash:Re.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:e,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},a);return a.slice(0,p)}serializeInstructions(){let t=0;const e=new Uint8Array(Yn);for(const n of this.compiledInstructions){const s=Array();Ge(s,n.accountKeyIndexes.length);const i=Array();Ge(i,n.data.length);const o=ot([At("programIdIndex"),Ft(s.length,"encodedAccountKeyIndexesLength"),Me(At(),n.accountKeyIndexes.length,"accountKeyIndexes"),Ft(i.length,"encodedDataLength"),Ft(n.data.length,"data")]);t+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},e,t)}return e.slice(0,t)}serializeAddressTableLookups(){let t=0;const e=new Uint8Array(Yn);for(const n of this.addressTableLookups){const s=Array();Ge(s,n.writableIndexes.length);const i=Array();Ge(i,n.readonlyIndexes.length);const o=ot([St("accountKey"),Ft(s.length,"encodedWritableIndexesLength"),Me(At(),n.writableIndexes.length,"writableIndexes"),Ft(i.length,"encodedReadonlyIndexesLength"),Me(At(),n.readonlyIndexes.length,"readonlyIndexes")]);t+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},e,t)}return e.slice(0,t)}static deserialize(t){let e=[...t];const n=dn(e),s=n&Ts;It(n!==s,"Expected versioned message but received legacy message");const i=s;It(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:dn(e),numReadonlySignedAccounts:dn(e),numReadonlyUnsignedAccounts:dn(e)},a=[],u=De(e);for(let E=0;E<u;E++)a.push(new Y(Ke(e,0,mn)));const p=Re.encode(Ke(e,0,mn)),m=De(e),A=[];for(let E=0;E<m;E++){const R=dn(e),T=De(e),M=Ke(e,0,T),N=De(e),P=new Uint8Array(Ke(e,0,N));A.push({programIdIndex:R,accountKeyIndexes:M,data:P})}const S=De(e),g=[];for(let E=0;E<S;E++){const R=new Y(Ke(e,0,mn)),T=De(e),M=Ke(e,0,T),N=De(e),P=Ke(e,0,N);g.push({accountKey:R,writableIndexes:M,readonlyIndexes:P})}return new fr({header:o,staticAccountKeys:a,recentBlockhash:p,compiledInstructions:A,addressTableLookups:g})}}const Ps={deserializeMessageVersion(r){const t=r[0],e=t&Ts;return e===t?"legacy":e},deserialize:r=>{const t=Ps.deserializeMessageVersion(r);if(t==="legacy")return cn.from(r);if(t===0)return fr.deserialize(r);throw new Error(`Transaction message version ${t} deserialization is not supported`)}};let _n=function(r){return r[r.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",r[r.PROCESSED=1]="PROCESSED",r[r.TIMED_OUT=2]="TIMED_OUT",r[r.NONCE_INVALID=3]="NONCE_INVALID",r}({});const Ap=lt.Buffer.alloc(yi).fill(0);class Ct{constructor(t){this.keys=void 0,this.programId=void 0,this.data=lt.Buffer.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}toJSON(){return{keys:this.keys.map(({pubkey:t,isSigner:e,isWritable:n})=>({pubkey:t.toJSON(),isSigner:e,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class _t{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(t){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){const{minContextSlot:e,nonceInfo:n}=t;this.minNonceContextSlot=e,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){const{blockhash:e,lastValidBlockHeight:n}=t;this.recentBlockhash=e,this.lastValidBlockHeight=n}else{const{recentBlockhash:e,nonceInfo:n}=t;n&&(this.nonceInfo=n),this.recentBlockhash=e}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(t=>t.toJSON()),signers:this.signatures.map(({publicKey:t})=>t.toJSON())}}add(...t){if(t.length===0)throw new Error("No instructions");return t.forEach(e=>{"instructions"in e?this.instructions=this.instructions.concat(e.instructions):"data"in e&&"programId"in e&&"keys"in e?this.instructions.push(e):this.instructions.push(new Ct(e))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let t,e;if(this.nonceInfo?(t=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?e=[this.nonceInfo.nonceInstruction,...this.instructions]:e=this.instructions):(t=this.recentBlockhash,e=this.instructions),!t)throw new Error("Transaction recentBlockhash required");e.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let R=0;R<e.length;R++)if(e[R].programId===void 0)throw new Error(`Transaction instruction index ${R} has undefined program id`);const s=[],i=[];e.forEach(R=>{R.keys.forEach(M=>{i.push({...M})});const T=R.programId.toString();s.includes(T)||s.push(T)}),s.forEach(R=>{i.push({pubkey:new Y(R),isSigner:!1,isWritable:!1})});const o=[];i.forEach(R=>{const T=R.pubkey.toString(),M=o.findIndex(N=>N.pubkey.toString()===T);M>-1?(o[M].isWritable=o[M].isWritable||R.isWritable,o[M].isSigner=o[M].isSigner||R.isSigner):o.push(R)}),o.sort(function(R,T){if(R.isSigner!==T.isSigner)return R.isSigner?-1:1;if(R.isWritable!==T.isWritable)return R.isWritable?-1:1;const M={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return R.pubkey.toBase58().localeCompare(T.pubkey.toBase58(),"en",M)});const a=o.findIndex(R=>R.pubkey.equals(n));if(a>-1){const[R]=o.splice(a,1);R.isSigner=!0,R.isWritable=!0,o.unshift(R)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const R of this.signatures){const T=o.findIndex(M=>M.pubkey.equals(R.publicKey));if(T>-1)o[T].isSigner||(o[T].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${R.publicKey.toString()}`)}let u=0,p=0,m=0;const A=[],S=[];o.forEach(({pubkey:R,isSigner:T,isWritable:M})=>{T?(A.push(R.toString()),u+=1,M||(p+=1)):(S.push(R.toString()),M||(m+=1))});const g=A.concat(S),E=e.map(R=>{const{data:T,programId:M}=R;return{programIdIndex:g.indexOf(M.toString()),accounts:R.keys.map(N=>g.indexOf(N.pubkey.toString())),data:Re.encode(T)}});return E.forEach(R=>{It(R.programIdIndex>=0),R.accounts.forEach(T=>It(T>=0))}),new cn({header:{numRequiredSignatures:u,numReadonlySignedAccounts:p,numReadonlyUnsignedAccounts:m},accountKeys:g,recentBlockhash:t,instructions:E})}_compile(){const t=this.compileMessage(),e=t.accountKeys.slice(0,t.header.numRequiredSignatures);return this.signatures.length===e.length&&this.signatures.every((s,i)=>e[i].equals(s.publicKey))||(this.signatures=e.map(n=>({signature:null,publicKey:n}))),t}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(t){return(await t.getFeeForMessage(this.compileMessage())).value}setSigners(...t){if(t.length===0)throw new Error("No signers");const e=new Set;this.signatures=t.filter(n=>{const s=n.toString();return e.has(s)?!1:(e.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...t){if(t.length===0)throw new Error("No signers");const e=new Set,n=[];for(const i of t){const o=i.publicKey.toString();e.has(o)||(e.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(t,...e){const n=t.serialize();e.forEach(s=>{const i=Ga(n,s.secretKey);this._addSignature(s.publicKey,bt(i))})}addSignature(t,e){this._compile(),this._addSignature(t,e)}_addSignature(t,e){It(e.length===64);const n=this.signatures.findIndex(s=>t.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${t.toString()}`);this.signatures[n].signature=lt.Buffer.from(e)}verifySignatures(t=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),t)}_getMessageSignednessErrors(t,e){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?e&&(n.missing||(n.missing=[])).push(i):pp(s,t,i.toBytes())||(n.invalid||(n.invalid=[])).push(i);return n.invalid||n.missing?n:void 0}serialize(t){const{requireAllSignatures:e,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},t),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,e);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(t){const{signatures:e}=this,n=[];Ge(n,e.length);const s=n.length+e.length*64+t.length,i=lt.Buffer.alloc(s);return It(e.length<256),lt.Buffer.from(n).copy(i,0),e.forEach(({signature:o},a)=>{o!==null&&(It(o.length===64,"signature has invalid length"),lt.Buffer.from(o).copy(i,n.length+a*64))}),t.copy(i,n.length+e.length*64),It(i.length<=Yn,`Transaction too large: ${i.length} > ${Yn}`),i}get keys(){return It(this.instructions.length===1),this.instructions[0].keys.map(t=>t.pubkey)}get programId(){return It(this.instructions.length===1),this.instructions[0].programId}get data(){return It(this.instructions.length===1),this.instructions[0].data}static from(t){let e=[...t];const n=De(e);let s=[];for(let i=0;i<n;i++){const o=Ke(e,0,yi);s.push(Re.encode(lt.Buffer.from(o)))}return _t.populate(cn.from(e),s)}static populate(t,e=[]){const n=new _t;return n.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(n.feePayer=t.accountKeys[0]),e.forEach((s,i)=>{const o={signature:s==Re.encode(Ap)?null:Re.decode(s),publicKey:t.accountKeys[i]};n.signatures.push(o)}),t.instructions.forEach(s=>{const i=s.accounts.map(o=>{const a=t.accountKeys[o];return{pubkey:a,isSigner:n.signatures.some(u=>u.publicKey.toString()===a.toString())||t.isAccountSigner(o),isWritable:t.isAccountWritable(o)}});n.instructions.push(new Ct({keys:i,programId:t.accountKeys[s.programIdIndex],data:Re.decode(s.data)}))}),n._message=t,n._json=n.toJSON(),n}}class Xa{constructor(t){this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}static decompile(t,e){const{header:n,compiledInstructions:s,recentBlockhash:i}=t,{numRequiredSignatures:o,numReadonlySignedAccounts:a,numReadonlyUnsignedAccounts:u}=n,p=o-a;It(p>0,"Message header is invalid");const m=t.staticAccountKeys.length-o-u;It(m>=0,"Message header is invalid");const A=t.getAccountKeys(e),S=A.get(0);if(S===void 0)throw new Error("Failed to decompile message because no account keys were found");const g=[];for(const E of s){const R=[];for(const M of E.accountKeyIndexes){const N=A.get(M);if(N===void 0)throw new Error(`Failed to find key for account key index ${M}`);const P=M<o;let W;P?W=M<p:M<A.staticAccountKeys.length?W=M-o<m:W=M-A.staticAccountKeys.length<A.accountKeysFromLookups.writable.length,R.push({pubkey:N,isSigner:M<n.numRequiredSignatures,isWritable:W})}const T=A.get(E.programIdIndex);if(T===void 0)throw new Error(`Failed to find program id for program id index ${E.programIdIndex}`);g.push(new Ct({programId:T,data:bt(E.data),keys:R}))}return new Xa({payerKey:S,instructions:g,recentBlockhash:i})}compileToLegacyMessage(){return cn.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}compileToV0Message(t){return fr.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:t})}}class Ls{get version(){return this.message.version}constructor(t,e){if(this.signatures=void 0,this.message=void 0,e!==void 0)It(e.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=e;else{const n=[];for(let s=0;s<t.header.numRequiredSignatures;s++)n.push(new Uint8Array(yi));this.signatures=n}this.message=t}serialize(){const t=this.message.serialize(),e=Array();Ge(e,this.signatures.length);const n=ot([Ft(e.length,"encodedSignaturesLength"),Me(bp(),this.signatures.length,"signatures"),Ft(t.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(e),signatures:this.signatures,serializedMessage:t},s);return s.slice(0,i)}static deserialize(t){let e=[...t];const n=[],s=De(e);for(let o=0;o<s;o++)n.push(new Uint8Array(Ke(e,0,yi)));const i=Ps.deserialize(new Uint8Array(e));return new Ls(i,n)}sign(t){const e=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of t){const i=n.findIndex(o=>o.equals(s.publicKey));It(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=Ga(e,s.secretKey)}}addSignature(t,e){It(e.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(t));It(s>=0,`Can not add signature; \`${t.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=e}}const _p=160,Ip=64,xp=_p/Ip,jl=1e3/xp,ln=new Y("SysvarC1ock11111111111111111111111111111111"),Bp=new Y("SysvarEpochSchedu1e111111111111111111111111"),Rp=new Y("Sysvar1nstructions1111111111111111111111111"),qi=new Y("SysvarRecentB1ockHashes11111111111111111111"),Kr=new Y("SysvarRent111111111111111111111111111111111"),Mp=new Y("SysvarRewards111111111111111111111111111111"),Tp=new Y("SysvarS1otHashes111111111111111111111111111"),Cp=new Y("SysvarS1otHistory11111111111111111111111111"),Vi=new Y("SysvarStakeHistory1111111111111111111111111");class wi extends Error{constructor({action:t,signature:e,transactionMessage:n,logs:s}){const i=s?`Logs: 
${JSON.stringify(s.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(t){case"send":a=`Transaction ${e} resulted in an error. 
${n}. `+i+o;break;case"simulate":a=`Simulation failed. 
Message: ${n}. 
`+i+o;break;default:a=`Unknown action '${(u=>u)(t)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=e,this.transactionMessage=n,this.transactionLogs=s||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const t=this.transactionLogs;if(!(t!=null&&typeof t=="object"&&"then"in t))return t}async getLogs(t){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((e,n)=>{t.getTransaction(this.signature).then(s=>{if(s&&s.meta&&s.meta.logMessages){const i=s.meta.logMessages;this.transactionLogs=i,e(i)}else n(new Error("Log messages not found"))}).catch(n)})),await this.transactionLogs}}const Pp={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016};class at extends Error{constructor({code:t,message:e,data:n},s){super(s!=null?`${s}: ${e}`:e),this.code=void 0,this.data=void 0,this.code=t,this.data=n,this.name="SolanaJSONRPCError"}}async function Go(r,t,e,n){const s=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment,maxRetries:n.maxRetries,minContextSlot:n.minContextSlot},i=await r.sendTransaction(t,e,s);let o;if(t.recentBlockhash!=null&&t.lastValidBlockHeight!=null)o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,signature:i,blockhash:t.recentBlockhash,lastValidBlockHeight:t.lastValidBlockHeight},n&&n.commitment)).value;else if(t.minNonceContextSlot!=null&&t.nonceInfo!=null){const{nonceInstruction:a}=t.nonceInfo,u=a.keys[0].pubkey;o=(await r.confirmTransaction({abortSignal:n==null?void 0:n.abortSignal,minContextSlot:t.minNonceContextSlot,nonceAccountPubkey:u,nonceValue:t.nonceInfo.nonce,signature:i},n&&n.commitment)).value}else(n==null?void 0:n.abortSignal)!=null&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),o=(await r.confirmTransaction(i,n&&n.commitment)).value;if(o.err)throw i!=null?new wi({action:"send",signature:i,transactionMessage:`Status: (${JSON.stringify(o)})`}):new Error(`Transaction ${i} failed (${JSON.stringify(o)})`);return i}function nr(r){return new Promise(t=>setTimeout(t,r))}function Et(r,t){const e=r.layout.span>=0?r.layout.span:ql(r,t),n=lt.Buffer.alloc(e),s=Object.assign({instruction:r.index},t);return r.layout.encode(s,n),n}function Bt(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.instruction!==r.index)throw new Error(`invalid instruction; instruction index mismatch ${e.instruction} != ${r.index}`);return e}const Hl=xe("lamportsPerSignature"),Gl=ot([st("version"),st("state"),St("authorizedPubkey"),St("nonce"),ot([Hl],"feeCalculator")]),Yo=Gl.span;class Ns{constructor(t){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}static fromAccountData(t){const e=Gl.decode(bt(t),0);return new Ns({authorizedPubkey:new Y(e.authorizedPubkey),nonce:new Y(e.nonce).toString(),feeCalculator:e.feeCalculator})}}function $r(r){const t=Ft(8,r),e=t.decode.bind(t),n=t.encode.bind(t),s=t,i=o0();return s.decode=(o,a)=>{const u=e(o,a);return i.decode(u)},s.encode=(o,a,u)=>{const p=i.encode(o);return n(p,a,u)},s}class Lp{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const n=st("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Ot))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a SystemInstruction");return s}static decodeCreateAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e,space:n,programId:s}=Bt(Ot.Create,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,lamports:e,space:n,programId:new Y(s)}}static decodeTransfer(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{lamports:e}=Bt(Ot.Transfer,t.data);return{fromPubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,lamports:e}}static decodeTransferWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e,seed:n,programId:s}=Bt(Ot.TransferWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,basePubkey:t.keys[1].pubkey,toPubkey:t.keys[2].pubkey,lamports:e,seed:n,programId:new Y(s)}}static decodeAllocate(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{space:e}=Bt(Ot.Allocate,t.data);return{accountPubkey:t.keys[0].pubkey,space:e}}static decodeAllocateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:n,space:s,programId:i}=Bt(Ot.AllocateWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Y(e),seed:n,space:s,programId:new Y(i)}}static decodeAssign(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{programId:e}=Bt(Ot.Assign,t.data);return{accountPubkey:t.keys[0].pubkey,programId:new Y(e)}}static decodeAssignWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,1);const{base:e,seed:n,programId:s}=Bt(Ot.AssignWithSeed,t.data);return{accountPubkey:t.keys[0].pubkey,basePubkey:new Y(e),seed:n,programId:new Y(s)}}static decodeCreateWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{base:e,seed:n,lamports:s,space:i,programId:o}=Bt(Ot.CreateWithSeed,t.data);return{fromPubkey:t.keys[0].pubkey,newAccountPubkey:t.keys[1].pubkey,basePubkey:new Y(e),seed:n,lamports:s,space:i,programId:new Y(o)}}static decodeNonceInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{authorized:e}=Bt(Ot.InitializeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:new Y(e)}}static decodeNonceAdvance(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Bt(Ot.AdvanceNonceAccount,t.data),{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static decodeNonceWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Bt(Ot.WithdrawNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e}}static decodeNonceAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e}=Bt(Ot.AuthorizeNonceAccount,t.data);return{noncePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[1].pubkey,newAuthorizedPubkey:new Y(e)}}static checkProgramId(t){if(!t.equals(_e.programId))throw new Error("invalid instruction; programId is not SystemProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ot=Object.freeze({Create:{index:0,layout:ot([st("instruction"),He("lamports"),He("space"),St("programId")])},Assign:{index:1,layout:ot([st("instruction"),St("programId")])},Transfer:{index:2,layout:ot([st("instruction"),$r("lamports")])},CreateWithSeed:{index:3,layout:ot([st("instruction"),St("base"),or("seed"),He("lamports"),He("space"),St("programId")])},AdvanceNonceAccount:{index:4,layout:ot([st("instruction")])},WithdrawNonceAccount:{index:5,layout:ot([st("instruction"),He("lamports")])},InitializeNonceAccount:{index:6,layout:ot([st("instruction"),St("authorized")])},AuthorizeNonceAccount:{index:7,layout:ot([st("instruction"),St("authorized")])},Allocate:{index:8,layout:ot([st("instruction"),He("space")])},AllocateWithSeed:{index:9,layout:ot([st("instruction"),St("base"),or("seed"),He("space"),St("programId")])},AssignWithSeed:{index:10,layout:ot([st("instruction"),St("base"),or("seed"),St("programId")])},TransferWithSeed:{index:11,layout:ot([st("instruction"),$r("lamports"),or("seed"),St("programId")])},UpgradeNonceAccount:{index:12,layout:ot([st("instruction")])}});class _e{constructor(){}static createAccount(t){const e=Ot.Create,n=Et(e,{lamports:t.lamports,space:t.space,programId:bt(t.programId.toBuffer())});return new Ct({keys:[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:n})}static transfer(t){let e,n;if("basePubkey"in t){const s=Ot.TransferWithSeed;e=Et(s,{lamports:BigInt(t.lamports),seed:t.seed,programId:bt(t.programId.toBuffer())}),n=[{pubkey:t.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}else{const s=Ot.Transfer;e=Et(s,{lamports:BigInt(t.lamports)}),n=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0}]}return new Ct({keys:n,programId:this.programId,data:e})}static assign(t){let e,n;if("basePubkey"in t){const s=Ot.AssignWithSeed;e=Et(s,{base:bt(t.basePubkey.toBuffer()),seed:t.seed,programId:bt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ot.Assign;e=Et(s,{programId:bt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ct({keys:n,programId:this.programId,data:e})}static createAccountWithSeed(t){const e=Ot.CreateWithSeed,n=Et(e,{base:bt(t.basePubkey.toBuffer()),seed:t.seed,lamports:t.lamports,space:t.space,programId:bt(t.programId.toBuffer())});let s=[{pubkey:t.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:t.newAccountPubkey,isSigner:!1,isWritable:!0}];return t.basePubkey.equals(t.fromPubkey)||s.push({pubkey:t.basePubkey,isSigner:!0,isWritable:!1}),new Ct({keys:s,programId:this.programId,data:n})}static createNonceAccount(t){const e=new _t;"basePubkey"in t&&"seed"in t?e.add(_e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Yo,programId:this.programId})):e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Yo,programId:this.programId}));const n={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return e.add(this.nonceInitialize(n)),e}static nonceInitialize(t){const e=Ot.InitializeNonceAccount,n=Et(e,{authorized:bt(t.authorizedPubkey.toBuffer())}),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:Kr,isSigner:!1,isWritable:!1}],programId:this.programId,data:n};return new Ct(s)}static nonceAdvance(t){const e=Ot.AdvanceNonceAccount,n=Et(e),s={keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n};return new Ct(s)}static nonceWithdraw(t){const e=Ot.WithdrawNonceAccount,n=Et(e,{lamports:t.lamports});return new Ct({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.toPubkey,isSigner:!1,isWritable:!0},{pubkey:qi,isSigner:!1,isWritable:!1},{pubkey:Kr,isSigner:!1,isWritable:!1},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static nonceAuthorize(t){const e=Ot.AuthorizeNonceAccount,n=Et(e,{authorized:bt(t.newAuthorizedPubkey.toBuffer())});return new Ct({keys:[{pubkey:t.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:t.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:n})}static allocate(t){let e,n;if("basePubkey"in t){const s=Ot.AllocateWithSeed;e=Et(s,{base:bt(t.basePubkey.toBuffer()),seed:t.seed,space:t.space,programId:bt(t.programId.toBuffer())}),n=[{pubkey:t.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:t.basePubkey,isSigner:!0,isWritable:!1}]}else{const s=Ot.Allocate;e=Et(s,{space:t.space}),n=[{pubkey:t.accountPubkey,isSigner:!0,isWritable:!0}]}return new Ct({keys:n,programId:this.programId,data:e})}}_e.programId=new Y("11111111111111111111111111111111");const Np=Yn-300;class hr{constructor(){}static getMinNumSignatures(t){return 2*(Math.ceil(t/hr.chunkSize)+1+1)}static async load(t,e,n,s,i){{const A=await t.getMinimumBalanceForRentExemption(i.length),S=await t.getAccountInfo(n.publicKey,"confirmed");let g=null;if(S!==null){if(S.executable)return console.error("Program load failed, account is already executable"),!1;S.data.length!==i.length&&(g=g||new _t,g.add(_e.allocate({accountPubkey:n.publicKey,space:i.length}))),S.owner.equals(s)||(g=g||new _t,g.add(_e.assign({accountPubkey:n.publicKey,programId:s}))),S.lamports<A&&(g=g||new _t,g.add(_e.transfer({fromPubkey:e.publicKey,toPubkey:n.publicKey,lamports:A-S.lamports})))}else g=new _t().add(_e.createAccount({fromPubkey:e.publicKey,newAccountPubkey:n.publicKey,lamports:A>0?A:1,space:i.length,programId:s}));g!==null&&await Go(t,g,[e,n],{commitment:"confirmed"})}const o=ot([st("instruction"),st("offset"),st("bytesLength"),st("bytesLengthPadding"),Me(At("byte"),Gn(st(),-8),"bytes")]),a=hr.chunkSize;let u=0,p=i,m=[];for(;p.length>0;){const A=p.slice(0,a),S=lt.Buffer.alloc(a+16);o.encode({instruction:0,offset:u,bytes:A,bytesLength:0,bytesLengthPadding:0},S);const g=new _t().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0}],programId:s,data:S});m.push(Go(t,g,[e,n],{commitment:"confirmed"})),t._rpcEndpoint.includes("solana.com")&&await nr(1e3/4),u+=a,p=p.slice(a)}await Promise.all(m);{const A=ot([st("instruction")]),S=lt.Buffer.alloc(A.span);A.encode({instruction:1},S);const g=new _t().add({keys:[{pubkey:n.publicKey,isSigner:!0,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1}],programId:s,data:S}),E="processed",R=await t.sendTransaction(g,[e,n],{preflightCommitment:E}),{context:T,value:M}=await t.confirmTransaction({signature:R,lastValidBlockHeight:g.lastValidBlockHeight,blockhash:g.recentBlockhash},E);if(M.err)throw new Error(`Transaction ${R} failed (${JSON.stringify(M)})`);for(;;){try{if(await t.getSlot({commitment:E})>T.slot)break}catch{}await new Promise(N=>setTimeout(N,Math.round(jl/2)))}}return!0}}hr.chunkSize=Np;const Op=new Y("BPFLoader2111111111111111111111111111111111");class Up{static getMinNumSignatures(t){return hr.getMinNumSignatures(t)}static load(t,e,n,s,i){return hr.load(t,e,n,i,s)}}function Wp(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _o,Hc;function Fp(){if(Hc)return _o;Hc=1;var r=Object.prototype.toString,t=Object.keys||function(n){var s=[];for(var i in n)s.push(i);return s};function e(n,s){var i,o,a,u,p,m,A;if(n===!0)return"true";if(n===!1)return"false";switch(typeof n){case"object":if(n===null)return null;if(n.toJSON&&typeof n.toJSON=="function")return e(n.toJSON(),s);if(A=r.call(n),A==="[object Array]"){for(a="[",o=n.length-1,i=0;i<o;i++)a+=e(n[i],!0)+",";return o>-1&&(a+=e(n[i],!0)),a+"]"}else if(A==="[object Object]"){for(u=t(n).sort(),o=u.length,a="",i=0;i<o;)p=u[i],m=e(n[p],!1),m!==void 0&&(a&&(a+=","),a+=JSON.stringify(p)+":"+m),i++;return"{"+a+"}"}else return JSON.stringify(n);case"function":case"undefined":return s?null:void 0;case"string":return JSON.stringify(n);default:return isFinite(n)?n:null}}return _o=function(n){var s=e(n,!1);if(s!==void 0)return""+s},_o}var zp=Fp(),Gc=Wp(zp);const ni=32;function Io(r){let t=0;for(;r>1;)r/=2,t++;return t}function Dp(r){return r===0?1:(r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r|=r>>32,r+1)}class Yl{constructor(t,e,n,s,i){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=e,this.warmup=n,this.firstNormalEpoch=s,this.firstNormalSlot=i}getEpoch(t){return this.getEpochAndSlotIndex(t)[0]}getEpochAndSlotIndex(t){if(t<this.firstNormalSlot){const e=Io(Dp(t+ni+1))-Io(ni)-1,n=this.getSlotsInEpoch(e),s=t-(n-ni);return[e,s]}else{const e=t-this.firstNormalSlot,n=Math.floor(e/this.slotsPerEpoch),s=this.firstNormalEpoch+n,i=e%this.slotsPerEpoch;return[s,i]}}getFirstSlotInEpoch(t){return t<=this.firstNormalEpoch?(Math.pow(2,t)-1)*ni:(t-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(t){return this.getFirstSlotInEpoch(t)+this.getSlotsInEpoch(t)-1}getSlotsInEpoch(t){return t<this.firstNormalEpoch?Math.pow(2,t+Io(ni)):this.slotsPerEpoch}}var Kp=globalThis.fetch;class $p extends q0{constructor(t,e,n){const s=i=>{const o=K0(i,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...e});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(s,t,e,n),this.underlyingSocket=void 0}call(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.call(...t):Promise.reject(new Error("Tried to call a JSON-RPC method `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}notify(...t){var n;const e=(n=this.underlyingSocket)==null?void 0:n.readyState;return e===1?super.notify(...t):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+t[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+e+")"))}}function qp(r,t){let e;try{e=r.layout.decode(t)}catch(n){throw new Error("invalid instruction; "+n)}if(e.typeIndex!==r.index)throw new Error(`invalid account data; account type mismatch ${e.typeIndex} != ${r.index}`);return e}const Yc=56;class Zo{constructor(t){this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}isActive(){const t=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===t}static deserialize(t){const e=qp(Vp,t),n=t.length-Yc;It(n>=0,"lookup table is invalid"),It(n%32===0,"lookup table is invalid");const s=n/32,{addresses:i}=ot([Me(St(),s,"addresses")]).decode(t.slice(Yc));return{deactivationSlot:e.deactivationSlot,lastExtendedSlot:e.lastExtendedSlot,lastExtendedSlotStartIndex:e.lastExtendedStartIndex,authority:e.authority.length!==0?new Y(e.authority[0]):void 0,addresses:i.map(o=>new Y(o))}}}const Vp={index:1,layout:ot([st("typeIndex"),$r("deactivationSlot"),xe("lastExtendedSlot"),At("lastExtendedStartIndex"),At(),Me(St(),Gn(At(),-1),"authority")])},jp=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function Hp(r){const t=r.match(jp);if(t==null)throw TypeError(`Failed to validate endpoint URL \`${r}\``);const[e,n,s,i]=t,o=r.startsWith("https:")?"wss:":"ws:",a=s==null?null:parseInt(s.slice(1),10),u=a==null?"":`:${a+1}`;return`${o}//${n}${u}${i}`}const jt=xi(Ka(Y),H(),r=>new Y(r)),Zl=$a([H(),Vt("base64")]),Qa=xi(Ka(lt.Buffer),Zl,r=>lt.Buffer.from(r[0],"base64")),Jl=30*1e3;function Gp(r){if(/^https?:/.test(r)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return r}function Nt(r){let t,e;if(typeof r=="string")t=r;else if(r){const{commitment:n,...s}=r;t=n,e=s}return{commitment:t,config:e}}function Zc(r){return r.map(t=>"memcmp"in t?{...t,memcmp:{...t.memcmp,encoding:t.memcmp.encoding??"base58"}}:t)}function Xl(r){return ze([q({jsonrpc:Vt("2.0"),id:H(),result:r}),q({jsonrpc:Vt("2.0"),id:H(),error:q({code:Jr(),message:H(),data:ut(h0())})})])}const Yp=Xl(Jr());function wt(r){return xi(Xl(r),Yp,t=>"error"in t?t:{...t,result:Q(t.result,r)})}function ee(r){return wt(q({context:q({slot:U()}),value:r}))}function Os(r){return q({context:q({slot:U()}),value:r})}function xo(r,t){return r===0?new fr({header:t.header,staticAccountKeys:t.accountKeys.map(e=>new Y(e)),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Re.decode(e.data)})),addressTableLookups:t.addressTableLookups}):new cn(t)}const Zp=q({foundation:U(),foundationTerm:U(),initial:U(),taper:U(),terminal:U()}),Jp=wt(nt(rt(q({epoch:U(),effectiveSlot:U(),amount:U(),postBalance:U(),commission:ut(rt(U()))})))),Xp=nt(q({slot:U(),prioritizationFee:U()})),Qp=q({total:U(),validator:U(),foundation:U(),epoch:U()}),tg=q({epoch:U(),slotIndex:U(),slotsInEpoch:U(),absoluteSlot:U(),blockHeight:ut(U()),transactionCount:ut(U())}),eg=q({slotsPerEpoch:U(),leaderScheduleSlotOffset:U(),warmup:wn(),firstNormalEpoch:U(),firstNormalSlot:U()}),ng=Il(H(),nt(U())),yr=rt(ze([q({}),H()])),rg=q({err:yr}),ig=Vt("receivedSignature"),sg=q({"solana-core":H(),"feature-set":ut(U())}),og=q({program:H(),programId:jt,parsed:Jr()}),ag=q({programId:jt,accounts:nt(jt),data:H()}),Jc=ee(q({err:rt(ze([q({}),H()])),logs:rt(nt(H())),accounts:ut(rt(nt(rt(q({executable:wn(),owner:H(),lamports:U(),data:nt(H()),rentEpoch:ut(U())}))))),unitsConsumed:ut(U()),returnData:ut(rt(q({programId:H(),data:$a([H(),Vt("base64")])}))),innerInstructions:ut(rt(nt(q({index:U(),instructions:nt(ze([og,ag]))}))))})),cg=ee(q({byIdentity:Il(H(),nt(U())),range:q({firstSlot:U(),lastSlot:U()})}));function ug(r,t,e,n,s,i){const o=e||Kp;let a;i!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let u;return n&&(u=async(m,A)=>{const S=await new Promise((g,E)=>{try{n(m,A,(R,T)=>g([R,T]))}catch(R){E(R)}});return await o(...S)}),new F0(async(m,A)=>{const S={method:"POST",body:m,agent:a,headers:Object.assign({"Content-Type":"application/json"},t||{},uy)};try{let g=5,E,R=500;for(;u?E=await u(r,S):E=await o(r,S),!(E.status!==429||s===!0||(g-=1,g===0));)console.error(`Server responded with ${E.status} ${E.statusText}.  Retrying after ${R}ms delay...`),await nr(R),R*=2;const T=await E.text();E.ok?A(null,T):A(new Error(`${E.status} ${E.statusText}: ${T}`))}catch(g){g instanceof Error&&A(g)}},{})}function lg(r){return(t,e)=>new Promise((n,s)=>{r.request(t,e,(i,o)=>{if(i){s(i);return}n(o)})})}function fg(r){return t=>new Promise((e,n)=>{t.length===0&&e([]);const s=t.map(i=>r.request(i.methodName,i.args));r.request(s,(i,o)=>{if(i){n(i);return}e(o)})})}const hg=wt(Zp),dg=wt(Qp),pg=wt(Xp),gg=wt(tg),yg=wt(eg),mg=wt(ng),wg=wt(U()),bg=ee(q({total:U(),circulating:U(),nonCirculating:U(),nonCirculatingAccounts:nt(jt)})),Jo=q({amount:H(),uiAmount:rt(U()),decimals:U(),uiAmountString:ut(H())}),vg=ee(nt(q({address:jt,amount:H(),uiAmount:rt(U()),decimals:U(),uiAmountString:ut(H())}))),Sg=ee(nt(q({pubkey:jt,account:q({executable:wn(),owner:jt,lamports:U(),data:Qa,rentEpoch:U()})}))),Xo=q({program:H(),parsed:Jr(),space:U()}),kg=ee(nt(q({pubkey:jt,account:q({executable:wn(),owner:jt,lamports:U(),data:Xo,rentEpoch:U()})}))),Eg=ee(nt(q({lamports:U(),address:jt}))),bi=q({executable:wn(),owner:jt,lamports:U(),data:Qa,rentEpoch:U()}),Ag=q({pubkey:jt,account:bi}),_g=xi(ze([Ka(lt.Buffer),Xo]),ze([Zl,Xo]),r=>Array.isArray(r)?Q(r,Qa):r),Qo=q({executable:wn(),owner:jt,lamports:U(),data:_g,rentEpoch:U()}),Ig=q({pubkey:jt,account:Qo}),xg=q({state:ze([Vt("active"),Vt("inactive"),Vt("activating"),Vt("deactivating")]),active:U(),inactive:U()}),Bg=wt(nt(q({signature:H(),slot:U(),err:yr,memo:rt(H()),blockTime:ut(rt(U()))}))),Rg=wt(nt(q({signature:H(),slot:U(),err:yr,memo:rt(H()),blockTime:ut(rt(U()))}))),Mg=q({subscription:U(),result:Os(bi)}),Tg=q({pubkey:jt,account:bi}),Cg=q({subscription:U(),result:Os(Tg)}),Pg=q({parent:U(),slot:U(),root:U()}),Lg=q({subscription:U(),result:Pg}),Ng=ze([q({type:ze([Vt("firstShredReceived"),Vt("completed"),Vt("optimisticConfirmation"),Vt("root")]),slot:U(),timestamp:U()}),q({type:Vt("createdBank"),parent:U(),slot:U(),timestamp:U()}),q({type:Vt("frozen"),slot:U(),timestamp:U(),stats:q({numTransactionEntries:U(),numSuccessfulTransactions:U(),numFailedTransactions:U(),maxTransactionsPerEntry:U()})}),q({type:Vt("dead"),slot:U(),timestamp:U(),err:H()})]),Og=q({subscription:U(),result:Ng}),Ug=q({subscription:U(),result:Os(ze([rg,ig]))}),Wg=q({subscription:U(),result:U()}),Fg=q({pubkey:H(),gossip:rt(H()),tpu:rt(H()),rpc:rt(H()),version:rt(H())}),Xc=q({votePubkey:H(),nodePubkey:H(),activatedStake:U(),epochVoteAccount:wn(),epochCredits:nt($a([U(),U(),U()])),commission:U(),lastVote:U(),rootSlot:rt(U())}),zg=wt(q({current:nt(Xc),delinquent:nt(Xc)})),Dg=ze([Vt("processed"),Vt("confirmed"),Vt("finalized")]),Kg=q({slot:U(),confirmations:rt(U()),err:yr,confirmationStatus:ut(Dg)}),$g=ee(nt(rt(Kg))),qg=wt(U()),Ql=q({accountKey:jt,writableIndexes:nt(U()),readonlyIndexes:nt(U())}),tc=q({signatures:nt(H()),message:q({accountKeys:nt(H()),header:q({numRequiredSignatures:U(),numReadonlySignedAccounts:U(),numReadonlyUnsignedAccounts:U()}),instructions:nt(q({accounts:nt(U()),data:H(),programIdIndex:U()})),recentBlockhash:H(),addressTableLookups:ut(nt(Ql))})}),tf=q({pubkey:jt,signer:wn(),writable:wn(),source:ut(ze([Vt("transaction"),Vt("lookupTable")]))}),ef=q({accountKeys:nt(tf),signatures:nt(H())}),nf=q({parsed:Jr(),program:H(),programId:jt}),rf=q({accounts:nt(jt),data:H(),programId:jt}),Vg=ze([rf,nf]),jg=ze([q({parsed:Jr(),program:H(),programId:H()}),q({accounts:nt(H()),data:H(),programId:H()})]),sf=xi(Vg,jg,r=>"accounts"in r?Q(r,rf):Q(r,nf)),of=q({signatures:nt(H()),message:q({accountKeys:nt(tf),instructions:nt(sf),recentBlockhash:H(),addressTableLookups:ut(rt(nt(Ql)))})}),ps=q({accountIndex:U(),mint:H(),owner:ut(H()),programId:ut(H()),uiTokenAmount:Jo}),af=q({writable:nt(jt),readonly:nt(jt)}),Us=q({err:yr,fee:U(),innerInstructions:ut(rt(nt(q({index:U(),instructions:nt(q({accounts:nt(U()),data:H(),programIdIndex:U()}))})))),preBalances:nt(U()),postBalances:nt(U()),logMessages:ut(rt(nt(H()))),preTokenBalances:ut(rt(nt(ps))),postTokenBalances:ut(rt(nt(ps))),loadedAddresses:ut(af),computeUnitsConsumed:ut(U()),costUnits:ut(U())}),ec=q({err:yr,fee:U(),innerInstructions:ut(rt(nt(q({index:U(),instructions:nt(sf)})))),preBalances:nt(U()),postBalances:nt(U()),logMessages:ut(rt(nt(H()))),preTokenBalances:ut(rt(nt(ps))),postTokenBalances:ut(rt(nt(ps))),loadedAddresses:ut(af),computeUnitsConsumed:ut(U()),costUnits:ut(U())}),Xr=ze([Vt(0),Vt("legacy")]),mr=q({pubkey:H(),lamports:U(),postBalance:rt(U()),rewardType:rt(H()),commission:ut(rt(U()))}),Hg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),transactions:nt(q({transaction:tc,meta:rt(Us),version:ut(Xr)})),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Gg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Yg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),transactions:nt(q({transaction:ef,meta:rt(Us),version:ut(Xr)})),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Zg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),transactions:nt(q({transaction:of,meta:rt(ec),version:ut(Xr)})),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Jg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),transactions:nt(q({transaction:ef,meta:rt(ec),version:ut(Xr)})),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Xg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),rewards:ut(nt(mr)),blockTime:rt(U()),blockHeight:rt(U())}))),Qg=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),transactions:nt(q({transaction:tc,meta:rt(Us)})),rewards:ut(nt(mr)),blockTime:rt(U())}))),Qc=wt(rt(q({blockhash:H(),previousBlockhash:H(),parentSlot:U(),signatures:nt(H()),blockTime:rt(U())}))),Bo=wt(rt(q({slot:U(),meta:rt(Us),blockTime:ut(rt(U())),transaction:tc,version:ut(Xr)}))),zi=wt(rt(q({slot:U(),transaction:of,meta:rt(ec),blockTime:ut(rt(U())),version:ut(Xr)}))),ty=ee(q({blockhash:H(),lastValidBlockHeight:U()})),ey=ee(wn()),ny=q({slot:U(),numTransactions:U(),numSlots:U(),samplePeriodSecs:U()}),ry=wt(nt(ny)),iy=ee(rt(q({feeCalculator:q({lamportsPerSignature:U()})}))),sy=wt(H()),oy=wt(H()),ay=q({err:yr,logs:nt(H()),signature:H()}),cy=q({result:Os(ay),subscription:U()}),uy={"solana-client":"js/1.0.0-maintenance"};class ly{constructor(t,e){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const p={};return async m=>{const{commitment:A,config:S}=Nt(m),g=this._buildArgs([],A,void 0,S),E=Gc(g);return p[E]=p[E]??(async()=>{try{const R=await this._rpcRequest("getBlockHeight",g),T=Q(R,wt(U()));if("error"in T)throw new at(T.error,"failed to get block height information");return T.result}finally{delete p[E]}})(),await p[E]}})();let n,s,i,o,a,u;e&&typeof e=="string"?this._commitment=e:e&&(this._commitment=e.commitment,this._confirmTransactionInitialTimeout=e.confirmTransactionInitialTimeout,n=e.wsEndpoint,s=e.httpHeaders,i=e.fetch,o=e.fetchMiddleware,a=e.disableRetryOnRateLimit,u=e.httpAgent),this._rpcEndpoint=Gp(t),this._rpcWsEndpoint=n||Hp(t),this._rpcClient=ug(t,s,i,o,a,u),this._rpcRequest=lg(this._rpcClient),this._rpcBatchRequest=fg(this._rpcClient),this._rpcWebSocket=new $p(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,void 0,s),o=await this._rpcRequest("getBalance",i),a=Q(o,ee(U()));if("error"in a)throw new at(a.error,`failed to get balance for ${t.toBase58()}`);return a.result}async getBalance(t,e){return await this.getBalanceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get balance of account "+t.toBase58()+": "+n)})}async getBlockTime(t){const e=await this._rpcRequest("getBlockTime",[t]),n=Q(e,wt(rt(U())));if("error"in n)throw new at(n.error,`failed to get block time for slot ${t}`);return n.result}async getMinimumLedgerSlot(){const t=await this._rpcRequest("minimumLedgerSlot",[]),e=Q(t,wt(U()));if("error"in e)throw new at(e.error,"failed to get minimum ledger slot");return e.result}async getFirstAvailableBlock(){const t=await this._rpcRequest("getFirstAvailableBlock",[]),e=Q(t,wg);if("error"in e)throw new at(e.error,"failed to get first available block");return e.result}async getSupply(t){let e={};typeof t=="string"?e={commitment:t}:t?e={...t,commitment:t&&t.commitment||this.commitment}:e={commitment:this.commitment};const n=await this._rpcRequest("getSupply",[e]),s=Q(n,bg);if("error"in s)throw new at(s.error,"failed to get supply");return s.result}async getTokenSupply(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenSupply",n),i=Q(s,ee(Jo));if("error"in i)throw new at(i.error,"failed to get token supply");return i.result}async getTokenAccountBalance(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenAccountBalance",n),i=Q(s,ee(Jo));if("error"in i)throw new at(i.error,"failed to get token account balance");return i.result}async getTokenAccountsByOwner(t,e,n){const{commitment:s,config:i}=Nt(n);let o=[t.toBase58()];"mint"in e?o.push({mint:e.mint.toBase58()}):o.push({programId:e.programId.toBase58()});const a=this._buildArgs(o,s,"base64",i),u=await this._rpcRequest("getTokenAccountsByOwner",a),p=Q(u,Sg);if("error"in p)throw new at(p.error,`failed to get token accounts owned by account ${t.toBase58()}`);return p.result}async getParsedTokenAccountsByOwner(t,e,n){let s=[t.toBase58()];"mint"in e?s.push({mint:e.mint.toBase58()}):s.push({programId:e.programId.toBase58()});const i=this._buildArgs(s,n,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",i),a=Q(o,kg);if("error"in a)throw new at(a.error,`failed to get token accounts owned by account ${t.toBase58()}`);return a.result}async getLargestAccounts(t){const e={...t,commitment:t&&t.commitment||this.commitment},n=e.filter||e.commitment?[e]:[],s=await this._rpcRequest("getLargestAccounts",n),i=Q(s,Eg);if("error"in i)throw new at(i.error,"failed to get largest accounts");return i.result}async getTokenLargestAccounts(t,e){const n=this._buildArgs([t.toBase58()],e),s=await this._rpcRequest("getTokenLargestAccounts",n),i=Q(s,vg);if("error"in i)throw new at(i.error,"failed to get token largest accounts");return i.result}async getAccountInfoAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"base64",s),o=await this._rpcRequest("getAccountInfo",i),a=Q(o,ee(rt(bi)));if("error"in a)throw new at(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getParsedAccountInfo(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getAccountInfo",i),a=Q(o,ee(rt(Qo)));if("error"in a)throw new at(a.error,`failed to get info about account ${t.toBase58()}`);return a.result}async getAccountInfo(t,e){try{return(await this.getAccountInfoAndContext(t,e)).value}catch(n){throw new Error("failed to get info about account "+t.toBase58()+": "+n)}}async getMultipleParsedAccounts(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"jsonParsed",s),a=await this._rpcRequest("getMultipleAccounts",o),u=Q(a,ee(nt(rt(Qo))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfoAndContext(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(p=>p.toBase58()),o=this._buildArgs([i],n,"base64",s),a=await this._rpcRequest("getMultipleAccounts",o),u=Q(a,ee(nt(rt(bi))));if("error"in u)throw new at(u.error,`failed to get info for accounts ${i}`);return u.result}async getMultipleAccountsInfo(t,e){return(await this.getMultipleAccountsInfoAndContext(t,e)).value}async getStakeActivation(t,e,n){const{commitment:s,config:i}=Nt(e),o=this._buildArgs([t.toBase58()],s,void 0,{...i,epoch:n??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getStakeActivation",o),u=Q(a,wt(xg));if("error"in u)throw new at(u.error,`failed to get Stake Activation ${t.toBase58()}`);return u.result}async getProgramAccounts(t,e){const{commitment:n,config:s}=Nt(e),{encoding:i,...o}=s||{},a=this._buildArgs([t.toBase58()],n,i||"base64",{...o,...o.filters?{filters:Zc(o.filters)}:null}),u=await this._rpcRequest("getProgramAccounts",a),p=nt(Ag),m=o.withContext===!0?Q(u,ee(p)):Q(u,wt(p));if("error"in m)throw new at(m.error,`failed to get accounts owned by program ${t.toBase58()}`);return m.result}async getParsedProgramAccounts(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t.toBase58()],n,"jsonParsed",s),o=await this._rpcRequest("getProgramAccounts",i),a=Q(o,wt(nt(Ig)));if("error"in a)throw new at(a.error,`failed to get accounts owned by program ${t.toBase58()}`);return a.result}async confirmTransaction(t,e){var i;let n;if(typeof t=="string")n=t;else{const o=t;if((i=o.abortSignal)!=null&&i.aborted)return Promise.reject(o.abortSignal.reason);n=o.signature}let s;try{s=Re.decode(n)}catch{throw new Error("signature must be base58 encoded: "+n)}return It(s.length===64,"signature has invalid length"),typeof t=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:e||this.commitment,signature:n}):"lastValidBlockHeight"in t?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e||this.commitment,strategy:t}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:e||this.commitment,strategy:t})}getCancellationPromise(t){return new Promise((e,n)=>{t!=null&&(t.aborted?n(t.reason):t.addEventListener("abort",()=>{n(t.reason)}))})}getTransactionConfirmationPromise({commitment:t,signature:e}){let n,s,i=!1;const o=new Promise((u,p)=>{try{n=this.onSignature(e,(A,S)=>{n=void 0;const g={context:S,value:A};u({__type:_n.PROCESSED,response:g})},t);const m=new Promise(A=>{n==null?A():s=this._onSubscriptionStateChange(n,S=>{S==="subscribed"&&A()})});(async()=>{if(await m,i)return;const A=await this.getSignatureStatus(e);if(i||A==null)return;const{context:S,value:g}=A;if(g!=null)if(g!=null&&g.err)p(g.err);else{switch(t){case"confirmed":case"single":case"singleGossip":{if(g.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(g.confirmationStatus==="processed"||g.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}i=!0,u({__type:_n.PROCESSED,response:{context:S,value:g}})}})()}catch(m){p(m)}});return{abortConfirmation:()=>{s&&(s(),s=void 0),n!=null&&(this.removeSignatureListener(n),n=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:t,strategy:{abortSignal:e,lastValidBlockHeight:n,signature:s}}){let i=!1;const o=new Promise(A=>{const S=async()=>{try{return await this.getBlockHeight(t)}catch{return-1}};(async()=>{let g=await S();if(!i){for(;g<=n;)if(await nr(1e3),i||(g=await S(),i))return;A({__type:_n.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:t,signature:s}),p=this.getCancellationPromise(e);let m;try{const A=await Promise.race([p,u,o]);if(A.__type===_n.PROCESSED)m=A.response;else throw new Za(s)}finally{i=!0,a()}return m}async confirmTransactionUsingDurableNonceStrategy({commitment:t,strategy:{abortSignal:e,minContextSlot:n,nonceAccountPubkey:s,nonceValue:i,signature:o}}){let a=!1;const u=new Promise(g=>{let E=i,R=null;const T=async()=>{try{const{context:M,value:N}=await this.getNonceAndContext(s,{commitment:t,minContextSlot:n});return R=M.slot,N==null?void 0:N.nonce}catch{return E}};(async()=>{if(E=await T(),!a)for(;;){if(i!==E){g({__type:_n.NONCE_INVALID,slotInWhichNonceDidAdvance:R});return}if(await nr(2e3),a||(E=await T(),a))return}})()}),{abortConfirmation:p,confirmationPromise:m}=this.getTransactionConfirmationPromise({commitment:t,signature:o}),A=this.getCancellationPromise(e);let S;try{const g=await Promise.race([A,m,u]);if(g.__type===_n.PROCESSED)S=g.response;else{let E;for(;;){const R=await this.getSignatureStatus(o);if(R==null)break;if(R.context.slot<(g.slotInWhichNonceDidAdvance??n)){await nr(400);continue}E=R;break}if(E!=null&&E.value){const R=t||"finalized",{confirmationStatus:T}=E.value;switch(R){case"processed":case"recent":if(T!=="processed"&&T!=="confirmed"&&T!=="finalized")throw new Tr(o);break;case"confirmed":case"single":case"singleGossip":if(T!=="confirmed"&&T!=="finalized")throw new Tr(o);break;case"finalized":case"max":case"root":if(T!=="finalized")throw new Tr(o);break;default:}S={context:E.context,value:{err:E.value.err}}}else throw new Tr(o)}}finally{a=!0,p()}return S}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:t,signature:e}){let n;const s=new Promise(u=>{let p=this._confirmTransactionInitialTimeout||6e4;switch(t){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{p=this._confirmTransactionInitialTimeout||3e4;break}}n=setTimeout(()=>u({__type:_n.TIMED_OUT,timeoutMs:p}),p)}),{abortConfirmation:i,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:t,signature:e});let a;try{const u=await Promise.race([o,s]);if(u.__type===_n.PROCESSED)a=u.response;else throw new Ja(e,u.timeoutMs/1e3)}finally{clearTimeout(n),i()}return a}async getClusterNodes(){const t=await this._rpcRequest("getClusterNodes",[]),e=Q(t,wt(nt(Fg)));if("error"in e)throw new at(e.error,"failed to get cluster nodes");return e.result}async getVoteAccounts(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getVoteAccounts",e),s=Q(n,zg);if("error"in s)throw new at(s.error,"failed to get vote accounts");return s.result}async getSlot(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlot",s),o=Q(i,wt(U()));if("error"in o)throw new at(o.error,"failed to get slot");return o.result}async getSlotLeader(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getSlotLeader",s),o=Q(i,wt(H()));if("error"in o)throw new at(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(t,e){const n=[t,e],s=await this._rpcRequest("getSlotLeaders",n),i=Q(s,wt(nt(jt)));if("error"in i)throw new at(i.error,"failed to get slot leaders");return i.result}async getSignatureStatus(t,e){const{context:n,value:s}=await this.getSignatureStatuses([t],e);It(s.length===1);const i=s[0];return{context:n,value:i}}async getSignatureStatuses(t,e){const n=[t];e&&n.push(e);const s=await this._rpcRequest("getSignatureStatuses",n),i=Q(s,$g);if("error"in i)throw new at(i.error,"failed to get signature status");return i.result}async getTransactionCount(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getTransactionCount",s),o=Q(i,wt(U()));if("error"in o)throw new at(o.error,"failed to get transaction count");return o.result}async getTotalSupply(t){return(await this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(t){const e=this._buildArgs([],t),n=await this._rpcRequest("getInflationGovernor",e),s=Q(n,hg);if("error"in s)throw new at(s.error,"failed to get inflation");return s.result}async getInflationReward(t,e,n){const{commitment:s,config:i}=Nt(n),o=this._buildArgs([t.map(p=>p.toBase58())],s,void 0,{...i,epoch:e??(i==null?void 0:i.epoch)}),a=await this._rpcRequest("getInflationReward",o),u=Q(a,Jp);if("error"in u)throw new at(u.error,"failed to get inflation reward");return u.result}async getInflationRate(){const t=await this._rpcRequest("getInflationRate",[]),e=Q(t,dg);if("error"in e)throw new at(e.error,"failed to get inflation rate");return e.result}async getEpochInfo(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getEpochInfo",s),o=Q(i,gg);if("error"in o)throw new at(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const t=await this._rpcRequest("getEpochSchedule",[]),e=Q(t,yg);if("error"in e)throw new at(e.error,"failed to get epoch schedule");const n=e.result;return new Yl(n.slotsPerEpoch,n.leaderScheduleSlotOffset,n.warmup,n.firstNormalEpoch,n.firstNormalSlot)}async getLeaderSchedule(){const t=await this._rpcRequest("getLeaderSchedule",[]),e=Q(t,mg);if("error"in e)throw new at(e.error,"failed to get leader schedule");return e.result}async getMinimumBalanceForRentExemption(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getMinimumBalanceForRentExemption",n),i=Q(s,qg);return"error"in i?(console.warn("Unable to fetch minimum balance for rent exemption"),0):i.result}async getRecentBlockhashAndContext(t){const{context:e,value:{blockhash:n}}=await this.getLatestBlockhashAndContext(t);return{context:e,value:{blockhash:n,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(t){const e=await this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]),n=Q(e,ry);if("error"in n)throw new at(n.error,"failed to get recent performance samples");return n.result}async getFeeCalculatorForBlockhash(t,e){const n=this._buildArgs([t],e),s=await this._rpcRequest("getFeeCalculatorForBlockhash",n),i=Q(s,iy);if("error"in i)throw new at(i.error,"failed to get fee calculator");const{context:o,value:a}=i.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(t,e){const n=bt(t.serialize()).toString("base64"),s=this._buildArgs([n],e),i=await this._rpcRequest("getFeeForMessage",s),o=Q(i,ee(rt(U())));if("error"in o)throw new at(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(t){var o;const e=(o=t==null?void 0:t.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),n=e!=null&&e.length?[e]:[],s=await this._rpcRequest("getRecentPrioritizationFees",n),i=Q(s,pg);if("error"in i)throw new at(i.error,"failed to get recent prioritization fees");return i.result}async getRecentBlockhash(t){try{return(await this.getRecentBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhash(t){try{return(await this.getLatestBlockhashAndContext(t)).value}catch(e){throw new Error("failed to get recent blockhash: "+e)}}async getLatestBlockhashAndContext(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,void 0,n),i=await this._rpcRequest("getLatestBlockhash",s),o=Q(i,ty);if("error"in o)throw new at(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgs([t],n,void 0,s),o=await this._rpcRequest("isBlockhashValid",i),a=Q(o,ey);if("error"in a)throw new at(a.error,"failed to determine if the blockhash `"+t+"`is valid");return a.result}async getVersion(){const t=await this._rpcRequest("getVersion",[]),e=Q(t,wt(sg));if("error"in e)throw new at(e.error,"failed to get version");return e.result}async getGenesisHash(){const t=await this._rpcRequest("getGenesisHash",[]),e=Q(t,wt(H()));if("error"in e)throw new at(e.error,"failed to get genesis hash");return e.result}async getBlock(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Q(o,Yg);if("error"in a)throw a.error;return a.result}case"none":{const a=Q(o,Gg);if("error"in a)throw a.error;return a.result}default:{const a=Q(o,Hg);if("error"in a)throw a.error;const{result:u}=a;return u?{...u,transactions:u.transactions.map(({transaction:p,meta:m,version:A})=>({meta:m,transaction:{...p,message:xo(A,p.message)},version:A}))}:null}}}catch(a){throw new at(a,"failed to get confirmed block")}}async getParsedBlock(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getBlock",i);try{switch(s==null?void 0:s.transactionDetails){case"accounts":{const a=Q(o,Jg);if("error"in a)throw a.error;return a.result}case"none":{const a=Q(o,Xg);if("error"in a)throw a.error;return a.result}default:{const a=Q(o,Zg);if("error"in a)throw a.error;return a.result}}}catch(a){throw new at(a,"failed to get block")}}async getBlockProduction(t){let e,n;if(typeof t=="string")n=t;else if(t){const{commitment:a,...u}=t;n=a,e=u}const s=this._buildArgs([],n,"base64",e),i=await this._rpcRequest("getBlockProduction",s),o=Q(i,cg);if("error"in o)throw new at(o.error,"failed to get block production information");return o.result}async getTransaction(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,void 0,s),o=await this._rpcRequest("getTransaction",i),a=Q(o,Bo);if("error"in a)throw new at(a.error,"failed to get transaction");const u=a.result;return u&&{...u,transaction:{...u.transaction,message:xo(u.version,u.transaction.message)}}}async getParsedTransaction(t,e){const{commitment:n,config:s}=Nt(e),i=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed",s),o=await this._rpcRequest("getTransaction",i),a=Q(o,zi);if("error"in a)throw new at(a.error,"failed to get transaction");return a.result}async getParsedTransactions(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,"jsonParsed",s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=Q(u,zi);if("error"in p)throw new at(p.error,"failed to get transactions");return p.result})}async getTransactions(t,e){const{commitment:n,config:s}=Nt(e),i=t.map(u=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([u],n,void 0,s)}));return(await this._rpcBatchRequest(i)).map(u=>{const p=Q(u,Bo);if("error"in p)throw new at(p.error,"failed to get transactions");const m=p.result;return m&&{...m,transaction:{...m.transaction,message:xo(m.version,m.transaction.message)}}})}async getConfirmedBlock(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getBlock",n),i=Q(s,Qg);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");const a={...o,transactions:o.transactions.map(({transaction:u,meta:p})=>{const m=new cn(u.message);return{meta:p,transaction:{...u,message:m}}})};return{...a,transactions:a.transactions.map(({transaction:u,meta:p})=>({meta:p,transaction:_t.populate(u.message,u.signatures)}))}}async getBlocks(t,e,n){const s=this._buildArgsAtLeastConfirmed(e!==void 0?[t,e]:[t],n),i=await this._rpcRequest("getBlocks",s),o=Q(i,wt(nt(U())));if("error"in o)throw new at(o.error,"failed to get blocks");return o.result}async getBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Qc);if("error"in i)throw new at(i.error,"failed to get block");const o=i.result;if(!o)throw new Error("Block "+t+" not found");return o}async getConfirmedBlockSignatures(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,void 0,{transactionDetails:"signatures",rewards:!1}),s=await this._rpcRequest("getBlock",n),i=Q(s,Qc);if("error"in i)throw new at(i.error,"failed to get confirmed block");const o=i.result;if(!o)throw new Error("Confirmed block "+t+" not found");return o}async getConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e),s=await this._rpcRequest("getTransaction",n),i=Q(s,Bo);if("error"in i)throw new at(i.error,"failed to get transaction");const o=i.result;if(!o)return o;const a=new cn(o.transaction.message),u=o.transaction.signatures;return{...o,transaction:_t.populate(a,u)}}async getParsedConfirmedTransaction(t,e){const n=this._buildArgsAtLeastConfirmed([t],e,"jsonParsed"),s=await this._rpcRequest("getTransaction",n),i=Q(s,zi);if("error"in i)throw new at(i.error,"failed to get confirmed transaction");return i.result}async getParsedConfirmedTransactions(t,e){const n=t.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],e,"jsonParsed")}));return(await this._rpcBatchRequest(n)).map(o=>{const a=Q(o,zi);if("error"in a)throw new at(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(t,e,n){let s={},i=await this.getFirstAvailableBlock();for(;!("until"in s)&&(e--,!(e<=0||e<i));)try{const u=await this.getConfirmedBlockSignatures(e,"finalized");u.signatures.length>0&&(s.until=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}let o=await this.getSlot("finalized");for(;!("before"in s)&&(n++,!(n>o));)try{const u=await this.getConfirmedBlockSignatures(n);u.signatures.length>0&&(s.before=u.signatures[u.signatures.length-1].toString())}catch(u){if(u instanceof Error&&u.message.includes("skipped"))continue;throw u}return(await this.getConfirmedSignaturesForAddress2(t,s)).map(u=>u.signature)}async getConfirmedSignaturesForAddress2(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getConfirmedSignaturesForAddress2",s),o=Q(i,Bg);if("error"in o)throw new at(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(t,e,n){const s=this._buildArgsAtLeastConfirmed([t.toBase58()],n,void 0,e),i=await this._rpcRequest("getSignaturesForAddress",s),o=Q(i,Rg);if("error"in o)throw new at(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=new Zo({key:t,state:Zo.deserialize(s.data)})),{context:n,value:i}}async getNonceAndContext(t,e){const{context:n,value:s}=await this.getAccountInfoAndContext(t,e);let i=null;return s!==null&&(i=Ns.fromAccountData(s.data)),{context:n,value:i}}async getNonce(t,e){return await this.getNonceAndContext(t,e).then(n=>n.value).catch(n=>{throw new Error("failed to get nonce for account "+t.toBase58()+": "+n)})}async requestAirdrop(t,e){const n=await this._rpcRequest("requestAirdrop",[t.toBase58(),e]),s=Q(n,sy);if("error"in s)throw new at(s.error,`airdrop to ${t.toBase58()} failed`);return s.result}async _blockhashWithExpiryBlockHeight(t){if(!t){for(;this._pollingBlockhash;)await nr(100);const n=Date.now()-this._blockhashInfo.lastFetch>=Jl;if(this._blockhashInfo.latestBlockhash!==null&&!n)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const t=Date.now(),e=this._blockhashInfo.latestBlockhash,n=e?e.blockhash:null;for(let s=0;s<50;s++){const i=await this.getLatestBlockhash("finalized");if(n!==i.blockhash)return this._blockhashInfo={latestBlockhash:i,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},i;await nr(jl/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-t}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(t){const{commitment:e,config:n}=Nt(t),s=this._buildArgs([],e,"base64",n),i=await this._rpcRequest("getStakeMinimumDelegation",s),o=Q(i,ee(U()));if("error"in o)throw new at(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(t,e,n){if("message"in t){const R=t.serialize(),T=lt.Buffer.from(R).toString("base64");if(Array.isArray(e)||n!==void 0)throw new Error("Invalid arguments");const M=e||{};M.encoding="base64","commitment"in M||(M.commitment=this.commitment),e&&typeof e=="object"&&"innerInstructions"in e&&(M.innerInstructions=e.innerInstructions);const N=[T,M],P=await this._rpcRequest("simulateTransaction",N),W=Q(P,Jc);if("error"in W)throw new Error("failed to simulate transaction: "+W.error.message);return W.result}let s;if(t instanceof _t){let E=t;s=new _t,s.feePayer=E.feePayer,s.instructions=t.instructions,s.nonceInfo=E.nonceInfo,s.signatures=E.signatures}else s=_t.populate(t),s._message=s._json=void 0;if(e!==void 0&&!Array.isArray(e))throw new Error("Invalid arguments");const i=e;if(s.nonceInfo&&i)s.sign(...i);else{let E=this._disableBlockhashCaching;for(;;){const R=await this._blockhashWithExpiryBlockHeight(E);if(s.lastValidBlockHeight=R.lastValidBlockHeight,s.recentBlockhash=R.blockhash,!i)break;if(s.sign(...i),!s.signature)throw new Error("!signature");const T=s.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(T)&&!this._blockhashInfo.transactionSignatures.includes(T)){this._blockhashInfo.simulatedSignatures.push(T);break}else E=!0}}const o=s._compile(),a=o.serialize(),p=s._serialize(a).toString("base64"),m={encoding:"base64",commitment:this.commitment};if(n){const E=(Array.isArray(n)?n:o.nonProgramIds()).map(R=>R.toBase58());m.accounts={encoding:"base64",addresses:E}}i&&(m.sigVerify=!0),e&&typeof e=="object"&&"innerInstructions"in e&&(m.innerInstructions=e.innerInstructions);const A=[p,m],S=await this._rpcRequest("simulateTransaction",A),g=Q(S,Jc);if("error"in g){let E;if("data"in g.error&&(E=g.error.data.logs,E&&Array.isArray(E))){const R=`
    `,T=R+E.join(R);console.error(g.error.message,T)}throw new wi({action:"simulate",signature:"",transactionMessage:g.error.message,logs:E})}return g.result}async sendTransaction(t,e,n){if("version"in t){if(e&&Array.isArray(e))throw new Error("Invalid arguments");const o=t.serialize();return await this.sendRawTransaction(o,e)}if(e===void 0||!Array.isArray(e))throw new Error("Invalid arguments");const s=e;if(t.nonceInfo)t.sign(...s);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(t.lastValidBlockHeight=a.lastValidBlockHeight,t.recentBlockhash=a.blockhash,t.sign(...s),!t.signature)throw new Error("!signature");const u=t.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(u))o=!0;else{this._blockhashInfo.transactionSignatures.push(u);break}}}const i=t.serialize();return await this.sendRawTransaction(i,n)}async sendRawTransaction(t,e){const n=bt(t).toString("base64");return await this.sendEncodedTransaction(n,e)}async sendEncodedTransaction(t,e){const n={encoding:"base64"},s=e&&e.skipPreflight,i=s===!0?"processed":e&&e.preflightCommitment||this.commitment;e&&e.maxRetries!=null&&(n.maxRetries=e.maxRetries),e&&e.minContextSlot!=null&&(n.minContextSlot=e.minContextSlot),s&&(n.skipPreflight=s),i&&(n.preflightCommitment=i);const o=[t,n],a=await this._rpcRequest("sendTransaction",o),u=Q(a,oy);if("error"in u){let p;throw"data"in u.error&&(p=u.error.data.logs),new wi({action:s?"send":"simulate",signature:"",transactionMessage:u.error.message,logs:p})}return u.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(t){this._rpcWebSocketConnected=!1,console.error("ws error:",t.message)}_wsOnClose(t){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),t===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([e,n])=>{this._setSubscription(e,{...n,state:"pending"})})}_setSubscription(t,e){var s;const n=(s=this._subscriptionsByHash[t])==null?void 0:s.state;if(this._subscriptionsByHash[t]=e,n!==e.state){const i=this._subscriptionStateChangeCallbacksByHash[t];i&&i.forEach(o=>{try{o(e.state)}catch{}})}}_onSubscriptionStateChange(t,e){var i;const n=this._subscriptionHashByClientSubscriptionId[t];if(n==null)return()=>{};const s=(i=this._subscriptionStateChangeCallbacksByHash)[n]||(i[n]=new Set);return s.add(e),()=>{s.delete(e),s.size===0&&delete this._subscriptionStateChangeCallbacksByHash[n]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(n){n instanceof Error&&console.log(`Error when closing socket connection: ${n.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const t=this._rpcWebSocketGeneration,e=()=>t===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async n=>{const s=this._subscriptionsByHash[n];if(s!==void 0)switch(s.state){case"pending":case"unsubscribed":if(s.callbacks.size===0){delete this._subscriptionsByHash[n],s.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[s.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:i,method:o}=s;try{this._setSubscription(n,{...s,state:"subscribing"});const a=await this._rpcWebSocket.call(o,i);this._setSubscription(n,{...s,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=s.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:i,error:a}),!e())return;this._setSubscription(n,{...s,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":s.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:i,unsubscribeMethod:o}=s;if(this._subscriptionsAutoDisposedByRpc.has(i))this._subscriptionsAutoDisposedByRpc.delete(i);else{this._setSubscription(n,{...s,state:"unsubscribing"}),this._setSubscription(n,{...s,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[i])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!e())return;this._setSubscription(n,{...s,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(n,{...s,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(t,e){const n=this._subscriptionCallbacksByServerSubscriptionId[t];n!==void 0&&n.forEach(s=>{try{s(...e)}catch(i){console.error(i)}})}_wsOnAccountNotification(t){const{result:e,subscription:n}=Q(t,Mg);this._handleServerNotification(n,[e.value,e.context])}_makeSubscription(t,e){const n=this._nextClientSubscriptionId++,s=Gc([t.method,e]),i=this._subscriptionsByHash[s];return i===void 0?this._subscriptionsByHash[s]={...t,args:e,callbacks:new Set([t.callback]),state:"pending"}:i.callbacks.add(t.callback),this._subscriptionHashByClientSubscriptionId[n]=s,this._subscriptionDisposeFunctionsByClientSubscriptionId[n]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[n],delete this._subscriptionHashByClientSubscriptionId[n];const o=this._subscriptionsByHash[s];It(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${n}`),o.callbacks.delete(t.callback),await this._updateSubscriptions()},this._updateSubscriptions(),n}onAccountChange(t,e,n){const{commitment:s,config:i}=Nt(n),o=this._buildArgs([t.toBase58()],s||this._commitment||"finalized","base64",i);return this._makeSubscription({callback:e,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"account change")}_wsOnProgramAccountNotification(t){const{result:e,subscription:n}=Q(t,Cg);this._handleServerNotification(n,[{accountId:e.value.pubkey,accountInfo:e.value.account},e.context])}onProgramAccountChange(t,e,n,s){const{commitment:i,config:o}=Nt(n),a=this._buildArgs([t.toBase58()],i||this._commitment||"finalized","base64",o||(s?{filters:Zc(s)}:void 0));return this._makeSubscription({callback:e,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(t){await this._unsubscribeClientSubscription(t,"program account change")}onLogs(t,e,n){const s=this._buildArgs([typeof t=="object"?{mentions:[t.toString()]}:t],n||this._commitment||"finalized");return this._makeSubscription({callback:e,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},s)}async removeOnLogsListener(t){await this._unsubscribeClientSubscription(t,"logs")}_wsOnLogsNotification(t){const{result:e,subscription:n}=Q(t,cy);this._handleServerNotification(n,[e.value,e.context])}_wsOnSlotNotification(t){const{result:e,subscription:n}=Q(t,Lg);this._handleServerNotification(n,[e])}onSlotChange(t){return this._makeSubscription({callback:t,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(t){await this._unsubscribeClientSubscription(t,"slot change")}_wsOnSlotUpdatesNotification(t){const{result:e,subscription:n}=Q(t,Og);this._handleServerNotification(n,[e])}onSlotUpdate(t){return this._makeSubscription({callback:t,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(t){await this._unsubscribeClientSubscription(t,"slot update")}async _unsubscribeClientSubscription(t,e){const n=this._subscriptionDisposeFunctionsByClientSubscriptionId[t];n?await n():console.warn(`Ignored unsubscribe request because an active subscription with id \`${t}\` for '${e}' events could not be found.`)}_buildArgs(t,e,n,s){const i=e||this._commitment;if(i||n||s){let o={};n&&(o.encoding=n),i&&(o.commitment=i),s&&(o=Object.assign(o,s)),t.push(o)}return t}_buildArgsAtLeastConfirmed(t,e,n,s){const i=e||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(t,e,n,s)}_wsOnSignatureNotification(t){const{result:e,subscription:n}=Q(t,Ug);e.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(n),this._handleServerNotification(n,e.value==="receivedSignature"?[{type:"received"},e.context]:[{type:"status",result:e.value},e.context])}onSignature(t,e,n){const s=this._buildArgs([t],n||this._commitment||"finalized"),i=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){e(o.result,a);try{this.removeSignatureListener(i)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},s);return i}onSignatureWithOptions(t,e,n){const{commitment:s,...i}={...n,commitment:n&&n.commitment||this._commitment||"finalized"},o=this._buildArgs([t],s,void 0,i),a=this._makeSubscription({callback:(u,p)=>{e(u,p);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(t){await this._unsubscribeClientSubscription(t,"signature result")}_wsOnRootNotification(t){const{result:e,subscription:n}=Q(t,Wg);this._handleServerNotification(n,[e])}onRootChange(t){return this._makeSubscription({callback:t,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(t){await this._unsubscribeClientSubscription(t,"root change")}}class Nr{constructor(t){this._keypair=void 0,this._keypair=t??qc()}static generate(){return new Nr(qc())}static fromSecretKey(t,e){if(t.byteLength!==64)throw new Error("bad secret key size");const n=t.slice(32,64);if(!e||!e.skipValidation){const s=t.slice(0,32),i=ds(s);for(let o=0;o<32;o++)if(n[o]!==i[o])throw new Error("provided secretKey is invalid")}return new Nr({publicKey:n,secretKey:t})}static fromSeed(t){const e=ds(t),n=new Uint8Array(64);return n.set(t),n.set(e,32),new Nr({publicKey:e,secretKey:n})}get publicKey(){return new Y(this._keypair.publicKey)}get secretKey(){return new Uint8Array(this._keypair.secretKey)}}const Mn=Object.freeze({CreateLookupTable:{index:0,layout:ot([st("instruction"),$r("recentSlot"),At("bumpSeed")])},FreezeLookupTable:{index:1,layout:ot([st("instruction")])},ExtendLookupTable:{index:2,layout:ot([st("instruction"),$r(),Me(St(),Gn(st(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:ot([st("instruction")])},CloseLookupTable:{index:4,layout:ot([st("instruction")])}});class fy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const n=st("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Mn))if(o.index==n){s=i;break}if(!s)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return s}static decodeCreateLookupTable(t){this.checkProgramId(t.programId),this.checkKeysLength(t.keys,4);const{recentSlot:e}=Bt(Mn.CreateLookupTable,t.data);return{authority:t.keys[1].pubkey,payer:t.keys[2].pubkey,recentSlot:Number(e)}}static decodeExtendLookupTable(t){if(this.checkProgramId(t.programId),t.keys.length<2)throw new Error(`invalid instruction; found ${t.keys.length} keys, expected at least 2`);const{addresses:e}=Bt(Mn.ExtendLookupTable,t.data);return{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,payer:t.keys.length>2?t.keys[2].pubkey:void 0,addresses:e.map(n=>new Y(n))}}static decodeCloseLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,3),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey,recipient:t.keys[2].pubkey}}static decodeFreezeLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static decodeDeactivateLookupTable(t){return this.checkProgramId(t.programId),this.checkKeysLength(t.keys,2),{lookupTable:t.keys[0].pubkey,authority:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(nc.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}static checkKeysLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}class nc{constructor(){}static createLookupTable(t){const[e,n]=Y.findProgramAddressSync([t.authority.toBuffer(),El().encode(t.recentSlot)],this.programId),s=Mn.CreateLookupTable,i=Et(s,{recentSlot:BigInt(t.recentSlot),bumpSeed:n}),o=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}];return[new Ct({programId:this.programId,keys:o,data:i}),e]}static freezeLookupTable(t){const e=Mn.FreezeLookupTable,n=Et(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ct({programId:this.programId,keys:s,data:n})}static extendLookupTable(t){const e=Mn.ExtendLookupTable,n=Et(e,{addresses:t.addresses.map(i=>i.toBytes())}),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return t.payer&&s.push({pubkey:t.payer,isSigner:!0,isWritable:!0},{pubkey:_e.programId,isSigner:!1,isWritable:!1}),new Ct({programId:this.programId,keys:s,data:n})}static deactivateLookupTable(t){const e=Mn.DeactivateLookupTable,n=Et(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1}];return new Ct({programId:this.programId,keys:s,data:n})}static closeLookupTable(t){const e=Mn.CloseLookupTable,n=Et(e),s=[{pubkey:t.lookupTable,isSigner:!1,isWritable:!0},{pubkey:t.authority,isSigner:!0,isWritable:!1},{pubkey:t.recipient,isSigner:!1,isWritable:!0}];return new Ct({programId:this.programId,keys:s,data:n})}}nc.programId=new Y("AddressLookupTab1e1111111111111111111111111");class hy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const n=At("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(pn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return s}static decodeRequestUnits(t){this.checkProgramId(t.programId);const{units:e,additionalFee:n}=Bt(pn.RequestUnits,t.data);return{units:e,additionalFee:n}}static decodeRequestHeapFrame(t){this.checkProgramId(t.programId);const{bytes:e}=Bt(pn.RequestHeapFrame,t.data);return{bytes:e}}static decodeSetComputeUnitLimit(t){this.checkProgramId(t.programId);const{units:e}=Bt(pn.SetComputeUnitLimit,t.data);return{units:e}}static decodeSetComputeUnitPrice(t){this.checkProgramId(t.programId);const{microLamports:e}=Bt(pn.SetComputeUnitPrice,t.data);return{microLamports:e}}static checkProgramId(t){if(!t.equals(rc.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}const pn=Object.freeze({RequestUnits:{index:0,layout:ot([At("instruction"),st("units"),st("additionalFee")])},RequestHeapFrame:{index:1,layout:ot([At("instruction"),st("bytes")])},SetComputeUnitLimit:{index:2,layout:ot([At("instruction"),st("units")])},SetComputeUnitPrice:{index:3,layout:ot([At("instruction"),$r("microLamports")])}});class rc{constructor(){}static requestUnits(t){const e=pn.RequestUnits,n=Et(e,t);return new Ct({keys:[],programId:this.programId,data:n})}static requestHeapFrame(t){const e=pn.RequestHeapFrame,n=Et(e,t);return new Ct({keys:[],programId:this.programId,data:n})}static setComputeUnitLimit(t){const e=pn.SetComputeUnitLimit,n=Et(e,t);return new Ct({keys:[],programId:this.programId,data:n})}static setComputeUnitPrice(t){const e=pn.SetComputeUnitPrice,n=Et(e,{microLamports:BigInt(t.microLamports)});return new Ct({keys:[],programId:this.programId,data:n})}}rc.programId=new Y("ComputeBudget111111111111111111111111111111");const tu=64,eu=32,nu=64,ru=ot([At("numSignatures"),At("padding"),tn("signatureOffset"),tn("signatureInstructionIndex"),tn("publicKeyOffset"),tn("publicKeyInstructionIndex"),tn("messageDataOffset"),tn("messageDataSize"),tn("messageInstructionIndex")]);class Ws{constructor(){}static createInstructionWithPublicKey(t){const{publicKey:e,message:n,signature:s,instructionIndex:i}=t;It(e.length===eu,`Public Key must be ${eu} bytes but received ${e.length} bytes`),It(s.length===nu,`Signature must be ${nu} bytes but received ${s.length} bytes`);const o=ru.span,a=o+e.length,u=a+s.length,p=1,m=lt.Buffer.alloc(u+n.length),A=i??65535;return ru.encode({numSignatures:p,padding:0,signatureOffset:a,signatureInstructionIndex:A,publicKeyOffset:o,publicKeyInstructionIndex:A,messageDataOffset:u,messageDataSize:n.length,messageInstructionIndex:A},m),m.fill(e,o),m.fill(s,a),m.fill(n,u),new Ct({keys:[],programId:Ws.programId,data:m})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:n,instructionIndex:s}=t;It(e.length===tu,`Private key must be ${tu} bytes but received ${e.length} bytes`);try{const i=Nr.fromSecretKey(e),o=i.publicKey.toBytes(),a=Ga(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Ws.programId=new Y("Ed25519SigVerify111111111111111111111111111");const dy=(r,t)=>{const e=Ha.sign(r,t);return[e.toCompactRawBytes(),e.recovery]};Ha.utils.isValidPrivateKey;const py=Ha.getPublicKey,iu=32,Ro=20,su=64,gy=11,Mo=ot([At("numSignatures"),tn("signatureOffset"),At("signatureInstructionIndex"),tn("ethAddressOffset"),At("ethAddressInstructionIndex"),tn("messageDataOffset"),tn("messageDataSize"),At("messageInstructionIndex"),Ft(20,"ethAddress"),Ft(64,"signature"),At("recoveryId")]);class Or{constructor(){}static publicKeyToEthAddress(t){It(t.length===su,`Public key must be ${su} bytes but received ${t.length} bytes`);try{return lt.Buffer.from(Dc(bt(t))).slice(-Ro)}catch(e){throw new Error(`Error constructing Ethereum address: ${e}`)}}static createInstructionWithPublicKey(t){const{publicKey:e,message:n,signature:s,recoveryId:i,instructionIndex:o}=t;return Or.createInstructionWithEthAddress({ethAddress:Or.publicKeyToEthAddress(e),message:n,signature:s,recoveryId:i,instructionIndex:o})}static createInstructionWithEthAddress(t){const{ethAddress:e,message:n,signature:s,recoveryId:i,instructionIndex:o=0}=t;let a;typeof e=="string"?e.startsWith("0x")?a=lt.Buffer.from(e.substr(2),"hex"):a=lt.Buffer.from(e,"hex"):a=e,It(a.length===Ro,`Address must be ${Ro} bytes but received ${a.length} bytes`);const u=1+gy,p=u,m=u+a.length,A=m+s.length+1,S=1,g=lt.Buffer.alloc(Mo.span+n.length);return Mo.encode({numSignatures:S,signatureOffset:m,signatureInstructionIndex:o,ethAddressOffset:p,ethAddressInstructionIndex:o,messageDataOffset:A,messageDataSize:n.length,messageInstructionIndex:o,signature:bt(s),ethAddress:bt(a),recoveryId:i},g),g.fill(bt(n),Mo.span),new Ct({keys:[],programId:Or.programId,data:g})}static createInstructionWithPrivateKey(t){const{privateKey:e,message:n,instructionIndex:s}=t;It(e.length===iu,`Private key must be ${iu} bytes but received ${e.length} bytes`);try{const i=bt(e),o=py(i,!1).slice(1),a=lt.Buffer.from(Dc(bt(n))),[u,p]=dy(a,i);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:u,recoveryId:p,instructionIndex:s})}catch(i){throw new Error(`Error creating instruction; ${i}`)}}}Or.programId=new Y("KeccakSecp256k11111111111111111111111111111");var cf;const uf=new Y("StakeConfig11111111111111111111111111111111");class lf{constructor(t,e){this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=e}}class Bi{constructor(t,e,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=e,this.custodian=n}}cf=Bi;Bi.default=new cf(0,0,Y.default);class yy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const n=st("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(Ae))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a StakeInstruction");return s}static decodeInitialize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{authorized:e,lockup:n}=Bt(Ae.Initialize,t.data);return{stakePubkey:t.keys[0].pubkey,authorized:new lf(new Y(e.staker),new Y(e.withdrawer)),lockup:new Bi(n.unixTimestamp,n.epoch,new Y(n.custodian))}}static decodeDelegate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,6),Bt(Ae.Delegate,t.data),{stakePubkey:t.keys[0].pubkey,votePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[5].pubkey}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,stakeAuthorizationType:n}=Bt(Ae.Authorize,t.data),s={stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Y(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(s.custodianPubkey=t.keys[3].pubkey),s}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,2);const{newAuthorized:e,stakeAuthorizationType:n,authoritySeed:s,authorityOwner:i}=Bt(Ae.AuthorizeWithSeed,t.data),o={stakePubkey:t.keys[0].pubkey,authorityBase:t.keys[1].pubkey,authoritySeed:s,authorityOwner:new Y(i),newAuthorizedPubkey:new Y(e),stakeAuthorizationType:{index:n}};return t.keys.length>3&&(o.custodianPubkey=t.keys[3].pubkey),o}static decodeSplit(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Bt(Ae.Split,t.data);return{stakePubkey:t.keys[0].pubkey,splitStakePubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[2].pubkey,lamports:e}}static decodeMerge(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Bt(Ae.Merge,t.data),{stakePubkey:t.keys[0].pubkey,sourceStakePubKey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,5);const{lamports:e}=Bt(Ae.Withdraw,t.data),n={stakePubkey:t.keys[0].pubkey,toPubkey:t.keys[1].pubkey,authorizedPubkey:t.keys[4].pubkey,lamports:e};return t.keys.length>5&&(n.custodianPubkey=t.keys[5].pubkey),n}static decodeDeactivate(t){return this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3),Bt(Ae.Deactivate,t.data),{stakePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey}}static checkProgramId(t){if(!t.equals(Fs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const Ae=Object.freeze({Initialize:{index:0,layout:ot([st("instruction"),vp(),Sp()])},Authorize:{index:1,layout:ot([st("instruction"),St("newAuthorized"),st("stakeAuthorizationType")])},Delegate:{index:2,layout:ot([st("instruction")])},Split:{index:3,layout:ot([st("instruction"),He("lamports")])},Withdraw:{index:4,layout:ot([st("instruction"),He("lamports")])},Deactivate:{index:5,layout:ot([st("instruction")])},Merge:{index:7,layout:ot([st("instruction")])},AuthorizeWithSeed:{index:8,layout:ot([st("instruction"),St("newAuthorized"),st("stakeAuthorizationType"),or("authoritySeed"),St("authorityOwner")])}}),my=Object.freeze({Staker:{index:0},Withdrawer:{index:1}});class Fs{constructor(){}static initialize(t){const{stakePubkey:e,authorized:n,lockup:s}=t,i=s||Bi.default,o=Ae.Initialize,a=Et(o,{authorized:{staker:bt(n.staker.toBuffer()),withdrawer:bt(n.withdrawer.toBuffer())},lockup:{unixTimestamp:i.unixTimestamp,epoch:i.epoch,custodian:bt(i.custodian.toBuffer())}}),u={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1}],programId:this.programId,data:a};return new Ct(u)}static createAccountWithSeed(t){const e=new _t;e.add(_e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static createAccount(t){const e=new _t;e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.stakePubkey,lamports:t.lamports,space:this.space,programId:this.programId}));const{stakePubkey:n,authorized:s,lockup:i}=t;return e.add(this.initialize({stakePubkey:n,authorized:s,lockup:i}))}static delegate(t){const{stakePubkey:e,authorizedPubkey:n,votePubkey:s}=t,i=Ae.Delegate,o=Et(i);return new _t().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:uf,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static authorize(t){const{stakePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:s,stakeAuthorizationType:i,custodianPubkey:o}=t,a=Ae.Authorize,u=Et(a,{newAuthorized:bt(s.toBuffer()),stakeAuthorizationType:i.index}),p=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new _t().add({keys:p,programId:this.programId,data:u})}static authorizeWithSeed(t){const{stakePubkey:e,authorityBase:n,authoritySeed:s,authorityOwner:i,newAuthorizedPubkey:o,stakeAuthorizationType:a,custodianPubkey:u}=t,p=Ae.AuthorizeWithSeed,m=Et(p,{newAuthorized:bt(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:s,authorityOwner:bt(i.toBuffer())}),A=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1}];return u&&A.push({pubkey:u,isSigner:!0,isWritable:!1}),new _t().add({keys:A,programId:this.programId,data:m})}static splitInstruction(t){const{stakePubkey:e,authorizedPubkey:n,splitStakePubkey:s,lamports:i}=t,o=Ae.Split,a=Et(o,{lamports:i});return new Ct({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:a})}static split(t,e){const n=new _t;return n.add(_e.createAccount({fromPubkey:t.authorizedPubkey,newAccountPubkey:t.splitStakePubkey,lamports:e,space:this.space,programId:this.programId})),n.add(this.splitInstruction(t))}static splitWithSeed(t,e){const{stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,basePubkey:o,seed:a,lamports:u}=t,p=new _t;return p.add(_e.allocate({accountPubkey:i,basePubkey:o,seed:a,space:this.space,programId:this.programId})),e&&e>0&&p.add(_e.transfer({fromPubkey:t.authorizedPubkey,toPubkey:i,lamports:e})),p.add(this.splitInstruction({stakePubkey:n,authorizedPubkey:s,splitStakePubkey:i,lamports:u}))}static merge(t){const{stakePubkey:e,sourceStakePubKey:n,authorizedPubkey:s}=t,i=Ae.Merge,o=Et(i);return new _t().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}static withdraw(t){const{stakePubkey:e,authorizedPubkey:n,toPubkey:s,lamports:i,custodianPubkey:o}=t,a=Ae.Withdraw,u=Et(a,{lamports:i}),p=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:Vi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&p.push({pubkey:o,isSigner:!0,isWritable:!1}),new _t().add({keys:p,programId:this.programId,data:u})}static deactivate(t){const{stakePubkey:e,authorizedPubkey:n}=t,s=Ae.Deactivate,i=Et(s);return new _t().add({keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}}Fs.programId=new Y("Stake11111111111111111111111111111111111111");Fs.space=200;class ff{constructor(t,e,n,s){this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=e,this.authorizedWithdrawer=n,this.commission=s}}class wy{constructor(){}static decodeInstructionType(t){this.checkProgramId(t.programId);const n=st("instruction").decode(t.data);let s;for(const[i,o]of Object.entries(gn))if(o.index==n){s=i;break}if(!s)throw new Error("Instruction type incorrect; not a VoteInstruction");return s}static decodeInitializeAccount(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,4);const{voteInit:e}=Bt(gn.InitializeAccount,t.data);return{votePubkey:t.keys[0].pubkey,nodePubkey:t.keys[3].pubkey,voteInit:new ff(new Y(e.nodePubkey),new Y(e.authorizedVoter),new Y(e.authorizedWithdrawer),e.commission)}}static decodeAuthorize(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{newAuthorized:e,voteAuthorizationType:n}=Bt(gn.Authorize,t.data);return{votePubkey:t.keys[0].pubkey,authorizedPubkey:t.keys[2].pubkey,newAuthorizedPubkey:new Y(e),voteAuthorizationType:{index:n}}}static decodeAuthorizeWithSeed(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:e,currentAuthorityDerivedKeySeed:n,newAuthorized:s,voteAuthorizationType:i}}=Bt(gn.AuthorizeWithSeed,t.data);return{currentAuthorityDerivedKeyBasePubkey:t.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Y(e),currentAuthorityDerivedKeySeed:n,newAuthorizedPubkey:new Y(s),voteAuthorizationType:{index:i},votePubkey:t.keys[0].pubkey}}static decodeWithdraw(t){this.checkProgramId(t.programId),this.checkKeyLength(t.keys,3);const{lamports:e}=Bt(gn.Withdraw,t.data);return{votePubkey:t.keys[0].pubkey,authorizedWithdrawerPubkey:t.keys[2].pubkey,lamports:e,toPubkey:t.keys[1].pubkey}}static checkProgramId(t){if(!t.equals(Qr.programId))throw new Error("invalid instruction; programId is not VoteProgram")}static checkKeyLength(t,e){if(t.length<e)throw new Error(`invalid instruction; found ${t.length} keys, expected at least ${e}`)}}const gn=Object.freeze({InitializeAccount:{index:0,layout:ot([st("instruction"),kp()])},Authorize:{index:1,layout:ot([st("instruction"),St("newAuthorized"),st("voteAuthorizationType")])},Withdraw:{index:3,layout:ot([st("instruction"),He("lamports")])},UpdateValidatorIdentity:{index:4,layout:ot([st("instruction")])},AuthorizeWithSeed:{index:10,layout:ot([st("instruction"),Ep()])}}),by=Object.freeze({Voter:{index:0},Withdrawer:{index:1}});class Qr{constructor(){}static initializeAccount(t){const{votePubkey:e,nodePubkey:n,voteInit:s}=t,i=gn.InitializeAccount,o=Et(i,{voteInit:{nodePubkey:bt(s.nodePubkey.toBuffer()),authorizedVoter:bt(s.authorizedVoter.toBuffer()),authorizedWithdrawer:bt(s.authorizedWithdrawer.toBuffer()),commission:s.commission}}),a={keys:[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:Kr,isSigner:!1,isWritable:!1},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o};return new Ct(a)}static createAccount(t){const e=new _t;return e.add(_e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.votePubkey,lamports:t.lamports,space:this.space,programId:this.programId})),e.add(this.initializeAccount({votePubkey:t.votePubkey,nodePubkey:t.voteInit.nodePubkey,voteInit:t.voteInit}))}static authorize(t){const{votePubkey:e,authorizedPubkey:n,newAuthorizedPubkey:s,voteAuthorizationType:i}=t,o=gn.Authorize,a=Et(o,{newAuthorized:bt(s.toBuffer()),voteAuthorizationType:i.index}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new _t().add({keys:u,programId:this.programId,data:a})}static authorizeWithSeed(t){const{currentAuthorityDerivedKeyBasePubkey:e,currentAuthorityDerivedKeyOwnerPubkey:n,currentAuthorityDerivedKeySeed:s,newAuthorizedPubkey:i,voteAuthorizationType:o,votePubkey:a}=t,u=gn.AuthorizeWithSeed,p=Et(u,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:bt(n.toBuffer()),currentAuthorityDerivedKeySeed:s,newAuthorized:bt(i.toBuffer()),voteAuthorizationType:o.index}}),m=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:ln,isSigner:!1,isWritable:!1},{pubkey:e,isSigner:!0,isWritable:!1}];return new _t().add({keys:m,programId:this.programId,data:p})}static withdraw(t){const{votePubkey:e,authorizedWithdrawerPubkey:n,lamports:s,toPubkey:i}=t,o=gn.Withdraw,a=Et(o,{lamports:s}),u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return new _t().add({keys:u,programId:this.programId,data:a})}static safeWithdraw(t,e,n){if(t.lamports>e-n)throw new Error("Withdraw will leave vote account with insufficient funds.");return Qr.withdraw(t)}static updateValidatorIdentity(t){const{votePubkey:e,authorizedWithdrawerPubkey:n,nodePubkey:s}=t,i=gn.UpdateValidatorIdentity,o=Et(i),a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return new _t().add({keys:a,programId:this.programId,data:o})}}Qr.programId=new Y("Vote111111111111111111111111111111111111111");Qr.space=3762;const hf=new Y("Va1idator1nfo111111111111111111111111111111"),vy=q({name:H(),website:ut(H()),details:ut(H()),iconUrl:ut(H()),keybaseUsername:ut(H())});class ic{constructor(t,e){this.key=void 0,this.info=void 0,this.key=t,this.info=e}static fromConfigData(t){let e=[...t];if(De(e)!==2)return null;const s=[];for(let i=0;i<2;i++){const o=new Y(Ke(e,0,mn)),a=dn(e)===1;s.push({publicKey:o,isSigner:a})}if(s[0].publicKey.equals(hf)&&s[1].isSigner){const i=or().decode(lt.Buffer.from(e)),o=JSON.parse(i);return Al(o,vy),new ic(s[1].publicKey,o)}return null}}const Sy=new Y("Vote111111111111111111111111111111111111111"),ky=ot([St("nodePubkey"),St("authorizedWithdrawer"),At("commission"),xe(),Me(ot([xe("slot"),st("confirmationCount")]),Gn(st(),-8),"votes"),At("rootSlotValid"),xe("rootSlot"),xe(),Me(ot([xe("epoch"),St("authorizedVoter")]),Gn(st(),-8),"authorizedVoters"),ot([Me(ot([St("authorizedPubkey"),xe("epochOfLastAuthorizedSwitch"),xe("targetEpoch")]),32,"buf"),xe("idx"),At("isEmpty")],"priorVoters"),xe(),Me(ot([xe("epoch"),xe("credits"),xe("prevCredits")]),Gn(st(),-8),"epochCredits"),ot([xe("slot"),xe("timestamp")],"lastTimestamp")]);class sc{constructor(t){this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}static fromAccountData(t){const n=ky.decode(bt(t),4);let s=n.rootSlot;return n.rootSlotValid||(s=null),new sc({nodePubkey:new Y(n.nodePubkey),authorizedWithdrawer:new Y(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:s,authorizedVoters:n.authorizedVoters.map(Ey),priorVoters:Ay(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}function Ey({authorizedVoter:r,epoch:t}){return{epoch:t,authorizedVoter:new Y(r)}}function ou({authorizedPubkey:r,epochOfLastAuthorizedSwitch:t,targetEpoch:e}){return{authorizedPubkey:new Y(r),epochOfLastAuthorizedSwitch:t,targetEpoch:e}}function Ay({buf:r,idx:t,isEmpty:e}){return e?[]:[...r.slice(t+1).map(ou),...r.slice(0,t).map(ou)]}const au={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function _y(r,t){const e=t===!1?"http":"https";if(!r)return au[e].devnet;const n=au[e][r];if(!n)throw new Error(`Unknown ${e} cluster: ${r}`);return n}async function Iy(r,t,e,n){let s,i;e&&Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")||e&&Object.prototype.hasOwnProperty.call(e,"nonceValue")?(s=e,i=n):i=e;const o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,minContextSlot:i.minContextSlot},a=await r.sendRawTransaction(t,o),u=i&&i.commitment,m=(await(s?r.confirmTransaction(s,u):r.confirmTransaction(a,u))).value;if(m.err)throw a!=null?new wi({action:o!=null&&o.skipPreflight?"send":"simulate",signature:a,transactionMessage:`Status: (${JSON.stringify(m)})`}):new Error(`Raw transaction ${a} failed (${JSON.stringify(m)})`);return a}const xy=1e9,By=Object.freeze(Object.defineProperty({__proto__:null,Account:mp,AddressLookupTableAccount:Zo,AddressLookupTableInstruction:fy,AddressLookupTableProgram:nc,Authorized:lf,BLOCKHASH_CACHE_TIMEOUT_MS:Jl,BPF_LOADER_DEPRECATED_PROGRAM_ID:wp,BPF_LOADER_PROGRAM_ID:Op,BpfLoader:Up,COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:pn,ComputeBudgetInstruction:hy,ComputeBudgetProgram:rc,Connection:ly,Ed25519Program:Ws,Enum:gp,EpochSchedule:Yl,FeeCalculatorLayout:Hl,Keypair:Nr,LAMPORTS_PER_SOL:xy,LOOKUP_TABLE_INSTRUCTION_LAYOUTS:Mn,Loader:hr,Lockup:Bi,MAX_SEED_LENGTH:$l,Message:cn,MessageAccountKeys:mi,MessageV0:fr,NONCE_ACCOUNT_LENGTH:Yo,NonceAccount:Ns,PACKET_DATA_SIZE:Yn,PUBLIC_KEY_LENGTH:mn,PublicKey:Y,SIGNATURE_LENGTH_IN_BYTES:yi,SOLANA_SCHEMA:li,STAKE_CONFIG_ID:uf,STAKE_INSTRUCTION_LAYOUTS:Ae,SYSTEM_INSTRUCTION_LAYOUTS:Ot,SYSVAR_CLOCK_PUBKEY:ln,SYSVAR_EPOCH_SCHEDULE_PUBKEY:Bp,SYSVAR_INSTRUCTIONS_PUBKEY:Rp,SYSVAR_RECENT_BLOCKHASHES_PUBKEY:qi,SYSVAR_RENT_PUBKEY:Kr,SYSVAR_REWARDS_PUBKEY:Mp,SYSVAR_SLOT_HASHES_PUBKEY:Tp,SYSVAR_SLOT_HISTORY_PUBKEY:Cp,SYSVAR_STAKE_HISTORY_PUBKEY:Vi,Secp256k1Program:Or,SendTransactionError:wi,SolanaJSONRPCError:at,SolanaJSONRPCErrorCode:Pp,StakeAuthorizationLayout:my,StakeInstruction:yy,StakeProgram:Fs,Struct:Ya,SystemInstruction:Lp,SystemProgram:_e,Transaction:_t,TransactionExpiredBlockheightExceededError:Za,TransactionExpiredNonceInvalidError:Tr,TransactionExpiredTimeoutError:Ja,TransactionInstruction:Ct,TransactionMessage:Xa,TransactionStatus:_n,VALIDATOR_INFO_KEY:hf,VERSION_PREFIX_MASK:Ts,VOTE_PROGRAM_ID:Sy,ValidatorInfo:ic,VersionedMessage:Ps,VersionedTransaction:Ls,VoteAccount:sc,VoteAuthorizationLayout:by,VoteInit:ff,VoteInstruction:wy,VoteProgram:Qr,clusterApiUrl:_y,sendAndConfirmRawTransaction:Iy,sendAndConfirmTransaction:Go},Symbol.toStringTag,{value:"Module"}));class wr extends Error{constructor(t,e){super(t),this.error=e}}class df extends wr{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class ta extends wr{constructor(){super(...arguments),this.name="WalletConnectionError"}}class Ry extends wr{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class pf extends wr{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class ii extends wr{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class si extends wr{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class My extends wr{constructor(){super(...arguments),this.name="WalletSignMessageError"}}var yn;(function(r){r.Installed="Installed",r.NotDetected="NotDetected",r.Loadable="Loadable",r.Unsupported="Unsupported"})(yn||(yn={}));class Ty extends qa{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(t,e,n={}){const s=this.publicKey;if(!s)throw new pf;return t.feePayer=t.feePayer||s,t.recentBlockhash=t.recentBlockhash||(await e.getLatestBlockhash({commitment:n.preflightCommitment,minContextSlot:n.minContextSlot})).blockhash,t}}function cu(r){return"version"in r}class Cy extends Ty{async sendTransaction(t,e,n={}){let s=!0;try{if(cu(t)){if(!this.supportedTransactionVersions)throw new ii("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(t.version))throw new ii(`Sending transaction version ${t.version} isn't supported by this wallet`);try{t=await this.signTransaction(t);const i=t.serialize();return await e.sendRawTransaction(i,n)}catch(i){throw i instanceof si?(s=!1,i):new ii(i==null?void 0:i.message,i)}}else try{const{signers:i,...o}=n;t=await this.prepareTransaction(t,e,o),i!=null&&i.length&&t.partialSign(...i),t=await this.signTransaction(t);const a=t.serialize();return await e.sendRawTransaction(a,o)}catch(i){throw i instanceof si?(s=!1,i):new ii(i==null?void 0:i.message,i)}}catch(i){throw s&&this.emit("error",i),i}}async signAllTransactions(t){for(const n of t)if(cu(n)){if(!this.supportedTransactionVersions)throw new si("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(n.version))throw new si(`Signing transaction version ${n.version} isn't supported by this wallet`)}const e=[];for(const n of t)e.push(await this.signTransaction(n));return e}}class Py extends Cy{}class Ly extends Py{}const Ur="solana:signAndSendTransaction",gs="solana:signIn",oc="solana:signMessage",Wr="solana:signTransaction",Ny="standard:connect",Oy="standard:disconnect",Uy="standard:events";var Wy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},gf={},Ze={};let ac;const Fy=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Ze.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Ze.getSymbolTotalCodewords=function(t){return Fy[t]};Ze.getBCHDigit=function(r){let t=0;for(;r!==0;)t++,r>>>=1;return t};Ze.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');ac=t};Ze.isKanjiModeEnabled=function(){return typeof ac<"u"};Ze.toSJIS=function(t){return ac(t)};var zs={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function t(e){if(typeof e!="string")throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+e)}}r.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},r.from=function(n,s){if(r.isValid(n))return n;try{return t(n)}catch{return s}}})(zs);function yf(){this.buffer=[],this.length=0}yf.prototype={get:function(r){const t=Math.floor(r/8);return(this.buffer[t]>>>7-r%8&1)===1},put:function(r,t){for(let e=0;e<t;e++)this.putBit((r>>>t-e-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),r&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var zy=yf;function Ri(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Ri.prototype.set=function(r,t,e,n){const s=r*this.size+t;this.data[s]=e,n&&(this.reservedBit[s]=!0)};Ri.prototype.get=function(r,t){return this.data[r*this.size+t]};Ri.prototype.xor=function(r,t,e){this.data[r*this.size+t]^=e};Ri.prototype.isReserved=function(r,t){return this.reservedBit[r*this.size+t]};var Dy=Ri,mf={};(function(r){const t=Ze.getSymbolSize;r.getRowColCoords=function(n){if(n===1)return[];const s=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*s-2))*2,a=[i-7];for(let u=1;u<s-1;u++)a[u]=a[u-1]-o;return a.push(6),a.reverse()},r.getPositions=function(n){const s=[],i=r.getRowColCoords(n),o=i.length;for(let a=0;a<o;a++)for(let u=0;u<o;u++)a===0&&u===0||a===0&&u===o-1||a===o-1&&u===0||s.push([i[a],i[u]]);return s}})(mf);var wf={};const Ky=Ze.getSymbolSize,uu=7;wf.getPositions=function(t){const e=Ky(t);return[[0,0],[e-uu,0],[0,e-uu]]};var bf={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};r.isValid=function(s){return s!=null&&s!==""&&!isNaN(s)&&s>=0&&s<=7},r.from=function(s){return r.isValid(s)?parseInt(s,10):void 0},r.getPenaltyN1=function(s){const i=s.size;let o=0,a=0,u=0,p=null,m=null;for(let A=0;A<i;A++){a=u=0,p=m=null;for(let S=0;S<i;S++){let g=s.get(A,S);g===p?a++:(a>=5&&(o+=t.N1+(a-5)),p=g,a=1),g=s.get(S,A),g===m?u++:(u>=5&&(o+=t.N1+(u-5)),m=g,u=1)}a>=5&&(o+=t.N1+(a-5)),u>=5&&(o+=t.N1+(u-5))}return o},r.getPenaltyN2=function(s){const i=s.size;let o=0;for(let a=0;a<i-1;a++)for(let u=0;u<i-1;u++){const p=s.get(a,u)+s.get(a,u+1)+s.get(a+1,u)+s.get(a+1,u+1);(p===4||p===0)&&o++}return o*t.N2},r.getPenaltyN3=function(s){const i=s.size;let o=0,a=0,u=0;for(let p=0;p<i;p++){a=u=0;for(let m=0;m<i;m++)a=a<<1&2047|s.get(p,m),m>=10&&(a===1488||a===93)&&o++,u=u<<1&2047|s.get(m,p),m>=10&&(u===1488||u===93)&&o++}return o*t.N3},r.getPenaltyN4=function(s){let i=0;const o=s.data.length;for(let u=0;u<o;u++)i+=s.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function e(n,s,i){switch(n){case r.Patterns.PATTERN000:return(s+i)%2===0;case r.Patterns.PATTERN001:return s%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(s+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return s*i%2+s*i%3===0;case r.Patterns.PATTERN110:return(s*i%2+s*i%3)%2===0;case r.Patterns.PATTERN111:return(s*i%3+(s+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}r.applyMask=function(s,i){const o=i.size;for(let a=0;a<o;a++)for(let u=0;u<o;u++)i.isReserved(u,a)||i.xor(u,a,e(s,u,a))},r.getBestMask=function(s,i){const o=Object.keys(r.Patterns).length;let a=0,u=1/0;for(let p=0;p<o;p++){i(p),r.applyMask(p,s);const m=r.getPenaltyN1(s)+r.getPenaltyN2(s)+r.getPenaltyN3(s)+r.getPenaltyN4(s);r.applyMask(p,s),m<u&&(u=m,a=p)}return a}})(bf);var Ds={};const Hn=zs,Di=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ki=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Ds.getBlocksCount=function(t,e){switch(e){case Hn.L:return Di[(t-1)*4+0];case Hn.M:return Di[(t-1)*4+1];case Hn.Q:return Di[(t-1)*4+2];case Hn.H:return Di[(t-1)*4+3];default:return}};Ds.getTotalCodewordsCount=function(t,e){switch(e){case Hn.L:return Ki[(t-1)*4+0];case Hn.M:return Ki[(t-1)*4+1];case Hn.Q:return Ki[(t-1)*4+2];case Hn.H:return Ki[(t-1)*4+3];default:return}};var vf={},Ks={};const fi=new Uint8Array(512),ys=new Uint8Array(256);(function(){let t=1;for(let e=0;e<255;e++)fi[e]=t,ys[t]=e,t<<=1,t&256&&(t^=285);for(let e=255;e<512;e++)fi[e]=fi[e-255]})();Ks.log=function(t){if(t<1)throw new Error("log("+t+")");return ys[t]};Ks.exp=function(t){return fi[t]};Ks.mul=function(t,e){return t===0||e===0?0:fi[ys[t]+ys[e]]};(function(r){const t=Ks;r.mul=function(n,s){const i=new Uint8Array(n.length+s.length-1);for(let o=0;o<n.length;o++)for(let a=0;a<s.length;a++)i[o+a]^=t.mul(n[o],s[a]);return i},r.mod=function(n,s){let i=new Uint8Array(n);for(;i.length-s.length>=0;){const o=i[0];for(let u=0;u<s.length;u++)i[u]^=t.mul(s[u],o);let a=0;for(;a<i.length&&i[a]===0;)a++;i=i.slice(a)}return i},r.generateECPolynomial=function(n){let s=new Uint8Array([1]);for(let i=0;i<n;i++)s=r.mul(s,new Uint8Array([1,t.exp(i)]));return s}})(vf);const Sf=vf;function cc(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}cc.prototype.initialize=function(t){this.degree=t,this.genPoly=Sf.generateECPolynomial(this.degree)};cc.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const e=new Uint8Array(t.length+this.degree);e.set(t);const n=Sf.mod(e,this.genPoly),s=this.degree-n.length;if(s>0){const i=new Uint8Array(this.degree);return i.set(n,s),i}return n};var $y=cc,kf={},Jn={},uc={};uc.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var kn={};const Ef="[0-9]+",qy="[A-Z $%*+\\-./:]+";let vi="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";vi=vi.replace(/u/g,"\\u");const Vy="(?:(?![A-Z0-9 $%*+\\-./:]|"+vi+`)(?:.|[\r
]))+`;kn.KANJI=new RegExp(vi,"g");kn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");kn.BYTE=new RegExp(Vy,"g");kn.NUMERIC=new RegExp(Ef,"g");kn.ALPHANUMERIC=new RegExp(qy,"g");const jy=new RegExp("^"+vi+"$"),Hy=new RegExp("^"+Ef+"$"),Gy=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");kn.testKanji=function(t){return jy.test(t)};kn.testNumeric=function(t){return Hy.test(t)};kn.testAlphanumeric=function(t){return Gy.test(t)};(function(r){const t=uc,e=kn;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return e.testNumeric(i)?r.NUMERIC:e.testAlphanumeric(i)?r.ALPHANUMERIC:e.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function n(s){if(typeof s!="string")throw new Error("Param is not a string");switch(s.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+s)}}r.from=function(i,o){if(r.isValid(i))return i;try{return n(i)}catch{return o}}})(Jn);(function(r){const t=Ze,e=Ds,n=zs,s=Jn,i=uc,o=7973,a=t.getBCHDigit(o);function u(S,g,E){for(let R=1;R<=40;R++)if(g<=r.getCapacity(R,E,S))return R}function p(S,g){return s.getCharCountIndicator(S,g)+4}function m(S,g){let E=0;return S.forEach(function(R){const T=p(R.mode,g);E+=T+R.getBitsLength()}),E}function A(S,g){for(let E=1;E<=40;E++)if(m(S,E)<=r.getCapacity(E,g,s.MIXED))return E}r.from=function(g,E){return i.isValid(g)?parseInt(g,10):E},r.getCapacity=function(g,E,R){if(!i.isValid(g))throw new Error("Invalid QR Code version");typeof R>"u"&&(R=s.BYTE);const T=t.getSymbolTotalCodewords(g),M=e.getTotalCodewordsCount(g,E),N=(T-M)*8;if(R===s.MIXED)return N;const P=N-p(R,g);switch(R){case s.NUMERIC:return Math.floor(P/10*3);case s.ALPHANUMERIC:return Math.floor(P/11*2);case s.KANJI:return Math.floor(P/13);case s.BYTE:default:return Math.floor(P/8)}},r.getBestVersionForData=function(g,E){let R;const T=n.from(E,n.M);if(Array.isArray(g)){if(g.length>1)return A(g,T);if(g.length===0)return 1;R=g[0]}else R=g;return u(R.mode,R.getLength(),T)},r.getEncodedBits=function(g){if(!i.isValid(g)||g<7)throw new Error("Invalid QR Code version");let E=g<<12;for(;t.getBCHDigit(E)-a>=0;)E^=o<<t.getBCHDigit(E)-a;return g<<12|E}})(kf);var Af={};const ea=Ze,_f=1335,Yy=21522,lu=ea.getBCHDigit(_f);Af.getEncodedBits=function(t,e){const n=t.bit<<3|e;let s=n<<10;for(;ea.getBCHDigit(s)-lu>=0;)s^=_f<<ea.getBCHDigit(s)-lu;return(n<<10|s)^Yy};var If={};const Zy=Jn;function qr(r){this.mode=Zy.NUMERIC,this.data=r.toString()}qr.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};qr.prototype.getLength=function(){return this.data.length};qr.prototype.getBitsLength=function(){return qr.getBitsLength(this.data.length)};qr.prototype.write=function(t){let e,n,s;for(e=0;e+3<=this.data.length;e+=3)n=this.data.substr(e,3),s=parseInt(n,10),t.put(s,10);const i=this.data.length-e;i>0&&(n=this.data.substr(e),s=parseInt(n,10),t.put(s,i*3+1))};var Jy=qr;const Xy=Jn,To=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function Vr(r){this.mode=Xy.ALPHANUMERIC,this.data=r}Vr.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};Vr.prototype.getLength=function(){return this.data.length};Vr.prototype.getBitsLength=function(){return Vr.getBitsLength(this.data.length)};Vr.prototype.write=function(t){let e;for(e=0;e+2<=this.data.length;e+=2){let n=To.indexOf(this.data[e])*45;n+=To.indexOf(this.data[e+1]),t.put(n,11)}this.data.length%2&&t.put(To.indexOf(this.data[e]),6)};var Qy=Vr;const tm=Jn;function jr(r){this.mode=tm.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}jr.getBitsLength=function(t){return t*8};jr.prototype.getLength=function(){return this.data.length};jr.prototype.getBitsLength=function(){return jr.getBitsLength(this.data.length)};jr.prototype.write=function(r){for(let t=0,e=this.data.length;t<e;t++)r.put(this.data[t],8)};var em=jr;const nm=Jn,rm=Ze;function Hr(r){this.mode=nm.KANJI,this.data=r}Hr.getBitsLength=function(t){return t*13};Hr.prototype.getLength=function(){return this.data.length};Hr.prototype.getBitsLength=function(){return Hr.getBitsLength(this.data.length)};Hr.prototype.write=function(r){let t;for(t=0;t<this.data.length;t++){let e=rm.toSJIS(this.data[t]);if(e>=33088&&e<=40956)e-=33088;else if(e>=57408&&e<=60351)e-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);e=(e>>>8&255)*192+(e&255),r.put(e,13)}};var im=Hr,xf={exports:{}};(function(r){var t={single_source_shortest_paths:function(e,n,s){var i={},o={};o[n]=0;var a=t.PriorityQueue.make();a.push(n,0);for(var u,p,m,A,S,g,E,R,T;!a.empty();){u=a.pop(),p=u.value,A=u.cost,S=e[p]||{};for(m in S)S.hasOwnProperty(m)&&(g=S[m],E=A+g,R=o[m],T=typeof o[m]>"u",(T||R>E)&&(o[m]=E,a.push(m,E),i[m]=p))}if(typeof s<"u"&&typeof o[s]>"u"){var M=["Could not find a path from ",n," to ",s,"."].join("");throw new Error(M)}return i},extract_shortest_path_from_predecessor_list:function(e,n){for(var s=[],i=n;i;)s.push(i),e[i],i=e[i];return s.reverse(),s},find_path:function(e,n,s){var i=t.single_source_shortest_paths(e,n,s);return t.extract_shortest_path_from_predecessor_list(i,s)},PriorityQueue:{make:function(e){var n=t.PriorityQueue,s={},i;e=e||{};for(i in n)n.hasOwnProperty(i)&&(s[i]=n[i]);return s.queue=[],s.sorter=e.sorter||n.default_sorter,s},default_sorter:function(e,n){return e.cost-n.cost},push:function(e,n){var s={value:e,cost:n};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=t})(xf);var sm=xf.exports;(function(r){const t=Jn,e=Jy,n=Qy,s=em,i=im,o=kn,a=Ze,u=sm;function p(M){return unescape(encodeURIComponent(M)).length}function m(M,N,P){const W=[];let K;for(;(K=M.exec(P))!==null;)W.push({data:K[0],index:K.index,mode:N,length:K[0].length});return W}function A(M){const N=m(o.NUMERIC,t.NUMERIC,M),P=m(o.ALPHANUMERIC,t.ALPHANUMERIC,M);let W,K;return a.isKanjiModeEnabled()?(W=m(o.BYTE,t.BYTE,M),K=m(o.KANJI,t.KANJI,M)):(W=m(o.BYTE_KANJI,t.BYTE,M),K=[]),N.concat(P,W,K).sort(function(V,j){return V.index-j.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function S(M,N){switch(N){case t.NUMERIC:return e.getBitsLength(M);case t.ALPHANUMERIC:return n.getBitsLength(M);case t.KANJI:return i.getBitsLength(M);case t.BYTE:return s.getBitsLength(M)}}function g(M){return M.reduce(function(N,P){const W=N.length-1>=0?N[N.length-1]:null;return W&&W.mode===P.mode?(N[N.length-1].data+=P.data,N):(N.push(P),N)},[])}function E(M){const N=[];for(let P=0;P<M.length;P++){const W=M[P];switch(W.mode){case t.NUMERIC:N.push([W,{data:W.data,mode:t.ALPHANUMERIC,length:W.length},{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.ALPHANUMERIC:N.push([W,{data:W.data,mode:t.BYTE,length:W.length}]);break;case t.KANJI:N.push([W,{data:W.data,mode:t.BYTE,length:p(W.data)}]);break;case t.BYTE:N.push([{data:W.data,mode:t.BYTE,length:p(W.data)}])}}return N}function R(M,N){const P={},W={start:{}};let K=["start"];for(let $=0;$<M.length;$++){const V=M[$],j=[];for(let D=0;D<V.length;D++){const Z=V[D],X=""+$+D;j.push(X),P[X]={node:Z,lastCount:0},W[X]={};for(let J=0;J<K.length;J++){const b=K[J];P[b]&&P[b].node.mode===Z.mode?(W[b][X]=S(P[b].lastCount+Z.length,Z.mode)-S(P[b].lastCount,Z.mode),P[b].lastCount+=Z.length):(P[b]&&(P[b].lastCount=Z.length),W[b][X]=S(Z.length,Z.mode)+4+t.getCharCountIndicator(Z.mode,N))}}K=j}for(let $=0;$<K.length;$++)W[K[$]].end=0;return{map:W,table:P}}function T(M,N){let P;const W=t.getBestModeForData(M);if(P=t.from(N,W),P!==t.BYTE&&P.bit<W.bit)throw new Error('"'+M+'" cannot be encoded with mode '+t.toString(P)+`.
 Suggested mode is: `+t.toString(W));switch(P===t.KANJI&&!a.isKanjiModeEnabled()&&(P=t.BYTE),P){case t.NUMERIC:return new e(M);case t.ALPHANUMERIC:return new n(M);case t.KANJI:return new i(M);case t.BYTE:return new s(M)}}r.fromArray=function(N){return N.reduce(function(P,W){return typeof W=="string"?P.push(T(W,null)):W.data&&P.push(T(W.data,W.mode)),P},[])},r.fromString=function(N,P){const W=A(N,a.isKanjiModeEnabled()),K=E(W),$=R(K,P),V=u.find_path($.map,"start","end"),j=[];for(let D=1;D<V.length-1;D++)j.push($.table[V[D]].node);return r.fromArray(g(j))},r.rawSplit=function(N){return r.fromArray(A(N,a.isKanjiModeEnabled()))}})(If);const $s=Ze,Co=zs,om=zy,am=Dy,cm=mf,um=wf,na=bf,ra=Ds,lm=$y,ms=kf,fm=Af,hm=Jn,Po=If;function dm(r,t){const e=r.size,n=um.getPositions(t);for(let s=0;s<n.length;s++){const i=n[s][0],o=n[s][1];for(let a=-1;a<=7;a++)if(!(i+a<=-1||e<=i+a))for(let u=-1;u<=7;u++)o+u<=-1||e<=o+u||(a>=0&&a<=6&&(u===0||u===6)||u>=0&&u<=6&&(a===0||a===6)||a>=2&&a<=4&&u>=2&&u<=4?r.set(i+a,o+u,!0,!0):r.set(i+a,o+u,!1,!0))}}function pm(r){const t=r.size;for(let e=8;e<t-8;e++){const n=e%2===0;r.set(e,6,n,!0),r.set(6,e,n,!0)}}function gm(r,t){const e=cm.getPositions(t);for(let n=0;n<e.length;n++){const s=e[n][0],i=e[n][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?r.set(s+o,i+a,!0,!0):r.set(s+o,i+a,!1,!0)}}function ym(r,t){const e=r.size,n=ms.getEncodedBits(t);let s,i,o;for(let a=0;a<18;a++)s=Math.floor(a/3),i=a%3+e-8-3,o=(n>>a&1)===1,r.set(s,i,o,!0),r.set(i,s,o,!0)}function Lo(r,t,e){const n=r.size,s=fm.getEncodedBits(t,e);let i,o;for(i=0;i<15;i++)o=(s>>i&1)===1,i<6?r.set(i,8,o,!0):i<8?r.set(i+1,8,o,!0):r.set(n-15+i,8,o,!0),i<8?r.set(8,n-i-1,o,!0):i<9?r.set(8,15-i-1+1,o,!0):r.set(8,15-i-1,o,!0);r.set(n-8,8,1,!0)}function mm(r,t){const e=r.size;let n=-1,s=e-1,i=7,o=0;for(let a=e-1;a>0;a-=2)for(a===6&&a--;;){for(let u=0;u<2;u++)if(!r.isReserved(s,a-u)){let p=!1;o<t.length&&(p=(t[o]>>>i&1)===1),r.set(s,a-u,p),i--,i===-1&&(o++,i=7)}if(s+=n,s<0||e<=s){s-=n,n=-n;break}}}function wm(r,t,e){const n=new om;e.forEach(function(u){n.put(u.mode.bit,4),n.put(u.getLength(),hm.getCharCountIndicator(u.mode,r)),u.write(n)});const s=$s.getSymbolTotalCodewords(r),i=ra.getTotalCodewordsCount(r,t),o=(s-i)*8;for(n.getLengthInBits()+4<=o&&n.put(0,4);n.getLengthInBits()%8!==0;)n.putBit(0);const a=(o-n.getLengthInBits())/8;for(let u=0;u<a;u++)n.put(u%2?17:236,8);return bm(n,r,t)}function bm(r,t,e){const n=$s.getSymbolTotalCodewords(t),s=ra.getTotalCodewordsCount(t,e),i=n-s,o=ra.getBlocksCount(t,e),a=n%o,u=o-a,p=Math.floor(n/o),m=Math.floor(i/o),A=m+1,S=p-m,g=new lm(S);let E=0;const R=new Array(o),T=new Array(o);let M=0;const N=new Uint8Array(r.buffer);for(let V=0;V<o;V++){const j=V<u?m:A;R[V]=N.slice(E,E+j),T[V]=g.encode(R[V]),E+=j,M=Math.max(M,j)}const P=new Uint8Array(n);let W=0,K,$;for(K=0;K<M;K++)for($=0;$<o;$++)K<R[$].length&&(P[W++]=R[$][K]);for(K=0;K<S;K++)for($=0;$<o;$++)P[W++]=T[$][K];return P}function vm(r,t,e,n){let s;if(Array.isArray(r))s=Po.fromArray(r);else if(typeof r=="string"){let p=t;if(!p){const m=Po.rawSplit(r);p=ms.getBestVersionForData(m,e)}s=Po.fromString(r,p||40)}else throw new Error("Invalid data");const i=ms.getBestVersionForData(s,e);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=i;else if(t<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const o=wm(t,e,s),a=$s.getSymbolSize(t),u=new am(a);return dm(u,t),pm(u),gm(u,t),Lo(u,e,0),t>=7&&ym(u,t),mm(u,o),isNaN(n)&&(n=na.getBestMask(u,Lo.bind(null,u,e))),na.applyMask(n,u),Lo(u,e,n),{modules:u,version:t,errorCorrectionLevel:e,maskPattern:n,segments:s}}gf.create=function(t,e){if(typeof t>"u"||t==="")throw new Error("No input text");let n=Co.M,s,i;return typeof e<"u"&&(n=Co.from(e.errorCorrectionLevel,Co.M),s=ms.from(e.version),i=na.from(e.maskPattern),e.toSJISFunc&&$s.setToSJISFunction(e.toSJISFunc)),vm(t,s,n,i)};var Bf={},lc={};(function(r){function t(e){if(typeof e=="number"&&(e=e.toString()),typeof e!="string")throw new Error("Color should be defined as hex string");let n=e.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+e);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const s=parseInt(n.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:s&255,hex:"#"+n.slice(0,6).join("")}}r.getOptions=function(n){n||(n={}),n.color||(n.color={});const s=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:s,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},r.getScale=function(n,s){return s.width&&s.width>=n+s.margin*2?s.width/(n+s.margin*2):s.scale},r.getImageWidth=function(n,s){const i=r.getScale(n,s);return Math.floor((n+s.margin*2)*i)},r.qrToImageData=function(n,s,i){const o=s.modules.size,a=s.modules.data,u=r.getScale(o,i),p=Math.floor((o+i.margin*2)*u),m=i.margin*u,A=[i.color.light,i.color.dark];for(let S=0;S<p;S++)for(let g=0;g<p;g++){let E=(S*p+g)*4,R=i.color.light;if(S>=m&&g>=m&&S<p-m&&g<p-m){const T=Math.floor((S-m)/u),M=Math.floor((g-m)/u);R=A[a[T*o+M]?1:0]}n[E++]=R.r,n[E++]=R.g,n[E++]=R.b,n[E]=R.a}}})(lc);(function(r){const t=lc;function e(s,i,o){s.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,o,a){let u=a,p=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(p=n()),u=t.getOptions(u);const m=t.getImageWidth(i.modules.size,u),A=p.getContext("2d"),S=A.createImageData(m,m);return t.qrToImageData(S.data,i,u),e(A,p,m),A.putImageData(S,0,0),p},r.renderToDataURL=function(i,o,a){let u=a;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const p=r.render(i,o,u),m=u.type||"image/png",A=u.rendererOpts||{};return p.toDataURL(m,A.quality)}})(Bf);var Rf={};const Sm=lc;function fu(r,t){const e=r.a/255,n=t+'="'+r.hex+'"';return e<1?n+" "+t+'-opacity="'+e.toFixed(2).slice(1)+'"':n}function No(r,t,e){let n=r+t;return typeof e<"u"&&(n+=" "+e),n}function km(r,t,e){let n="",s=0,i=!1,o=0;for(let a=0;a<r.length;a++){const u=Math.floor(a%t),p=Math.floor(a/t);!u&&!i&&(i=!0),r[a]?(o++,a>0&&u>0&&r[a-1]||(n+=i?No("M",u+e,.5+p+e):No("m",s,0),s=0,i=!1),u+1<t&&r[a+1]||(n+=No("h",o),o=0)):s++}return n}Rf.render=function(t,e,n){const s=Sm.getOptions(e),i=t.modules.size,o=t.modules.data,a=i+s.margin*2,u=s.color.light.a?"<path "+fu(s.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",p="<path "+fu(s.color.dark,"stroke")+' d="'+km(o,i,s.margin)+'"/>',m='viewBox="0 0 '+a+" "+a+'"',S='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+m+' shape-rendering="crispEdges">'+u+p+`</svg>
`;return typeof n=="function"&&n(null,S),S};const Em=Wy,ia=gf,Mf=Bf,Am=Rf;function fc(r,t,e,n,s){const i=[].slice.call(arguments,1),o=i.length,a=typeof i[o-1]=="function";if(!a&&!Em())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(s=e,e=t,t=n=void 0):o===3&&(t.getContext&&typeof s>"u"?(s=n,n=void 0):(s=n,n=e,e=t,t=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(e=t,t=n=void 0):o===2&&!t.getContext&&(n=e,e=t,t=void 0),new Promise(function(u,p){try{const m=ia.create(e,n);u(r(m,t,n))}catch(m){p(m)}})}try{const u=ia.create(e,n);s(null,r(u,t,n))}catch(u){s(u)}}ia.create;fc.bind(null,Mf.render);fc.bind(null,Mf.renderToDataURL);fc.bind(null,function(r,t,e){return Am.render(r,e)});const hu="solana:mainnet";function _m(r){let t=`${r.domain} wants you to sign in with your Solana account:
`;t+=`${r.address}`,r.statement&&(t+=`

${r.statement}`);const e=[];if(r.uri&&e.push(`URI: ${r.uri}`),r.version&&e.push(`Version: ${r.version}`),r.chainId&&e.push(`Chain ID: ${r.chainId}`),r.nonce&&e.push(`Nonce: ${r.nonce}`),r.issuedAt&&e.push(`Issued At: ${r.issuedAt}`),r.expirationTime&&e.push(`Expiration Time: ${r.expirationTime}`),r.notBefore&&e.push(`Not Before: ${r.notBefore}`),r.requestId&&e.push(`Request ID: ${r.requestId}`),r.resources){e.push("Resources:");for(const n of r.resources)e.push(`- ${n}`)}return e.length&&(t+=`

${e.join(`
`)}`),t}function Im(r){return Object.freeze({...r,decode:(t,e=0)=>r.read(t,e)[0]})}var xm=r=>Im({read(t,e){const n=e===0?t:t.slice(e);if(n.length===0)return["",0];let s=n.findIndex(u=>u!==0);s=s===-1?n.length:s;const i=r[0].repeat(s);if(s===n.length)return[i,t.length];const o=n.slice(s).reduce((u,p)=>u*256n+BigInt(p),0n),a=Bm(o,r);return[i+a,t.length]}});function Bm(r,t){const e=BigInt(t.length),n=[];for(;r>0n;)n.unshift(t[Number(r%e)]),r/=e;return n.join("")}var Rm="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Mm=()=>xm(Rm);const Ln={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Nn extends Error{constructor(...t){const[e,n,s]=t;super(n),this.code=e,this.data=s,this.name="SolanaMobileWalletAdapterError"}}class Tf extends Error{constructor(...t){const[e,n,s,i]=t;super(s),this.code=n,this.data=i,this.jsonRpcMessageId=e,this.name="SolanaMobileWalletAdapterProtocolError"}}function Se(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(m){try{p(n.next(m))}catch(A){o(A)}}function u(m){try{p(n.throw(m))}catch(A){o(A)}}function p(m){m.done?i(m.value):s(m.value).then(a,u)}p((n=n.apply(r,[])).next())})}function Tm(r){return window.btoa(r)}function du(r,t){return window.btoa(String.fromCharCode.call(null,...r))}function Cf(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}function Oo(r,t){return Se(this,void 0,void 0,function*(){const e=yield crypto.subtle.exportKey("raw",r),n=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,e),s=new Uint8Array(e.byteLength+n.byteLength);return s.set(new Uint8Array(e),0),s.set(new Uint8Array(n),e.byteLength),s})}function Cm(r){return _m(r)}function Pm(r){return Tm(Cm(r)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const Lm="solana:signTransactions",pu="solana:cloneAuthorization";function Nm(r){return Mm().decode(r)}function Om(r){return Nm(Cf(r))}function Um(r,t){return new Proxy({},{get(e,n){return n==="then"?null:(e[n]==null&&(e[n]=function(s){return Se(this,void 0,void 0,function*(){const{method:i,params:o}=Wm(n,s,r),a=yield t(i,o);return i==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield zm(o.sign_in_payload,a,t)),Fm(n,a,r)})}),e[n])},defineProperty(){return!1},deleteProperty(){return!1}})}function Wm(r,t,e){let n=t,s=r.toString().replace(/[A-Z]/g,i=>`_${i.toLowerCase()}`).toLowerCase();switch(r){case"authorize":{let{chain:i}=n;if(e==="legacy"){switch(i){case"solana:testnet":{i="testnet";break}case"solana:devnet":{i="devnet";break}case"solana:mainnet":{i="mainnet-beta";break}default:i=n.cluster}n.cluster=i}else{switch(i){case"testnet":case"devnet":{i=`solana:${i}`;break}case"mainnet-beta":{i="solana:mainnet";break}}n.chain=i}}case"reauthorize":{const{auth_token:i,identity:o}=n;if(i)switch(e){case"legacy":{s="reauthorize",n={auth_token:i,identity:o};break}default:{s="authorize";break}}break}}return{method:s,params:n}}function Fm(r,t,e){switch(r){case"getCapabilities":{const n=t;switch(e){case"legacy":{const s=[Lm];return n.supports_clone_authorization===!0&&s.push(pu),Object.assign(Object.assign({},n),{features:s})}case"v1":return Object.assign(Object.assign({},n),{supports_sign_and_send_transactions:!0,supports_clone_authorization:n.features.includes(pu)})}}}return t}function zm(r,t,e){var n;return Se(this,void 0,void 0,function*(){const s=(n=r.domain)!==null&&n!==void 0?n:window.location.host,i=t.accounts[0].address,o=Pm(Object.assign(Object.assign({},r),{domain:s,address:Om(i)})),a=yield e("sign_messages",{addresses:[i],payloads:[o]}),u=Cf(a.signed_payloads[0]),p=du(u.slice(0,u.length-64)),m=du(u.slice(u.length-64));return{address:i,signed_message:p.length==0?o:p,signature:m}})}const ar=4;function Dm(r){if(r>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const t=new ArrayBuffer(ar);return new DataView(t).setUint32(0,r,!1),new Uint8Array(t)}const sa=12,Pf=65;function Km(r,t,e){return Se(this,void 0,void 0,function*(){const n=Dm(t),s=new Uint8Array(sa);crypto.getRandomValues(s);const i=yield crypto.subtle.encrypt(Nf(n,s),e,new TextEncoder().encode(r)),o=new Uint8Array(n.byteLength+s.byteLength+i.byteLength);return o.set(new Uint8Array(n),0),o.set(new Uint8Array(s),n.byteLength),o.set(new Uint8Array(i),n.byteLength+s.byteLength),o})}function Lf(r,t){return Se(this,void 0,void 0,function*(){const e=r.slice(0,ar),n=r.slice(ar,ar+sa),s=r.slice(ar+sa),i=yield crypto.subtle.decrypt(Nf(e,n),t,s);return $m().decode(i)})}function Nf(r,t){return{additionalData:r,iv:t,name:"AES-GCM",tagLength:128}}let Uo;function $m(){return Uo===void 0&&(Uo=new TextDecoder("utf-8")),Uo}function qm(){return Se(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Wo(){return Se(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function Vm(r){let t="";const e=new Uint8Array(r),n=e.byteLength;for(let s=0;s<n;s++)t+=String.fromCharCode(e[s]);return window.btoa(t)}function jm(){return Of(49152+Math.floor(Math.random()*16384))}function Of(r){if(r<49152||r>65535)throw new Nn(Ln.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${r} given.`,{port:r});return r}function Hm(r){return r.replace(/[/+=]/g,t=>({"/":"_","+":"-","=":"."})[t])}const Gm="solana-wallet";function gu(r){return r.replace(/(^\/+|\/+$)/g,"").split("/")}function Ym(r,t){let e=null;if(t){try{e=new URL(t)}catch{}if((e==null?void 0:e.protocol)!=="https:")throw new Nn(Ln.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}e||(e=new URL(`${Gm}:/`));const n=r.startsWith("/")?r:[...gu(e.pathname),...gu(r)].join("/");return new URL(n,e)}function Zm(r,t,e,n=["v1"]){return Se(this,void 0,void 0,function*(){const s=Of(t),i=yield crypto.subtle.exportKey("raw",r),o=Vm(i),a=Ym("v1/associate/local",e);return a.searchParams.set("association",Hm(o)),a.searchParams.set("port",`${s}`),n.forEach(u=>{a.searchParams.set("v",u)}),a})}function Jm(r,t){return Se(this,void 0,void 0,function*(){const e=JSON.stringify(r),n=r.id;return Km(e,n,t)})}function Xm(r,t){return Se(this,void 0,void 0,function*(){const e=yield Lf(r,t),n=JSON.parse(e);if(Object.hasOwnProperty.call(n,"error"))throw new Tf(n.id,n.error.code,n.error.message);return n})}function Qm(r,t,e){return Se(this,void 0,void 0,function*(){const[n,s]=yield Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",r.slice(0,Pf),{name:"ECDH",namedCurve:"P-256"},!1,[])]),i=yield crypto.subtle.deriveBits({name:"ECDH",public:s},e,256),o=yield crypto.subtle.importKey("raw",i,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(n),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function tw(r,t){return Se(this,void 0,void 0,function*(){const e=yield Lf(r,t),n=JSON.parse(e);let s="legacy";if(Object.hasOwnProperty.call(n,"v"))switch(n.v){case 1:case"1":case"v1":s="v1";break;case"legacy":s="legacy";break;default:throw new Nn(Ln.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${n.v}`)}return{protocol_version:s}})}const ws={Firefox:0,Other:1};function ew(){return navigator.userAgent.indexOf("Firefox/")!==-1?ws.Firefox:ws.Other}function nw(){return new Promise((r,t)=>{function e(){clearTimeout(s),window.removeEventListener("blur",n)}function n(){e(),r()}window.addEventListener("blur",n);const s=setTimeout(()=>{e(),t()},3e3)})}let ri=null;function rw(r){ri==null&&(ri=document.createElement("iframe"),ri.style.display="none",document.body.appendChild(ri)),ri.contentWindow.location.href=r.toString()}function iw(r){return Se(this,void 0,void 0,function*(){if(r.protocol==="https:")window.location.assign(r);else try{const t=ew();switch(t){case ws.Firefox:rw(r);break;case ws.Other:{const e=nw();window.location.assign(r),yield e;break}default:}}catch{throw new Nn(Ln.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function sw(r,t){return Se(this,void 0,void 0,function*(){const e=jm(),n=yield Zm(r,e,t);return yield iw(n),e})}const yu={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},ow="com.solana.mobilewalletadapter.v1";function aw(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Nn(Ln.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function cw(r){let t;try{t=new URL(r)}catch{throw new Nn(Ln.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(t.protocol!=="https:")throw new Nn(Ln.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function mu(r){return new DataView(r).getUint32(0,!1)}function uw(r,t){return Se(this,void 0,void 0,function*(){aw();const e=yield qm(),s=`ws://localhost:${yield sw(e.publicKey,t==null?void 0:t.baseUri)}/solana-wallet`;let i;const o=(()=>{const m=[...yu.retryDelayScheduleMs];return()=>m.length>1?m.shift():m[0]})();let a=1,u=0,p={__type:"disconnected"};return new Promise((m,A)=>{let S;const g={},E=()=>Se(this,void 0,void 0,function*(){if(p.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${p.__type}\`.`);return}S.removeEventListener("open",E);const{associationKeypair:K}=p,$=yield Wo();S.send(yield Oo($.publicKey,K.privateKey)),p={__type:"hello_req_sent",associationPublicKey:K.publicKey,ecdhPrivateKey:$.privateKey}}),R=K=>{K.wasClean?p={__type:"disconnected"}:A(new Nn(Ln.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${K.code}: ${K.reason}).`,{closeEvent:K})),N()},T=K=>Se(this,void 0,void 0,function*(){N(),Date.now()-i>=yu.timeoutMs?A(new Nn(Ln.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${s}.`)):(yield new Promise($=>{const V=o();P=window.setTimeout($,V)}),W())}),M=K=>Se(this,void 0,void 0,function*(){const $=yield K.data.arrayBuffer();switch(p.__type){case"connecting":if($.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const V=yield Wo();S.send(yield Oo(V.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:V.privateKey};break;case"connected":try{const j=$.slice(0,ar),D=mu(j);if(D!==u+1)throw new Error("Encrypted message has invalid sequence number");u=D;const Z=yield Xm($,p.sharedSecret),X=g[Z.id];delete g[Z.id],X.resolve(Z.result)}catch(j){if(j instanceof Tf){const D=g[j.jsonRpcMessageId];delete g[j.jsonRpcMessageId],D.reject(j)}else throw j}break;case"hello_req_sent":{if($.byteLength===0){const J=yield Wo();S.send(yield Oo(J.publicKey,e.privateKey)),p={__type:"hello_req_sent",associationPublicKey:e.publicKey,ecdhPrivateKey:J.privateKey};break}const j=yield Qm($,p.associationPublicKey,p.ecdhPrivateKey),D=$.slice(Pf),Z=D.byteLength!==0?yield Se(this,void 0,void 0,function*(){const J=D.slice(0,ar),b=mu(J);if(b!==u+1)throw new Error("Encrypted message has invalid sequence number");return u=b,tw(D,j)}):{protocol_version:"legacy"};p={__type:"connected",sharedSecret:j,sessionProperties:Z};const X=Um(Z.protocol_version,(J,b)=>Se(this,void 0,void 0,function*(){const c=a++;return S.send(yield Jm({id:c,jsonrpc:"2.0",method:J,params:b??{}},j)),new Promise((h,y)=>{g[c]={resolve(k){switch(J){case"authorize":case"reauthorize":{const{wallet_uri_base:I}=k;if(I!=null)try{cw(I)}catch(B){y(B);return}break}}h(k)},reject:y}})}));try{m(yield r(X))}catch(J){A(J)}finally{N(),S.close()}break}}});let N,P;const W=()=>{N&&N(),p={__type:"connecting",associationKeypair:e},i===void 0&&(i=Date.now()),S=new WebSocket(s,[ow]),S.addEventListener("open",E),S.addEventListener("close",R),S.addEventListener("error",T),S.addEventListener("message",M),N=()=>{window.clearTimeout(P),S.removeEventListener("open",E),S.removeEventListener("close",R),S.removeEventListener("error",T),S.removeEventListener("message",M)}};W()})})}function lw(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),e=0;e<t.length;e++)t[e]=255;for(var n=0;n<r.length;n++){var s=r.charAt(n),i=s.charCodeAt(0);if(t[i]!==255)throw new TypeError(s+" is ambiguous");t[i]=n}var o=r.length,a=r.charAt(0),u=Math.log(o)/Math.log(256),p=Math.log(256)/Math.log(o);function m(g){if(g instanceof Uint8Array||(ArrayBuffer.isView(g)?g=new Uint8Array(g.buffer,g.byteOffset,g.byteLength):Array.isArray(g)&&(g=Uint8Array.from(g))),!(g instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(g.length===0)return"";for(var E=0,R=0,T=0,M=g.length;T!==M&&g[T]===0;)T++,E++;for(var N=(M-T)*p+1>>>0,P=new Uint8Array(N);T!==M;){for(var W=g[T],K=0,$=N-1;(W!==0||K<R)&&$!==-1;$--,K++)W+=256*P[$]>>>0,P[$]=W%o>>>0,W=W/o>>>0;if(W!==0)throw new Error("Non-zero carry");R=K,T++}for(var V=N-R;V!==N&&P[V]===0;)V++;for(var j=a.repeat(E);V<N;++V)j+=r.charAt(P[V]);return j}function A(g){if(typeof g!="string")throw new TypeError("Expected String");if(g.length===0)return new Uint8Array;for(var E=0,R=0,T=0;g[E]===a;)R++,E++;for(var M=(g.length-E)*u+1>>>0,N=new Uint8Array(M);g[E];){var P=g.charCodeAt(E);if(P>255)return;var W=t[P];if(W===255)return;for(var K=0,$=M-1;(W!==0||K<T)&&$!==-1;$--,K++)W+=o*N[$]>>>0,N[$]=W%256>>>0,W=W/256>>>0;if(W!==0)throw new Error("Non-zero carry");T=K,E++}for(var V=M-T;V!==M&&N[V]===0;)V++;for(var j=new Uint8Array(R+(M-V)),D=R;V!==M;)j[D++]=N[V++];return j}function S(g){var E=A(g);if(E)return E;throw new Error("Non-base"+o+" character")}return{encode:m,decodeUnsafe:A,decode:S}}var fw=lw;const hw=fw,dw="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var pw=hw(dw);const oa=Si(pw);function Xt(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(m){try{p(n.next(m))}catch(A){o(A)}}function u(m){try{p(n.throw(m))}catch(A){o(A)}}function p(m){m.done?i(m.value):s(m.value).then(a,u)}p((n=n.apply(r,[])).next())})}function tt(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function We(r,t,e,n,s){if(typeof t=="function"?r!==t||!0:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(r,e),e}const gw="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function $i(r){return window.btoa(String.fromCharCode.call(null,...r))}function Dn(r){return new Uint8Array(window.atob(r).split("").map(t=>t.charCodeAt(0)))}var _r,cr,aa,ca,ua,la,oi,Ue,In,Kn,Ir,Xn,ji,ai,Hi,fa,Gi,Uf,ha,Yi,xr,Zi,ci,Ji,Br,ui,Xi,da,pa,Qi,ts,ga,ya,es;const yw="Mobile Wallet Adapter",mw=64,ww=[Ur,Wr,oc,gs];class bw{constructor(t){_r.add(this),cr.set(this,{}),aa.set(this,"1.0.0"),ca.set(this,yw),ua.set(this,"https://solanamobile.com/wallets"),la.set(this,gw),oi.set(this,void 0),Ue.set(this,void 0),In.set(this,void 0),Kn.set(this,!1),Ir.set(this,0),Xn.set(this,[]),ji.set(this,void 0),ai.set(this,void 0),Hi.set(this,void 0),fa.set(this,(e,n)=>{var s;return!((s=tt(this,cr,"f")[e])===null||s===void 0)&&s.push(n)||(tt(this,cr,"f")[e]=[n]),()=>tt(this,_r,"m",Uf).call(this,e,n)}),ha.set(this,({silent:e}={})=>Xt(this,void 0,void 0,function*(){if(tt(this,Kn,"f")||this.connected)return{accounts:this.accounts};We(this,Kn,!0);try{if(e){const n=yield tt(this,In,"f").get();if(n)yield tt(this,Zi,"f").call(this,n.capabilities),yield tt(this,xr,"f").call(this,n);else return{accounts:this.accounts}}else yield tt(this,Yi,"f").call(this)}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}finally{We(this,Kn,!1)}return{accounts:this.accounts}})),Yi.set(this,e=>Xt(this,void 0,void 0,function*(){try{const n=yield tt(this,In,"f").get();if(n)return tt(this,xr,"f").call(this,n),n;const s=yield tt(this,ji,"f").select(tt(this,Xn,"f"));return yield tt(this,Br,"f").call(this,i=>Xt(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([i.getCapabilities(),i.authorize({chain:s,identity:tt(this,oi,"f"),sign_in_payload:e})]),u=tt(this,Xi,"f").call(this,a.accounts),p=Object.assign(Object.assign({},a),{accounts:u,chain:s,capabilities:o});return Promise.all([tt(this,Zi,"f").call(this,o),tt(this,In,"f").set(p),tt(this,xr,"f").call(this,p)]),p}))}catch(n){throw new Error(n instanceof Error&&n.message||"Unknown error")}})),xr.set(this,e=>Xt(this,void 0,void 0,function*(){var n;const s=tt(this,Ue,"f")==null||((n=tt(this,Ue,"f"))===null||n===void 0?void 0:n.accounts.length)!==e.accounts.length||tt(this,Ue,"f").accounts.some((i,o)=>i.address!==e.accounts[o].address);We(this,Ue,e),s&&tt(this,_r,"m",Gi).call(this,"change",{accounts:this.accounts})})),Zi.set(this,e=>Xt(this,void 0,void 0,function*(){const n=e.features.includes("solana:signTransactions"),s=e.supports_sign_and_send_transactions,i=Ur in this.features!==s||Wr in this.features!==n;We(this,ai,Object.assign(Object.assign({},(s||!s&&!n)&&{[Ur]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tt(this,Qi,"f")}}),n&&{[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tt(this,ts,"f")}})),i&&tt(this,_r,"m",Gi).call(this,"change",{features:this.features})})),ci.set(this,(e,n,s)=>Xt(this,void 0,void 0,function*(){var i,o;try{const[a,u]=yield Promise.all([(o=(i=tt(this,Ue,"f"))===null||i===void 0?void 0:i.capabilities)!==null&&o!==void 0?o:yield e.getCapabilities(),e.authorize({auth_token:n,identity:tt(this,oi,"f"),chain:s})]),p=tt(this,Xi,"f").call(this,u.accounts),m=Object.assign(Object.assign({},u),{accounts:p,chain:s,capabilities:a});Promise.all([tt(this,In,"f").set(m),tt(this,xr,"f").call(this,m)])}catch(a){throw tt(this,Ji,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),Ji.set(this,()=>Xt(this,void 0,void 0,function*(){var e;tt(this,In,"f").clear(),We(this,Kn,!1),We(this,Ir,(e=tt(this,Ir,"f"),e++,e)),We(this,Ue,void 0),tt(this,_r,"m",Gi).call(this,"change",{accounts:this.accounts})})),Br.set(this,e=>Xt(this,void 0,void 0,function*(){var n;const s=(n=tt(this,Ue,"f"))===null||n===void 0?void 0:n.wallet_uri_base,i=s?{baseUri:s}:void 0,o=tt(this,Ir,"f");try{return yield uw(e,i)}catch(a){throw tt(this,Ir,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield tt(this,Hi,"f").call(this,this)),a}})),ui.set(this,()=>{if(!tt(this,Ue,"f"))throw new Error("Wallet not connected");return{authToken:tt(this,Ue,"f").auth_token,chain:tt(this,Ue,"f").chain}}),Xi.set(this,e=>e.map(n=>{var s,i;const o=Dn(n.address);return{address:oa.encode(o),publicKey:o,label:n.label,icon:n.icon,chains:(s=n.chains)!==null&&s!==void 0?s:tt(this,Xn,"f"),features:(i=n.features)!==null&&i!==void 0?i:ww}})),da.set(this,e=>Xt(this,void 0,void 0,function*(){const{authToken:n,chain:s}=tt(this,ui,"f").call(this);try{const i=e.map(o=>$i(o));return yield tt(this,Br,"f").call(this,o=>Xt(this,void 0,void 0,function*(){return yield tt(this,ci,"f").call(this,o,n,s),(yield o.signTransactions({payloads:i})).signed_payloads.map(Dn)}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),pa.set(this,(e,n)=>Xt(this,void 0,void 0,function*(){const{authToken:s,chain:i}=tt(this,ui,"f").call(this);try{return yield tt(this,Br,"f").call(this,o=>Xt(this,void 0,void 0,function*(){const[a,u]=yield Promise.all([o.getCapabilities(),tt(this,ci,"f").call(this,o,s,i)]);if(a.supports_sign_and_send_transactions){const p=$i(e);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},n),{payloads:[p]}))).signatures.map(Dn)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),Qi.set(this,(...e)=>Xt(this,void 0,void 0,function*(){const n=[];for(const s of e){const i=yield tt(this,pa,"f").call(this,s.transaction,s.options);n.push({signature:i})}return n})),ts.set(this,(...e)=>Xt(this,void 0,void 0,function*(){return(yield tt(this,da,"f").call(this,e.map(({transaction:n})=>n))).map(n=>({signedTransaction:n}))})),ga.set(this,(...e)=>Xt(this,void 0,void 0,function*(){const{authToken:n,chain:s}=tt(this,ui,"f").call(this),i=e.map(({account:a})=>$i(a.publicKey)),o=e.map(({message:a})=>$i(a));try{return yield tt(this,Br,"f").call(this,a=>Xt(this,void 0,void 0,function*(){return yield tt(this,ci,"f").call(this,a,n,s),(yield a.signMessages({addresses:i,payloads:o})).signed_payloads.map(Dn).map(p=>({signedMessage:p,signature:p.slice(-mw)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),ya.set(this,(...e)=>Xt(this,void 0,void 0,function*(){const n=[];if(e.length>1)for(const s of e)n.push(yield tt(this,es,"f").call(this,s));else return[yield tt(this,es,"f").call(this,e[0])];return n})),es.set(this,e=>Xt(this,void 0,void 0,function*(){var n,s,i;We(this,Kn,!0);try{const o=yield tt(this,Yi,"f").call(this,Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,u=o.accounts.find(p=>p.address==a);return{account:Object.assign(Object.assign({},u??{address:oa.encode(Dn(a))}),{publicKey:Dn(a),chains:(s=u==null?void 0:u.chains)!==null&&s!==void 0?s:tt(this,Xn,"f"),features:(i=u==null?void 0:u.features)!==null&&i!==void 0?i:o.capabilities.features}),signedMessage:Dn(o.sign_in_result.signed_message),signature:Dn(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{We(this,Kn,!1)}})),We(this,In,t.authorizationCache),We(this,oi,t.appIdentity),We(this,Xn,t.chains),We(this,ji,t.chainSelector),We(this,Hi,t.onWalletNotFound),We(this,ai,{[Ur]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:tt(this,Qi,"f")},[Wr]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:tt(this,ts,"f")}})}get version(){return tt(this,aa,"f")}get name(){return tt(this,ca,"f")}get url(){return tt(this,ua,"f")}get icon(){return tt(this,la,"f")}get chains(){return tt(this,Xn,"f")}get features(){return Object.assign({[Ny]:{version:"1.0.0",connect:tt(this,ha,"f")},[Oy]:{version:"1.0.0",disconnect:tt(this,Ji,"f")},[Uy]:{version:"1.0.0",on:tt(this,fa,"f")},[oc]:{version:"1.0.0",signMessage:tt(this,ga,"f")},[gs]:{version:"1.0.0",signIn:tt(this,ya,"f")}},tt(this,ai,"f"))}get accounts(){var t,e;return(e=(t=tt(this,Ue,"f"))===null||t===void 0?void 0:t.accounts)!==null&&e!==void 0?e:[]}get connected(){return!!tt(this,Ue,"f")}get isAuthorized(){return!!tt(this,Ue,"f")}get currentAuthorization(){return tt(this,Ue,"f")}get cachedAuthorizationResult(){return tt(this,In,"f").get()}}cr=new WeakMap,aa=new WeakMap,ca=new WeakMap,ua=new WeakMap,la=new WeakMap,oi=new WeakMap,Ue=new WeakMap,In=new WeakMap,Kn=new WeakMap,Ir=new WeakMap,Xn=new WeakMap,ji=new WeakMap,ai=new WeakMap,Hi=new WeakMap,fa=new WeakMap,ha=new WeakMap,Yi=new WeakMap,xr=new WeakMap,Zi=new WeakMap,ci=new WeakMap,Ji=new WeakMap,Br=new WeakMap,ui=new WeakMap,Xi=new WeakMap,da=new WeakMap,pa=new WeakMap,Qi=new WeakMap,ts=new WeakMap,ga=new WeakMap,ya=new WeakMap,es=new WeakMap,_r=new WeakSet,Gi=function(t,...e){var n;(n=tt(this,cr,"f")[t])===null||n===void 0||n.forEach(s=>s.apply(null,e))},Uf=function(t,e){var n;tt(this,cr,"f")[t]=(n=tt(this,cr,"f")[t])===null||n===void 0?void 0:n.filter(s=>e!==s)};const Fo="SolanaMobileWalletAdapterDefaultAuthorizationCache";function vw(){let r;try{r=window.localStorage}catch{}return{clear(){return Xt(this,void 0,void 0,function*(){if(r)try{r.removeItem(Fo)}catch{}})},get(){return Xt(this,void 0,void 0,function*(){if(r)try{const t=JSON.parse(r.getItem(Fo));if(t&&t.accounts){const e=t.accounts.map(n=>Object.assign(Object.assign({},n),{publicKey:"publicKey"in n?new Uint8Array(Object.values(n.publicKey)):oa.decode(n.address)}));return Object.assign(Object.assign({},t),{accounts:e})}else return t||void 0}catch{}})},set(t){return Xt(this,void 0,void 0,function*(){if(r)try{r.setItem(Fo,JSON.stringify(t))}catch{}})}}}function Sw(){return{select(r){return Xt(this,void 0,void 0,function*(){return r.length===1?r[0]:r.includes(hu)?hu:r[0]})}}}function Kt(r,t,e,n){function s(i){return i instanceof e?i:new e(function(o){o(i)})}return new(e||(e=Promise))(function(i,o){function a(m){try{p(n.next(m))}catch(A){o(A)}}function u(m){try{p(n.throw(m))}catch(A){o(A)}}function p(m){m.done?i(m.value):s(m.value).then(a,u)}p((n=n.apply(r,[])).next())})}function ft(r,t,e,n){if(e==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?r!==t||!n:!t.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e==="m"?n:e==="a"?n.call(r):n?n.value:t.get(r)}function je(r,t,e,n,s){if(typeof t=="function"?r!==t||!0:!t.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(r,e),e}const ma="standard:connect",kw="standard:disconnect",Ew="standard:events";function zo(r){return window.btoa(String.fromCharCode.call(null,...r))}function Aw(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var ke,qt,qn,Tn,ns,Bn,Qn,wa,ba,Wf,bs,rs,$n;const _w=64;function Iw(r){return"version"in r}function Ff(r){switch(r){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return r}}class xw extends Ly{constructor(t,e){super(),ke.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),qt.set(this,void 0),qn.set(this,!1),Tn.set(this,Aw()?yn.Loadable:yn.Unsupported),ns.set(this,void 0),Bn.set(this,void 0),Qn.set(this,void 0),wa.set(this,n=>Kt(this,void 0,void 0,function*(){if(n.accounts&&n.accounts.length>0){ft(this,ke,"m",Wf).call(this);const s=yield ft(this,ns,"f").call(this,n.accounts);s!==ft(this,Bn,"f")&&(je(this,Bn,s),je(this,Qn,void 0),this.emit("connect",this.publicKey))}})),je(this,ns,n=>Kt(this,void 0,void 0,function*(){var s;const i=yield e.addressSelector.select(n.map(({publicKey:o})=>zo(o)));return(s=n.find(({publicKey:o})=>zo(o)===i))!==null&&s!==void 0?s:n[0]})),je(this,qt,t),ft(this,qt,"f").features[Ew].on("change",ft(this,wa,"f")),this.name=ft(this,qt,"f").name,this.icon=ft(this,qt,"f").icon,this.url=ft(this,qt,"f").url}get publicKey(){var t;if(!ft(this,Qn,"f")&&ft(this,Bn,"f"))try{je(this,Qn,new Y(ft(this,Bn,"f").publicKey),"f")}catch(e){throw new Ry(e instanceof Error&&(e==null?void 0:e.message)||"Unknown error",e)}return(t=ft(this,Qn,"f"))!==null&&t!==void 0?t:null}get connected(){return ft(this,qt,"f").connected}get connecting(){return ft(this,qn,"f")}get readyState(){return ft(this,Tn,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Kt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Kt(this,void 0,void 0,function*(){ft(this,ke,"m",ba).call(this,!0)})}connect(){return Kt(this,void 0,void 0,function*(){ft(this,ke,"m",ba).call(this)})}performAuthorization(t){return Kt(this,void 0,void 0,function*(){try{const e=yield ft(this,qt,"f").cachedAuthorizationResult;return e?(yield ft(this,qt,"f").features[ma].connect({silent:!0}),e):(t?yield ft(this,qt,"f").features[gs].signIn(t):yield ft(this,qt,"f").features[ma].connect(),yield yield ft(this,qt,"f").cachedAuthorizationResult)}catch(e){throw new ta(e instanceof Error&&e.message||"Unknown error",e)}})}disconnect(){return Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){je(this,qn,!1),je(this,Qn,void 0),je(this,Bn,void 0),yield ft(this,qt,"f").features[kw].disconnect(),this.emit("disconnect")}))})}signIn(t){return Kt(this,void 0,void 0,function*(){return ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){var e;if(ft(this,Tn,"f")!==yn.Installed&&ft(this,Tn,"f")!==yn.Loadable)throw new df;je(this,qn,!0);try{const n=yield ft(this,qt,"f").features[gs].signIn(Object.assign(Object.assign({},t),{domain:(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:window.location.host}));if(n.length>0)return n[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(n){throw new ta(n instanceof Error&&n.message||"Unknown error",n)}finally{je(this,qn,!1)}}))})}signMessage(t){return Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){const e=ft(this,ke,"m",bs).call(this);try{return(yield ft(this,qt,"f").features[oc].signMessage({account:e,message:t}))[0].signature}catch(n){throw new My(n==null?void 0:n.message,n)}}))})}sendTransaction(t,e,n){return Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){const s=ft(this,ke,"m",bs).call(this);try{let o=function(){let a;switch(e.commitment){case"confirmed":case"finalized":case"processed":a=e.commitment;break;default:a="finalized"}let u;switch(n==null?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":u=n.preflightCommitment;break;case void 0:u=a;break;default:u="finalized"}return(u==="finalized"?2:u==="confirmed"?1:0)<(a==="finalized"?2:a==="confirmed"?1:0)?u:a};var i=o;if(Ur in ft(this,qt,"f").features){const a=Ff(ft(this,qt,"f").currentAuthorization.chain),[u]=(yield ft(this,qt,"f").features[Ur].signAndSendTransaction({account:s,transaction:t.serialize(),chain:a,options:n?{skipPreflight:n.skipPreflight,maxRetries:n.maxRetries}:void 0})).map(p=>zo(p.signature));return u}else{const[a]=yield ft(this,ke,"m",rs).call(this,[t]);if(Iw(a))return yield e.sendTransaction(a);{const u=a.serialize();return yield e.sendRawTransaction(u,Object.assign(Object.assign({},n),{preflightCommitment:o()}))}}}catch(o){throw new ii(o==null?void 0:o.message,o)}}))})}signTransaction(t){return Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){const[e]=yield ft(this,ke,"m",rs).call(this,[t]);return e}))})}signAllTransactions(t){return Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){return yield ft(this,ke,"m",rs).call(this,t)}))})}}qt=new WeakMap,qn=new WeakMap,Tn=new WeakMap,ns=new WeakMap,Bn=new WeakMap,Qn=new WeakMap,wa=new WeakMap,ke=new WeakSet,ba=function(t=!1){return Kt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield ft(this,ke,"m",$n).call(this,()=>Kt(this,void 0,void 0,function*(){if(ft(this,Tn,"f")!==yn.Installed&&ft(this,Tn,"f")!==yn.Loadable)throw new df;je(this,qn,!0);try{yield ft(this,qt,"f").features[ma].connect({silent:t})}catch(e){throw new ta(e instanceof Error&&e.message||"Unknown error",e)}finally{je(this,qn,!1)}}))})},Wf=function(){ft(this,Tn,"f")!==yn.Installed&&this.emit("readyStateChange",je(this,Tn,yn.Installed))},bs=function(){if(!ft(this,qt,"f").isAuthorized||!ft(this,Bn,"f"))throw new pf;return ft(this,Bn,"f")},rs=function(t){return Kt(this,void 0,void 0,function*(){const e=ft(this,ke,"m",bs).call(this);try{if(Wr in ft(this,qt,"f").features)return ft(this,qt,"f").features[Wr].signTransaction(...t.map(n=>({account:e,transaction:n.serialize()}))).then(n=>n.map(s=>{const i=s.signedTransaction,a=i[0]*_w+1;return Ps.deserializeMessageVersion(i.slice(a,i.length))==="legacy"?_t.from(i):Ls.deserialize(i)}));throw new Error("Connected wallet does not support signing transactions")}catch(n){throw new si(n==null?void 0:n.message,n)}})},$n=function(t){return Kt(this,void 0,void 0,function*(){try{return yield t()}catch(e){throw this.emit("error",e),e}})};class Bw extends xw{constructor(t){var e;const n=Ff((e=t.chain)!==null&&e!==void 0?e:t.cluster);super(new bw({appIdentity:t.appIdentity,authorizationCache:{set:t.authorizationResultCache.set,get:()=>Kt(this,void 0,void 0,function*(){return yield t.authorizationResultCache.get()}),clear:t.authorizationResultCache.clear},chains:[n],chainSelector:Sw(),onWalletNotFound:()=>Kt(this,void 0,void 0,function*(){t.onWalletNotFound(this)})}),{addressSelector:t.addressSelector,chain:n})}}class zf extends Bw{}function Rw(){return vw()}window.solanaWeb3=By;window.solanaWalletAdapterMobile={SolanaMobileWalletAdapter:zf};const Mw={solana:"https://api.mainnet-beta.solana.com",alchemy:"https://solana-mainnet.g.alchemy.com/v2/demo",tracker:"https://rpc-mainnet.solanatracker.io/?api_key=02232df4-4670-439c-b65a-27225d5b841f",quicknode:"https://quiet-attentive-frost.solana-mainnet.quiknode.pro/ed83a1d62d5a9b3c0a9fd0fb8d99e8e2d25f5ad3/",serum:"https://solana-api.projectserum.com"},hc="TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA",Tw="https://cdn.jsdelivr.net/gh/solana-labs/token-list@main/src/tokens/solana.tokenlist.json",Cw="https://raw.githubusercontent.com/solana-labs/token-list/main/src/tokens/solana.tokenlist.json";let Rr=null;const Df=new Set;async function Kf(){if(!Rr)try{let r=await fetch(Tw);r.ok||(r=await fetch(Cw));const t=await r.json();Rr={},t.tokens.forEach(e=>{Rr[e.address]={symbol:e.symbol,name:e.name}}),console.log("Token list loaded:",Object.keys(Rr).length)}catch(r){console.warn("Failed to load token list",r),Rr={}}}let Rt=null,kt=null,wu=[],Cr={},$f={};async function Pw(r){if(r.length===0)return;const t="So11111111111111111111111111111111111111112";r.includes(t)||r.push(t);const e=[];for(let i=0;i<r.length;i+=100)e.push(r.slice(i,i+100));for(const i of e){const o="price_proxy.php?ids="+i.join(",");try{const u=await(await fetch(o)).json();u&&u.data&&Object.keys(u.data).forEach(p=>{Cr[p]=u.data[p].price})}catch(a){console.warn("price fetch failed",a)}}const n=Cr[t]||0,s=r.filter(i=>!Cr[i]);for(const i of s){const o=$f[i]??0,a=BigInt(10)**BigInt(o),u=`https://quote-api.jup.ag/v6/quote?inputMint=${i}&outputMint=${t}&amount=${a}`;try{const m=await(await fetch(u)).json();if(Array.isArray(m.data)&&m.data.length){const A=Number(BigInt(m.data[0].outAmount))/1e9;A>0&&n>0&&(Cr[i]=A*n)}}catch{}}}function Lw(){document.getElementById("disclaimerModal").style.display="none"}function Nw(r){document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active")),document.querySelectorAll(".tab-content").forEach(t=>t.classList.remove("active")),r==="browser"?(document.querySelectorAll(".tab")[0].classList.add("active"),document.getElementById("browser-tab").classList.add("active")):r==="privatekey"?(document.querySelectorAll(".tab")[1].classList.add("active"),document.getElementById("privatekey-tab").classList.add("active")):r==="settings"&&(document.querySelectorAll(".tab")[2].classList.add("active"),document.getElementById("settings-tab").classList.add("active"))}document.getElementById("rpcEndpoint").addEventListener("change",function(){const r=document.getElementById("customRpc");this.value==="custom"?r.style.display="block":r.style.display="none"});function ct(r,t){const e=document.getElementById("output");e.innerHTML.includes("Results will appear here")&&(e.innerHTML="");const n=document.createElement("div");n.textContent=r,t&&(n.className=t),e.appendChild(n),e.scrollTop=e.scrollHeight}function Qe(r,t,e=!0){const n=document.getElementById(r);e?(n.textContent=t,n.style.display="flex"):n.style.display="none"}function dc(){const r=document.getElementById("results");if(((emptyAccounts==null?void 0:emptyAccounts.length)||0)===0&&((dustAccounts==null?void 0:dustAccounts.length)||0)===0){r.innerHTML="";return}let t='<div style="margin-top: 30px;">';emptyAccounts.length>0&&(t+='<h3 style="color: var(--accent-color); margin-bottom: 10px;">🔥 Empty Accounts</h3>',t+="<table><thead><tr><th>Token Account</th><th>Rent (SOL)</th><th>Action</th></tr></thead><tbody>",emptyAccounts.forEach(n=>{t+='<tr class="account-row">',t+='<td class="account-addr">'+n.address.substring(0,8)+"..."+n.address.slice(-6)+"</td>",t+='<td style="color:#4ade80;">+0.00203928</td>',t+=`<td><button class="btn-small danger" onclick="closeAccount('`+n.address+`')">Close</button></td>`,t+="</tr>"}),t+="</tbody></table>",t+='<div style="margin-top:15px;"><button class="danger" style="width:100%;" onclick="closeAllAccounts()">Close All ('+emptyAccounts.length+")</button></div>"),dustAccounts.length>0&&(t+='<h3 style="color: var(--warning-color, #facc15); margin:20px 0 10px;">⚠️ Accounts With Balance (Dust)</h3>',t+="<table><thead><tr><th>Balance</th><th>Value (USD)</th><th>Token Account</th><th>Action</th></tr></thead><tbody>",dustAccounts.forEach(n=>{t+=`
                        <tr class="account-row">
                            <td>${n.balance}</td>
                            <td>${n.usdValue&&n.usdValue>0?"$"+n.usdValue:"— not listed —"}</td>
                            <td class="account-addr">${n.address.substring(0,8)}...${n.address.slice(-6)}</td>
                            <td><button class="btn-small danger" style="opacity:${n.usdValue&&parseFloat(n.usdValue)>0?1:.6};" title="${n.usdValue&&parseFloat(n.usdValue)>0?"":"Unknown price — confirm inside modal"}" onclick="openBurnModal('${n.address}')">Burn & Close</button></td>
                        </tr>`}),t+="</tbody></table>"),t+="</div>";const e=document.createElement("div");e.innerHTML=t,r.appendChild(e)}async function ti(){const r=document.getElementById("walletAddress").value.trim();if(!r){alert("Please enter a wallet address");return}if(await Kf(),ct("🔍 Testing wallet: "+r,"info"),Qe("walletProgress","Checking wallet..."),r.length!==44&&r.length!==43){ct("❌ Invalid wallet address format","error"),Qe("walletProgress","Invalid address",!1);return}for(const[t,e]of Object.entries(Mw))try{ct("Trying "+t+" endpoint...","info");const n="proxy_rpc.php?endpoint="+t,i=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBlockHeight",params:[]})})).json();if(i.result!==void 0){ct("✅ Connected! Block height: "+i.result,"success"),ct("Checking SPL token accounts...","info");const a=await(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:2,method:"getProgramAccounts",params:[hc,{encoding:"jsonParsed",filters:[{dataSize:165},{memcmp:{offset:32,bytes:r}}]}]})})).json();if(a.result){const u=a.result;ct("✅ Found "+u.length+" SPL token accounts","success");let p=0;wu=[],emptyAccounts=[],dustAccounts=[];const m=new Set;for(const S of u)try{const g=S.account.data.parsed.info;if(Df.has(S.pubkey))continue;const E=g.tokenAmount.uiAmount,R=Rr[g.mint]||{};m.add(g.mint),$f[g.mint]=g.tokenAmount.decimals;const T={address:S.pubkey,mint:g.mint,balance:E,rawAmount:g.tokenAmount.amount,decimals:g.tokenAmount.decimals,symbol:R.symbol||"Unknown",name:R.name||"Unknown",usdValue:0};E===0?(p++,emptyAccounts.push(T),ct("🔥 Burnable: "+S.pubkey+" (0 balance)","success")):dustAccounts.push(T)}catch(g){console.error("Error processing account:",g)}await Pw(Array.from(m)),[...dustAccounts,...emptyAccounts].forEach(S=>{if(Cr[S.mint]){const g=Cr[S.mint];S.usdValue=(S.balance*g).toFixed(4)}}),wu=emptyAccounts,ct("✅ Found "+p+" burnable accounts out of "+u.length+" total","success"),ct("💰 Potential SOL to reclaim: ~"+(p*.00203928).toFixed(6)+" SOL ($"+(p*.00203928*230).toFixed(2)+")","success"),Qe("walletProgress","Check complete! Found "+p+" burnable accounts");const A=emptyAccounts.length+dustAccounts.length;A>0&&Rt?dc():A>0&&ct(`
💡 Connect your wallet to manage these accounts`,"warning");return}else ct("❌ Error getting accounts: "+JSON.stringify(a.error),"error")}else ct("❌ Connection failed: "+JSON.stringify(i.error),"error")}catch(n){ct("❌ Error: "+n.message,"error")}ct("❌ Failed to connect to any RPC endpoint","error"),Qe("walletProgress","All endpoints failed")}async function Ow(){const r=document.getElementById("rpcEndpoint").value;if(r==="custom"){const t=document.getElementById("customRpc").value.trim();if(!t){alert("Please enter a custom RPC URL");return}ct("🔍 Testing custom RPC: "+t,"info"),Qe("rpcProgress","Testing custom RPC...");try{const n=await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBlockHeight",params:[]})})).json();n.result!==void 0?(ct("✅ Custom RPC working! Block height: "+n.result,"success"),Qe("rpcProgress","Custom RPC working")):(ct("❌ Custom RPC failed: "+JSON.stringify(n.error),"error"),Qe("rpcProgress","Custom RPC failed"))}catch(e){ct("❌ Error: "+e.message,"error"),Qe("rpcProgress","Test failed")}return}ct("🔍 Testing "+r+" endpoint","info"),Qe("rpcProgress","Testing "+r+"...");try{const t=window.location.origin+"/proxy_rpc.php?endpoint="+r,n=await(await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:1,method:"getBlockHeight",params:[]})})).json();n.result!==void 0?(ct("✅ "+r+" working! Block height: "+n.result,"success"),Qe("rpcProgress",r+" working correctly")):(ct("❌ "+r+" failed: "+JSON.stringify(n.error),"error"),Qe("rpcProgress",r+" failed"))}catch(t){ct("❌ Error: "+t.message,"error"),Qe("rpcProgress","Test failed")}}function qf(){var t,e,n;const r=[];window.solana&&(Array.isArray(window.solana.providers)&&r.push(...window.solana.providers),(window.solana.isPhantom||window.solana.walletName)&&r.push(window.solana)),Object.keys(window).forEach(s=>{if(!["solana","backpack","solflare"].includes(s))try{const i=window[s];i&&typeof i=="object"&&typeof i.connect=="function"&&(typeof i.signTransaction=="function"||typeof i.signAndSendTransaction=="function")&&(r.includes(i)||(i.walletName=i.walletName||s,r.push(i)))}catch{}});try{if(navigator.wallets&&typeof navigator.wallets.get=="function"){const s=navigator.wallets.get();if(s&&typeof s[Symbol.iterator]=="function")for(const i of s)r.includes(i)||(i.walletName=i.name||i.walletName||"Standard Wallet",!i.connect&&((e=(t=i.features)==null?void 0:t.connect)!=null&&e.connect)&&(i.connect=i.features.connect.connect),!i.signAndSendTransaction&&((n=i.features)!=null&&n["solana:signAndSendTransaction"])&&(i.signAndSendTransaction=i.features["solana:signAndSendTransaction"].signAndSendTransaction),r.push(i))}}catch{}return r}async function Uw(r){ct("🔌 Connecting to "+r+"...","info");try{let t=null;if(r==="kraken"&&window.kraken)t=window.kraken;else if(r==="jupiter"&&window.jupiter)t=window.jupiter;else if(r==="phantom"&&window.solana&&window.solana.isPhantom)t=window.solana;else if(r==="any"){const n=qf();if(n.length===0){ct("❌ No Solana wallet detected.","error");return}const s=n.map((a,u)=>`${u+1}: ${a.walletName||(a.isPhantom?"Phantom":"Wallet")}`).join(`
`),i=prompt(`Select a wallet to connect:
`+s+`
(Enter number or Cancel)`);if(i===null)return;const o=parseInt(i,10)-1;if(o>=0&&o<n.length)t=n[o],r=t.walletName||(t.isPhantom?"Phantom":"Injected Wallet");else{ct("❌ Invalid selection","error");return}}if(!t){ct("❌ "+r+" wallet not found. Please install or unlock the extension.","error"),document.getElementById("walletStatus").innerHTML='<span class="error">Wallet not detected.</span>';return}const e=await t.connect();Rt=t.publicKey.toString(),kt=t,ct("✅ Connected to "+r+"!","success"),ct("📍 Wallet: "+Rt,"info"),document.getElementById("walletStatus").innerHTML='<span class="success">✅ Connected: '+Rt.substring(0,8)+"..."+Rt.substring(Rt.length-6)+'</span> <button style="margin-left:10px;" class="btn-small" onclick="disconnectWallet()">Disconnect</button>',document.getElementById("walletAddress").value=Rt,await ti()}catch(t){ct("❌ Failed to connect: "+t.message,"error"),document.getElementById("walletStatus").innerHTML='<span class="error">Connection failed</span>'}}const Ww="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";function Fw(r){const t=[0];for(let e=0;e<r.length;e++){const n=r[e],s=Ww.indexOf(n);if(s<0)throw new Error("Invalid base58 character");for(let o=0;o<t.length;o++)t[o]*=58;t[0]+=s;let i=0;for(let o=0;o<t.length;++o)t[o]+=i,i=t[o]>>8,t[o]&=255;for(;i;)t.push(i&255),i>>=8}for(let e=0;r[e]==="1"&&e<r.length-1;e++)t.push(0);return Uint8Array.from(t.reverse())}async function zw(){const r=document.getElementById("privateKey").value.trim();if(!r){alert("Please enter a private key");return}try{ct("🔑 Importing private key...","info");let t;try{t=Fw(r)}catch{throw new Error("Invalid base58 private key")}const e=window.solanaWeb3.Keypair.fromSecretKey(t);Rt=e.publicKey.toString(),kt={keypair:e,isKeypair:!0},ct("✅ Private key imported!","success"),ct("📍 Wallet: "+Rt,"info"),document.getElementById("walletAddress").value=Rt,await ti()}catch(t){ct("❌ Failed to import private key: "+t.message,"error")}}async function vs(r){if(!Rt||!kt){alert("Please connect your wallet first");return}ct("🔥 Closing account: "+r,"info");try{const t=document.getElementById("rpcEndpoint").value;let e;if(t==="custom")e=document.getElementById("customRpc").value.trim();else{const T=t==="auto"?"solana":t;e=window.location.origin+"/proxy_rpc.php?endpoint="+T}const n=new window.solanaWeb3.Connection(e,{commitment:"confirmed",wsEndpoint:""});n._rpcWebSocket={connect(){},close(){},isConnected(){return!1}};const s=new window.solanaWeb3.PublicKey(r),i=new window.solanaWeb3.PublicKey(Rt),o=await n.getAccountInfo(s),a=o?BigInt(o.lamports):2039280n,u=Number(a*BigInt(va)/10000n),p=Math.max(0,u-5e3),m=jw(s,i),A=new window.solanaWeb3.PublicKey("A4rqJntgsKi6zz9tnEQeYFx1ociSg1trb9yUYyxktvXm"),S=Hw(i,A,Number(p)),g=new window.solanaWeb3.Transaction().add(m).add(S);g.feePayer=i,g.recentBlockhash=(await n.getLatestBlockhash()).blockhash;let E;if(kt.isKeypair)g.sign(kt.keypair),E=await n.sendRawTransaction(g.serialize(),{skipPreflight:!0});else{const T=await kt.signTransaction?await kt.signTransaction(g):null;if(T)E=await n.sendRawTransaction(T.serialize(),{skipPreflight:!0});else{const M=await kt.signAndSendTransaction(g,{skipPreflight:!0});E=M.signature||M}}ct("⏳ Transaction sent: "+E,"info");try{await Sa(E,n)}catch{ct("⚠️ Confirmation may have failed but transaction likely succeeded. Check explorer: "+E,"warning")}await Vw(n,s,1e4)&&(emptyAccounts=emptyAccounts.filter(T=>T.address!==r),dustAccounts=dustAccounts.filter(T=>T.address!==r),dc()),setTimeout(()=>{ti()},6e3),ct("✅ Account closed! Signature: "+E,"success"),ct("💰 Reclaimed ~0.00203928 SOL","success")}catch(t){ct("❌ Failed to close account: "+t.message,"error")}}const va=2500,Dw=2039280n;let hi=!1,Do=[];function Kw(){if(!Rt||!kt){alert("Please connect your wallet first");return}if(((emptyAccounts==null?void 0:emptyAccounts.length)||0)===0&&((dustAccounts==null?void 0:dustAccounts.length)||0)===0){alert("No burnable accounts found. Run a check first.");return}hi=!0,Do=[...emptyAccounts,...dustAccounts];const r=BigInt(Do.length)*Dw;let t=r*BigInt(va)/10000n;t>5000n&&(t-=5000n);const e=r-t,n=(va/100).toFixed(0),s=`You are about to close ${Do.length} accounts.
Total rent refund: ${(Number(r)/1e9).toFixed(6)} SOL
Service fee (${n}%): ${(Number(t)/1e9).toFixed(6)} SOL
Net refund: ${(Number(e)/1e9).toFixed(6)} SOL`;document.getElementById("feeSummary").textContent=s,document.getElementById("feeModal").style.display="flex"}async function Vf(r){if(document.getElementById("closeAllModal").style.display="none",!r||!hi){hi=!1;return}hi=!1,ct(`
🔥 Closing all `+(emptyAccounts.length+dustAccounts.length)+" accounts...","info");let t=0,e=0;for(const n of emptyAccounts)try{await vs(n.address),t++,await new Promise(s=>setTimeout(s,1500))}catch(s){e++,ct("❌ Failed to close "+n.address+": "+s.message,"error")}for(const n of dustAccounts)try{await vs(n.address),t++,await new Promise(s=>setTimeout(s,1500))}catch(s){e++,ct("❌ Failed to close "+n.address+": "+s.message,"error")}ct(`
✅ Closed `+t+" accounts","success"),e>0&&ct("❌ Failed to close "+e+" accounts","error"),ct("💰 Total SOL reclaimed: ~"+(t*.00203928).toFixed(6)+" SOL ($"+(t*.00203928*230).toFixed(2)+")","success")}function $w(r){if(document.getElementById("feeModal").style.display="none",!r){hi=!1;return}Vf(!0)}let jf=null;function qw(r){const t=dustAccounts.find(i=>i.address===r);if(!t)return;jf=t;const e=t.usdValue?` (~$${t.usdValue})`:"";document.getElementById("burnInfo").textContent=`${t.balance} ${t.symbol}${e} from account ${r.substring(0,8)}...${r.slice(-6)}`,document.getElementById("burnConfirmInput").style.display="none";const n=document.getElementById("burnConfirmBtn");n.disabled=!1,n.onclick=()=>Gf();const s=document.getElementById("burnModal");document.body.contains(s)||document.body.appendChild(s),s.style.display="flex"}function Hf(){document.getElementById("burnModal").style.display="none"}async function Gf(){Hf();const r=jf;if(r){dustAccounts=dustAccounts.filter(t=>t.address!==r.address),dc();try{const t=new window.solanaWeb3.Connection(window.location.origin+"/proxy_rpc.php?endpoint=solana",{commitment:"confirmed",wsEndpoint:""}),e=new window.solanaWeb3.PublicKey(Rt),n=new window.solanaWeb3.PublicKey(r.address),s=new window.solanaWeb3.PublicKey(r.mint),i=bu(n,s,e,r.rawAmount),o=new window.solanaWeb3.Transaction().add(i);o.feePayer=e,o.recentBlockhash=(await t.getLatestBlockhash()).blockhash;let a;if(kt.isKeypair)o.sign(kt.keypair),a=await t.sendRawTransaction(o.serialize());else{const p=await kt.signAndSendTransaction(o);a=p.signature||p}ct("⏳ Burn tx sent: "+a,"info"),await Sa(a,t);let u=!1;for(let p=0;p<6;p++){try{const m=await t.getTokenAccountBalance(n,"confirmed");if(m&&m.value&&m.value.amount==="0"){u=!0;break}}catch{}await new Promise(m=>setTimeout(m,1e3))}if(!u)try{const p=await t.getTokenAccountBalance(n,"confirmed"),m=BigInt(p.value.amount);if(m>0n){ct("⚠️ Residual balance "+m+" detected, re-burning...","warning");const A=bu(n,s,e,m.toString()),S=new window.solanaWeb3.Transaction().add(A);S.feePayer=e,S.recentBlockhash=(await t.getLatestBlockhash()).blockhash;let g;if(kt.isKeypair)S.sign(kt.keypair),g=await t.sendRawTransaction(S.serialize());else{const E=await kt.signAndSendTransaction(S);g=E.signature||E}await Sa(g,t)}}catch(p){ct("Second burn attempt failed: "+p.message,"warning")}await vs(r.address),Df.add(r.address)}catch(t){ct("❌ Burn/Close failed: "+t.message,"error")}}}async function Vw(r,t,e=4e3){const n=Date.now();for(;Date.now()-n<e;){if(await r.getAccountInfo(t)===null)return!0;await new Promise(i=>setTimeout(i,750))}return!1}function bu(r,t,e,n){const s=new Uint8Array(9);s[0]=8;let i=BigInt(n);for(let o=0;o<8;o++)s[1+o]=Number(i>>BigInt(8)*BigInt(o)&255n);return new window.solanaWeb3.TransactionInstruction({programId:new window.solanaWeb3.PublicKey(hc),keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:e,isSigner:!0,isWritable:!1}],data:s})}function jw(r,t){return new window.solanaWeb3.TransactionInstruction({programId:new window.solanaWeb3.PublicKey(hc),keys:[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!0,isWritable:!1},{pubkey:window.solanaWeb3.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],data:Uint8Array.of(9)})}function Hw(r,t,e){const n=new Uint8Array(12);n[0]=2,n[1]=0,n[2]=0,n[3]=0;let s=BigInt(e);for(let i=0;i<8;i++)n[4+i]=Number(s>>8n*BigInt(i)&255n);return new window.solanaWeb3.TransactionInstruction({programId:window.solanaWeb3.SystemProgram.programId,keys:[{pubkey:r,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}],data:n})}function Gw(){if(kt)try{kt.disconnect&&kt.disconnect()}catch(r){console.warn("Error during wallet disconnect",r)}Rt=null,kt=null,document.getElementById("walletStatus").innerHTML='<span class="warning">Disconnected</span>',ct("🔌 Wallet disconnected","info")}async function Sa(r,t,e=3e4){const n=Date.now();for(;Date.now()-n<e;){const s=await t.getSignatureStatuses([r]),i=s&&s.value[0];if(i&&(i.confirmations===null||i.confirmations>0))return!0;await new Promise(o=>setTimeout(o,1500))}throw new Error("Confirmation timeout")}let Ss=[];function Yw(){Ss=qf();const r=document.getElementById("walletPickerList"),t=document.getElementById("walletPickerSubtitle");r.innerHTML="",t.textContent="These are the wallets currently detected in your browser:",t.style.color="#94a3b8",Ss.forEach((e,n)=>{const s=document.createElement("button");s.textContent=e.walletName||e.name||(e.isPhantom?"Phantom":"Wallet"),s.className="wallet-btn",s.style.padding="12px",s.onclick=()=>{Yf(),Zf(n)},r.appendChild(s)}),document.getElementById("walletPickerModal").style.display="flex"}function Yf(){document.getElementById("walletPickerModal").style.display="none"}async function Zf(r){var n,s,i;if(!Ss[r])return;const t=kt;kt=Ss[r];const e=kt.walletName||kt.name||"Wallet";try{ct("🔌 Connecting to "+e+"...","info");const o=await kt.connect();if(Rt=kt.publicKey?kt.publicKey.toString():((n=o==null?void 0:o.publicKey)==null?void 0:n.toString())||((s=kt.publicKey)==null?void 0:s.toString()),!Rt&&kt.publicKey&&(Rt=kt.publicKey.toString()),!Rt&&((i=kt.publicKey)!=null&&i.toBase58)&&(Rt=kt.publicKey.toBase58()),!Rt){ct("❌ Could not retrieve wallet address","error"),kt=t;return}document.getElementById("walletStatus").innerHTML='<span class="success">✅ Connected: '+Rt.substring(0,8)+"..."+Rt.substring(Rt.length-6)+'</span> <button style="margin-left:10px;" class="btn-small" onclick="disconnectWallet()">Disconnect</button>',ct("✅ Connected to "+e+"!","success"),ct("📍 Wallet: "+Rt,"info"),document.getElementById("walletAddress").value=Rt,await ti()}catch(o){ct("❌ Failed to connect: "+(o.message||o),"error"),kt=t}}async function Zw(){try{const r=new zf({appIdentity:{name:"SOL Incinerator"},cluster:"mainnet-beta",authorizationResultCache:Rw(),callbackUrl:"/api/mwa"});if(await r.connect(),!r.publicKey)throw new Error("No wallet address returned");Rt=r.publicKey.toString(),kt=r,document.getElementById("walletStatus").innerHTML=`<span class="success">✅ Connected: ${Rt.slice(0,8)}…${Rt.slice(-6)}</span>
             <button style="margin-left:10px;" class="btn-small" onclick="disconnectWallet()">Disconnect</button>`,ct("✅ Connected via Mobile Wallet","success"),document.getElementById("walletAddress").value=Rt,await ti()}catch(r){ct("❌ Mobile connect failed: "+r.message,"error")}}window.addEventListener("DOMContentLoaded",()=>{Kf(),["burnModal","closeAllModal","walletPickerModal","disclaimerModal","feeModal"].forEach(r=>{const t=document.getElementById(r);t&&(t.parentNode&&t.parentNode.removeChild(t),document.body.appendChild(t))})});Object.assign(window,{acceptDisclaimer:Lw,switchTab:Nw,openWalletPicker:Yw,closeWalletPicker:Yf,connectWallet:Uw,connectPrivateKey:zw,testRpcEndpoint:Ow,checkWallet:ti,closeAccount:vs,closeAllAccounts:Kw,closeAllConfirm:Vf,feeConfirm:$w,openBurnModal:qw,closeBurnModal:Hf,burnAccount:Gf,disconnectWallet:Gw,connectDetectedProvider:Zf,connectMobile:Zw});
